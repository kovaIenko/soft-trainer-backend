{
  "chatId" : 1,
  "errorType" : "CompletionException",
  "errorMessage" : "java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed",
  "stackTrace" : "java.util.concurrent.CompletionException: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed\n\tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)\n\tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\nCaused by: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:145)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)\n\t... 6 more\nCaused by: java.lang.RuntimeException: Legacy processing failed\n\tat com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135)\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86)\n\t... 7 more\nCaused by: com.oruel.scriptforge.InnerFunctio...",
  "operation" : "SEND_MESSAGE",
  "timestamp" : "2025-07-18 13:58:11.280"
}
{
  "chatId" : 1,
  "errorType" : "CompletionException",
  "errorMessage" : "java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed",
  "stackTrace" : "java.util.concurrent.CompletionException: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed\n\tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)\n\tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\nCaused by: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:145)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)\n\t... 6 more\nCaused by: java.lang.RuntimeException: Legacy processing failed\n\tat com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135)\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86)\n\t... 7 more\nCaused by: com.oruel.scriptforge.InnerFunctio...",
  "operation" : "SEND_MESSAGE",
  "timestamp" : "2025-07-18 13:58:14.897"
}
{
  "chatId" : 1,
  "errorType" : "CompletionException",
  "errorMessage" : "java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed",
  "stackTrace" : "java.util.concurrent.CompletionException: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed\n\tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)\n\tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\nCaused by: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:145)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)\n\t... 6 more\nCaused by: java.lang.RuntimeException: Legacy processing failed\n\tat com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135)\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\n\tat com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86)\n\t... 7 more\nCaused by: com.oruel.scriptforge.InnerFunctio...",
  "operation" : "SEND_MESSAGE",
  "timestamp" : "2025-07-18 13:58:15.089"
}
