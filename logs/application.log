2025-07-18 00:31:09.036 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=38m42s592ms).
2025-07-18 00:52:07.961 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4d6c941b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 00:52:08.011 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=20m59s17ms).
2025-07-18 00:52:18.087 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@f0c2d25 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:34:23.363 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5901fbb8 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:34:23.374 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 01:34:23.374 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 2545587ms.
2025-07-18 01:34:23.375 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 01:34:23.386 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor72.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 2545587ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 2545587ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 01:34:39.013 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=42m31s8ms).
2025-07-18 01:35:08.684 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@714d600 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:35:18.692 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@763a157e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:35:28.700 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@73c80d7c (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:35:28.706 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 01:35:28.706 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30036ms.
2025-07-18 01:35:28.706 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 01:35:28.709 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor72.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30036ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30036ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 01:36:08.658 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@56e51da5 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:36:18.665 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@67c8c392 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:36:28.673 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7115aba (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:36:28.675 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 01:36:28.675 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30023ms.
2025-07-18 01:36:28.676 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 01:36:28.676 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor72.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30023ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30023ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 01:37:08.661 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5695e33 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:37:46.490 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 96039 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 01:37:46.492 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 01:37:49.582 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 01:37:49.582 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 01:37:49.651 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 01:37:49.815 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 01:37:50.655 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@438aaa9f
2025-07-18 01:37:50.657 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 01:37:51.177 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.8 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-07-18 01:37:56.319 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "alter table if exists materials alter column file_content set data type VARBINARY" via JDBC [ERROR: type "varbinary" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table if exists materials alter column file_content set data type VARBINARY" via JDBC [ERROR: type "varbinary" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:574)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:514)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:333)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:232)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:286)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.postgresql.util.PSQLException: ERROR: type "varbinary" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-07-18 01:38:00.969 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 01:38:01.540 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 01:38:01.541 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 01:38:01.970 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 01:38:03.004 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 17.282 seconds (process running for 18.525)
2025-07-18 01:39:42.515 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20231013/e22e0c040fe16f04ffdb85d851d77b07fc05ea52/json-20231013.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 01:39:42.559 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Starting AiGeneratedSimulationIntegrationTest using Java 17.0.13 with PID 96893 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 01:39:42.562 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 01:40:02.366 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 01:40:03.512 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 01:40:03.533 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 01:40:03.678 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 01:40:13.028 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 01:40:13.036 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 01:40:13.039 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 01:40:13.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 01:40:13.043 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 01:40:13.044 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 01:40:13.046 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 01:40:13.047 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 01:40:13.048 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 01:40:13.050 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 01:40:13.053 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 01:40:13.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 01:40:13.059 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 01:40:13.060 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 01:40:13.062 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 01:40:13.064 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 01:40:13.065 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 01:40:13.067 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 01:40:13.069 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 01:40:13.072 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 01:40:13.075 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 01:40:13.077 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 01:40:13.079 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 01:40:13.082 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 01:40:13.084 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 01:40:13.086 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 01:40:13.089 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 01:40:13.091 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 01:40:13.094 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 01:40:13.095 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 01:40:13.096 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 01:40:13.097 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 01:40:13.098 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 01:40:13.128 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 01:40:13.136 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 01:40:13.142 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 01:40:13.144 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 01:40:13.146 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 01:40:13.148 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 01:40:13.150 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 01:40:13.153 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 01:40:13.157 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 01:40:13.160 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 01:40:13.162 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 01:40:13.176 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 01:40:13.200 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 01:40:13.207 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 01:40:13.210 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 01:40:13.216 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 01:40:13.227 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 01:40:13.232 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 01:40:13.236 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 01:40:13.243 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 01:40:13.248 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 131 common frames omitted
2025-07-18 01:40:13.294 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 01:40:13.308 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 01:40:13.314 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 01:40:13.320 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 01:40:13.326 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 01:40:13.331 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 01:40:13.338 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 01:40:13.346 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 01:40:13.354 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 01:40:13.361 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 01:40:13.365 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 01:40:13.373 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 01:40:13.379 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 01:40:13.389 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 01:40:13.413 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 01:40:13.421 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 01:40:13.428 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 01:40:13.434 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 01:40:13.442 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 01:40:13.447 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 01:40:13.452 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 01:40:13.454 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 01:40:13.460 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 01:40:13.467 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 01:40:13.476 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 01:40:13.483 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 01:40:13.487 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 01:40:13.496 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 01:40:13.502 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 01:40:13.511 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 01:40:13.516 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 01:40:13.524 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 01:40:13.530 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 01:40:13.536 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 01:40:13.544 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 01:40:13.548 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 01:40:13.555 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 01:40:25.732 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 01:40:25.784 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 01:40:28.307 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Started AiGeneratedSimulationIntegrationTest in 47.049 seconds (process running for 53.637)
2025-07-18 01:40:28.679 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 01:40:28.679 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 01:40:28.794 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 01:40:28.860 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 01:40:29.135 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 01:40:29.146 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 01:40:29.151 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 01:40:29.157 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 01:40:29.162 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 01:40:29.168 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 01:40:29.176 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 01:40:29.183 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 01:40:29.188 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 01:40:29.190 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 01:40:29.197 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 01:40:29.203 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 01:40:29.212 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 01:40:29.234 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 01:40:29.238 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 01:40:29.245 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 01:40:29.247 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 01:40:29.250 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 01:40:29.254 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 01:40:29.258 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 01:40:29.262 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 01:40:29.265 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 01:40:29.269 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 01:40:29.273 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 01:40:29.278 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 01:40:29.279 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 01:40:29.280 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 01:40:29.281 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 01:40:29.284 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 01:40:29.287 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 01:40:29.293 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 01:40:29.301 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 01:40:29.303 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 01:40:29.320 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 01:40:29.361 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 01:56:42.628 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=14m21s817ms).
2025-07-18 01:57:04.948 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@438aaa9f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:57:14.980 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3a2bd834 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:57:24.990 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@f047aa3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 01:57:25.091 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 01:57:25.092 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30199ms.
2025-07-18 01:57:25.093 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 01:57:25.182 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30199ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30199ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 32 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 37 common frames omitted
2025-07-18 02:00:40.352 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@50d48d92 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:00:48.234 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m5s562ms).
2025-07-18 02:00:50.363 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@79836c48 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:01:00.373 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@105338de (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:01:00.375 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 02:01:00.376 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30033ms.
2025-07-18 02:01:00.377 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 02:01:00.380 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30033ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30033ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 32 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 37 common frames omitted
2025-07-18 02:17:48.394 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6530f79e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:17:56.293 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=16m38s55ms).
2025-07-18 02:17:58.411 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@e3fbc30 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:18:08.429 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@30b611e7 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:18:08.430 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 02:18:08.431 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30041ms.
2025-07-18 02:18:08.432 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 02:18:08.434 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30041ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30041ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 32 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 37 common frames omitted
2025-07-18 02:18:48.401 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5ff409d9 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:18:58.411 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@17c0d79d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:19:08.420 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@68398507 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:19:08.422 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 02:19:08.423 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30029ms.
2025-07-18 02:19:08.424 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 02:19:08.426 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30029ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30029ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 32 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 37 common frames omitted
2025-07-18 02:19:48.398 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@63d8e491 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:19:58.406 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6a3dd7e0 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:20:08.414 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4d3949f2 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:20:08.415 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 02:20:08.416 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30024ms.
2025-07-18 02:20:08.423 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 02:20:08.424 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30024ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30024ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 32 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 37 common frames omitted
2025-07-18 02:20:48.403 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@387923c4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:52:10.167 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7b87e293 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:52:18.107 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=25m51s700ms).
2025-07-18 02:52:20.206 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@191c122e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:52:30.217 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@e4ddca (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 02:52:30.229 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 02:52:30.231 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30105ms.
2025-07-18 02:52:30.232 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 02:52:30.236 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30105ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30105ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 03:10:26.827 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2e20166a (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:10:34.216 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=17m46s46ms).
2025-07-18 03:10:36.847 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6c224f1d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:10:46.864 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@69aa7c70 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:10:46.865 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 03:10:46.866 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30060ms.
2025-07-18 03:10:46.867 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 03:10:46.868 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30060ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30060ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 03:11:26.158 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@35396f88 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:11:36.178 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@129733e3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:11:46.196 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5919e471 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:11:46.201 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 03:11:46.203 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30060ms.
2025-07-18 03:11:46.205 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 03:11:46.206 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30060ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30060ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 03:12:26.168 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@56c9891d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:12:36.173 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@225359b8 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:12:46.183 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2074fc8c (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:12:46.185 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 03:12:46.186 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30037ms.
2025-07-18 03:12:46.186 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 03:12:46.186 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30037ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30037ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 03:12:56.343 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3c779846 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:41:51.780 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@63d04ee2 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:41:59.954 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=21m55s591ms).
2025-07-18 03:42:01.846 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5026af4c (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:42:11.872 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3023a8e6 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:42:11.880 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 03:42:11.883 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30142ms.
2025-07-18 03:42:11.884 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 03:42:11.890 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30142ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30142ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 03:59:41.308 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1b1d3cb4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 03:59:49.528 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=17m19s557ms).
2025-07-18 03:59:51.324 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@79cac4ce (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:00:01.333 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1909aab1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:00:01.335 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 04:00:01.335 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30034ms.
2025-07-18 04:00:01.335 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 04:00:01.336 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30034ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30034ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 04:00:41.305 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4a55642 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:00:51.317 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@132b0e86 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:01:01.333 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@68c79734 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:01:01.334 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 04:01:01.335 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30036ms.
2025-07-18 04:01:01.336 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 04:01:01.337 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30036ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30036ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 04:01:41.398 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1b1fc241 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:01:51.432 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1d5c565d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:02:01.444 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@25fb6dbe (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:02:01.452 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 04:02:01.453 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30128ms.
2025-07-18 04:02:01.454 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 04:02:01.460 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30128ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30128ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 04:02:41.357 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@40b323d1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:09:41.371 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@47598eee (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:09:46.475 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1ceec43a (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:48:45.495 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=30m25s728ms).
2025-07-18 04:49:37.065 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3e73acf8 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:49:47.085 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3d5bcb54 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:49:57.106 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@59aad715 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:49:57.132 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 04:49:57.134 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30081ms.
2025-07-18 04:49:57.135 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 04:49:57.153 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30081ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30081ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 04:50:07.325 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2f3ce4ef (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:50:17.908 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4bfeb958 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:50:27.968 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6f976e24 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:50:27.970 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 04:50:27.971 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30658ms.
2025-07-18 04:50:27.971 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 04:50:28.914 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30658ms.] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy176.findUsersWithRecentHyperparamUpdates(Unknown Source)
	at com.backend.softtrainer.services.analytics.ProfileAiOverviewService.scheduledProfileOverviewUpdate(ProfileAiOverviewService.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30658ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:180)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy199.getResultList(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30658ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 71 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 76 common frames omitted
2025-07-18 04:50:38.975 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@14badbea (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:50:48.991 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7da864d7 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:50:59.013 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@72e741e5 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 04:50:59.015 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 04:50:59.015 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30048ms.
2025-07-18 04:50:59.016 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 04:50:59.018 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30048ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30048ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 04:51:37.041 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3b8ceab4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:36:11.501 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=30m25s815ms).
2025-07-18 05:36:32.904 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@f43c9f3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:36:42.960 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@54d1f33e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:36:52.976 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@32d9bda3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:36:52.985 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 05:36:52.987 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30139ms.
2025-07-18 05:36:52.987 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 05:36:52.992 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30139ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30139ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 05:37:32.847 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5cceda87 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:37:42.873 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7fccf943 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:37:52.889 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5d9101a9 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:37:52.892 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 05:37:52.894 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30061ms.
2025-07-18 05:37:52.894 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 05:37:52.895 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30061ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30061ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 05:38:32.840 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3a5490af (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:38:42.853 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@21a9821d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:38:52.864 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7271cb01 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 05:38:52.865 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 05:38:52.866 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30032ms.
2025-07-18 05:38:52.866 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 05:38:52.867 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30032ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30032ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 05:39:32.830 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4caa5b92 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:01:25.135 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m43s12ms).
2025-07-18 06:01:45.922 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@13f5be93 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:01:55.969 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7a9d6bc0 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:24:47.320 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@476c5af1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:24:47.322 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 06:24:47.322 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 1391486ms.
2025-07-18 06:24:47.323 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 06:24:47.324 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 1391486ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 1391486ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 06:25:07.511 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=23m12s353ms).
2025-07-18 06:25:28.196 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@12e59398 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:25:38.216 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@44f5837e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:25:48.231 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@35bc1efe (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:25:48.233 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 06:25:48.234 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30054ms.
2025-07-18 06:25:48.234 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 06:25:48.236 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30054ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30054ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 06:26:28.200 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@8398f63 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:26:38.209 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@282ebb49 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:26:48.218 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@516c2d34 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:26:48.221 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 06:26:48.221 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30030ms.
2025-07-18 06:26:48.222 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 06:26:48.223 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30030ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30030ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 06:27:28.193 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@495ede02 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:27:38.200 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@555e0342 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:27:48.205 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@79dd02d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 06:27:48.207 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 06:27:48.208 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30024ms.
2025-07-18 06:27:48.215 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 06:27:48.216 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30024ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30024ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 07:14:33.417 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=30m25s651ms).
2025-07-18 07:15:23.912 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4078556e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:15:33.950 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4e5f7af3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:15:43.975 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@75da42db (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:15:43.995 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 07:15:43.997 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30134ms.
2025-07-18 07:15:43.998 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 07:15:44.009 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30134ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30134ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 07:16:23.863 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@25712c84 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:16:33.874 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@580915e1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:16:43.885 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@210a2be3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:16:43.888 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 07:16:43.889 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30039ms.
2025-07-18 07:16:43.889 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 07:16:43.894 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30039ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30039ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 07:17:23.863 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@61cf8bd5 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:17:33.875 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3a33cc1d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:17:43.890 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@58029e7e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 07:17:43.891 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 07:17:43.891 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30040ms.
2025-07-18 07:17:43.891 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 07:17:43.893 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30040ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30040ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 07:18:23.853 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@29a983d8 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:02:13.779 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4e1e144b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:02:23.651 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=23m19s911ms).
2025-07-18 08:02:23.802 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@605c706b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:02:33.830 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1cda5192 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:02:33.839 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 08:02:33.840 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30069ms.
2025-07-18 08:02:33.841 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 08:02:33.845 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30069ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30069ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 08:02:59.961 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4bd2eeb4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:03:09.994 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@411b67c4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:03:20.009 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6488a558 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:03:20.527 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 08:03:20.527 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30581ms.
2025-07-18 08:03:20.528 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 08:03:20.553 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30581ms.] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy176.findUsersWithRecentHyperparamUpdates(Unknown Source)
	at com.backend.softtrainer.services.analytics.ProfileAiOverviewService.scheduledProfileOverviewUpdate(ProfileAiOverviewService.java:100)
	at jdk.internal.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30581ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:180)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at jdk.internal.reflect.GeneratedMethodAccessor63.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy199.getResultList(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30581ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 69 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 74 common frames omitted
2025-07-18 08:03:30.784 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5739d03f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:03:40.800 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@52aa78d2 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:03:50.812 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4333ffcb (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:03:50.816 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 08:03:50.817 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30045ms.
2025-07-18 08:03:50.817 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 08:03:50.819 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30045ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30045ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 08:20:24.794 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@300d1876 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:20:34.691 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=16m40s983ms).
2025-07-18 08:20:34.814 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6719b5b1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:20:44.827 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@50ed404 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:20:44.831 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 08:20:44.831 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30049ms.
2025-07-18 08:20:44.831 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 08:20:44.833 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30049ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30049ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 08:21:24.801 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2e37d176 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:21:34.809 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3727c588 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:21:44.817 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4fdfeeab (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:21:44.821 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 08:21:44.821 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30028ms.
2025-07-18 08:21:44.822 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 08:21:44.822 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30028ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30028ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 08:22:24.812 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@99f7c48 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:22:34.820 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@69a157cf (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:22:44.829 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@742f6a5 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:22:44.835 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 08:22:44.835 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30030ms.
2025-07-18 08:22:44.835 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 08:22:44.837 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30030ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30030ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 08:23:24.808 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2b641799 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 08:50:24.976 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m49s918ms).
2025-07-18 09:02:43.899 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=12m18s927ms).
2025-07-18 09:04:59.079 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2f388076 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:04:59.101 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:04:59.102 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 95451ms.
2025-07-18 09:04:59.102 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:04:59.109 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 95451ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 95451ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 09:05:07.693 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m53s786ms).
2025-07-18 09:05:42.631 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@559c5f7b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:14:15.144 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3e4cfaa1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:14:15.150 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:14:15.151 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 522538ms.
2025-07-18 09:14:15.151 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:14:15.157 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 522538ms.] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy176.findUsersWithRecentHyperparamUpdates(Unknown Source)
	at com.backend.softtrainer.services.analytics.ProfileAiOverviewService.scheduledProfileOverviewUpdate(ProfileAiOverviewService.java:100)
	at jdk.internal.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 522538ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:180)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at jdk.internal.reflect.GeneratedMethodAccessor63.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy199.getResultList(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 522538ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 69 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 74 common frames omitted
2025-07-18 09:14:25.189 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@76178286 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:14:29.102 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m51s402ms).
2025-07-18 09:14:35.201 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@461a7fae (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:14:45.219 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5988db64 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:14:45.221 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:14:45.221 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30031ms.
2025-07-18 09:14:45.221 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:14:45.223 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30031ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30031ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 09:20:02.838 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2e09d499 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:20:12.855 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@54c87937 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:20:13.125 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m14s20ms).
2025-07-18 09:20:22.870 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@26135c7e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:20:22.871 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:20:22.872 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30039ms.
2025-07-18 09:20:22.873 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:20:22.874 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30039ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30039ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 09:22:28.646 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m15s521ms).
2025-07-18 09:22:46.896 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@52849e2d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:22:57.024 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@570c6e7c (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:23:07.100 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@46934e7e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:37:49.410 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@79beee44 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:37:59.427 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@78cea8d8 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:38:09.440 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@764ed245 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:38:19.448 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1af3b343 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:38:19.461 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:38:19.461 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 35171ms.
2025-07-18 09:38:19.462 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:38:19.469 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 35171ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 35171ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 09:38:54.280 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@47fa6eac (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:39:04.283 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3653344a (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:39:14.288 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@323db18d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:39:14.288 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:39:14.288 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30012ms.
2025-07-18 09:39:14.289 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:39:14.289 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30012ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30012ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 09:39:54.284 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@f4fc328 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:40:04.292 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@23448a6f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:40:14.316 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@377a2caf (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:40:14.359 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:40:14.359 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30081ms.
2025-07-18 09:40:14.359 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:40:14.361 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30081ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30081ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 09:40:47.603 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 52552 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 09:40:47.605 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 09:40:50.188 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 09:40:50.188 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 09:40:50.285 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 09:40:50.440 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 09:40:51.549 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1e471884
2025-07-18 09:40:51.556 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 09:40:52.187 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.8 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-07-18 09:41:04.546 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 09:41:05.346 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 09:41:05.346 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 09:41:05.829 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 09:41:06.930 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 19.915 seconds (process running for 21.303)
2025-07-18 09:41:21.284 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-18 09:41:22.239 [http-nio-8080-exec-2] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 09:41:22.923 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14002 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-2
2025-07-18 09:41:24.703 [http-nio-8080-exec-2] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 09:41:24.704 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 09:41:24.706 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 09:41:24.707 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.SimulationEngineFactory - 🤖 Creating AI-generated simulation engine
2025-07-18 09:41:24.707 [http-nio-8080-exec-2] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created AiGeneratedSimulationEngine$$SpringCGLIB$$0 engine for type: AI_GENERATED
2025-07-18 09:41:24.708 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14002
2025-07-18 09:41:24.711 [http-nio-8080-exec-2] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14002: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 09:41:24.712 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 09:41:24.712 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 09:41:24.712 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 09:41:24.712 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 09:41:24.712 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 09:41:24.713 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 09:41:24.713 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 09:41:24.762 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14002: {"simulation_id":"1952","chat_id":"14002","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 09:41:24.763 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 09:41:24.764 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 09:41:31.242 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 6476ms (attempt 1/3)
2025-07-18 09:41:31.246 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to the feedback assessment simulation. Let's dive into evaluating your employees' feedback.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria do you consider most important when assessing feedback from your employees? Please share your thoughts.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"c73ca821-8c90-46de-b677-957b2466800d","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 09:41:31.247 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 2 messages
2025-07-18 09:41:31.247 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 09:41:31.248 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 09:41:31.248 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='EnterTextQuestion', requires_response=true
2025-07-18 09:41:31.248 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 09:41:31.248 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 2 messages are correctly configured
2025-07-18 09:41:31.251 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to the feedb...'
2025-07-18 09:41:31.252 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='What criteria do you...'
2025-07-18 09:41:31.252 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 09:41:31.256 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to the feedback assessment simulation. Let's dive into evaluating your employees' feedback.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria do you consider most important when assessing feedback from your employees? Please share your thoughts.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"c73ca821-8c90-46de-b677-957b2466800d","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 09:41:31.256 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 2 messages for simulation: 1952
2025-07-18 09:41:31.259 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 09:41:31.260 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 09:41:33.360 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 2 messages
2025-07-18 09:41:33.696 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 09:41:33.790 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 09:41:33.846 [http-nio-8080-exec-2] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 09:41:33.846 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 09:41:33.846 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - Chat 14002 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 09:41:33.846 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14002 | message_count=2
2025-07-18 09:41:33.846 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to the feedback assessment simulation. Let's dive into evaluating your employees' feedback."
2025-07-18 09:41:33.847 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=ENTER_TEXT_QUESTION | content="What criteria do you consider most important when assessing feedback from your employees? Please sha..."
2025-07-18 09:51:21.638 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s856ms), soft-evicting connections from pool.
2025-07-18 09:53:14.818 [http-nio-8080-exec-6] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 09:53:15.496 [http-nio-8080-exec-6] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14003 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-6
2025-07-18 09:53:17.043 [http-nio-8080-exec-6] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 09:53:17.044 [http-nio-8080-exec-6] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 09:53:17.046 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 09:53:17.048 [http-nio-8080-exec-6] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14003
2025-07-18 09:53:17.049 [http-nio-8080-exec-6] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14003: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 09:53:17.049 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 09:53:17.049 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 09:53:17.050 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 09:53:17.051 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 09:53:17.051 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 09:53:17.051 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 09:53:17.052 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 09:53:17.105 [http-nio-8080-exec-6] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14003: {"simulation_id":"1952","chat_id":"14003","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 09:53:17.107 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 09:53:17.107 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 09:53:20.780 [http-nio-8080-exec-6] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 3672ms (attempt 1/3)
2025-07-18 09:53:20.793 [http-nio-8080-exec-6] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Your role is to evaluate the feedback provided by your employees.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria will you use to assess the quality of feedback from your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"a47e24e8-4246-4206-8c49-362b75cba1e7","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 09:53:20.794 [http-nio-8080-exec-6] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 2 messages
2025-07-18 09:53:20.794 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 09:53:20.795 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 09:53:20.796 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='EnterTextQuestion', requires_response=true
2025-07-18 09:53:20.797 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 09:53:20.798 [http-nio-8080-exec-6] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 2 messages are correctly configured
2025-07-18 09:53:20.811 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to the Feedb...'
2025-07-18 09:53:20.813 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='What criteria will y...'
2025-07-18 09:53:20.814 [http-nio-8080-exec-6] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 09:53:20.822 [http-nio-8080-exec-6] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Your role is to evaluate the feedback provided by your employees.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria will you use to assess the quality of feedback from your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"a47e24e8-4246-4206-8c49-362b75cba1e7","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 09:53:20.822 [http-nio-8080-exec-6] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 2 messages for simulation: 1952
2025-07-18 09:53:20.824 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 09:53:20.824 [http-nio-8080-exec-6] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 09:53:22.845 [http-nio-8080-exec-6] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 2 messages
2025-07-18 09:53:23.170 [http-nio-8080-exec-6] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 09:53:23.245 [http-nio-8080-exec-6] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 09:53:23.307 [http-nio-8080-exec-6] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 09:53:23.307 [http-nio-8080-exec-6] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 09:53:23.307 [http-nio-8080-exec-6] INFO  c.b.s.controllers.ChatController - Chat 14003 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 09:53:23.307 [http-nio-8080-exec-6] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14003 | message_count=2
2025-07-18 09:53:23.307 [http-nio-8080-exec-6] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to the Feedback Assessment Simulation. Your role is to evaluate the feedback provided by you..."
2025-07-18 09:53:23.308 [http-nio-8080-exec-6] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=ENTER_TEXT_QUESTION | content="What criteria will you use to assess the quality of feedback from your employees?"
2025-07-18 09:56:12.378 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@33ce53fc (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:56:17.400 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@429bf9ea (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:56:22.406 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1efd173f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:56:27.413 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@2e828bf9 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:56:32.420 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@1e2b81b2 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:56:37.426 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3c118f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:56:37.531 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 09:56:37.531 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30633ms.
2025-07-18 09:56:37.531 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 09:56:37.590 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30633ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30633ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 09:57:11.802 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@54da9c8b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:57:16.837 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5a41d89 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:57:21.843 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4ec6c733 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:57:26.850 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@17d854c3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 09:59:11.855 [http-nio-8080-exec-10] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 09:59:12.323 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14004 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-10
2025-07-18 09:59:13.690 [http-nio-8080-exec-10] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 09:59:13.691 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 09:59:13.692 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 09:59:13.693 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14004
2025-07-18 09:59:13.693 [http-nio-8080-exec-10] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14004: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 09:59:13.694 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 09:59:13.694 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 09:59:13.694 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 09:59:13.694 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 09:59:13.694 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 09:59:13.694 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 09:59:13.694 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 09:59:13.716 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14004: {"simulation_id":"1952","chat_id":"14004","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 09:59:13.717 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 09:59:13.717 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 09:59:17.270 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 3552ms (attempt 1/3)
2025-07-18 09:59:17.371 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback from your employees.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What methods do you currently use to gather feedback from your employees? Please share your approach.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"ee556e3d-8334-45e1-99e9-1f1d724535d4","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 09:59:17.381 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 2 messages
2025-07-18 09:59:17.382 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 09:59:17.392 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 09:59:17.395 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='EnterTextQuestion', requires_response=true
2025-07-18 09:59:17.395 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 09:59:17.410 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 2 messages are correctly configured
2025-07-18 09:59:17.471 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to the Feedb...'
2025-07-18 09:59:17.473 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='What methods do you ...'
2025-07-18 09:59:17.474 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 09:59:17.480 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback from your employees.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What methods do you currently use to gather feedback from your employees? Please share your approach.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"ee556e3d-8334-45e1-99e9-1f1d724535d4","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 09:59:17.481 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 2 messages for simulation: 1952
2025-07-18 09:59:17.482 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 09:59:17.484 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 09:59:19.519 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 2 messages
2025-07-18 09:59:19.768 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 09:59:19.844 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 09:59:19.902 [http-nio-8080-exec-10] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 09:59:19.902 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 09:59:19.902 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - Chat 14004 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 09:59:19.903 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14004 | message_count=2
2025-07-18 09:59:19.903 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback from your employe..."
2025-07-18 09:59:19.903 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=ENTER_TEXT_QUESTION | content="What methods do you currently use to gather feedback from your employees? Please share your approach..."
2025-07-18 10:17:16.893 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@13fa52d5 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:17:26.930 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@12e2abc (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:17:37.028 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7ea8ad68 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:17:37.057 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 10:17:37.059 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30215ms.
2025-07-18 10:17:37.060 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 10:17:37.074 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30215ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30215ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 10:19:16.628 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7e4f91c2 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:20:16.872 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@18bcdae7 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:20:26.898 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@57e6ad14 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:27:16.888 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7e4600e1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:30:05.938 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m13s838ms).
2025-07-18 10:30:56.920 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6399877f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:31:06.933 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@72aae700 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:31:16.939 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@25efe33b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 10:51:42.441 [http-nio-8080-exec-4] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 10:51:42.878 [http-nio-8080-exec-4] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14005 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-4
2025-07-18 10:51:44.031 [http-nio-8080-exec-4] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 10:51:44.031 [http-nio-8080-exec-4] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 10:51:44.031 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 10:51:44.033 [http-nio-8080-exec-4] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14005
2025-07-18 10:51:44.035 [http-nio-8080-exec-4] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14005: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 10:51:44.035 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 10:51:44.035 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 10:51:44.035 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 10:51:44.035 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 10:51:44.036 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 10:51:44.036 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 10:51:44.036 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 10:51:44.082 [http-nio-8080-exec-4] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14005: {"simulation_id":"1952","chat_id":"14005","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 10:51:44.082 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 10:51:44.082 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 10:51:48.360 [http-nio-8080-exec-4] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 4278ms (attempt 1/3)
2025-07-18 10:51:48.369 [http-nio-8080-exec-4] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment simulation. Let's enhance your feedback skills!","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What are your current methods for evaluating and providing feedback to your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"e7d6a4a0-ec8b-4c26-a3bf-3fbb0f8c4bc6","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 10:51:48.369 [http-nio-8080-exec-4] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 2 messages
2025-07-18 10:51:48.369 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 10:51:48.369 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 10:51:48.369 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='EnterTextQuestion', requires_response=true
2025-07-18 10:51:48.369 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 10:51:48.369 [http-nio-8080-exec-4] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 2 messages are correctly configured
2025-07-18 10:51:48.372 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to the Feedb...'
2025-07-18 10:51:48.375 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='What are your curren...'
2025-07-18 10:51:48.375 [http-nio-8080-exec-4] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 10:51:48.405 [http-nio-8080-exec-4] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment simulation. Let's enhance your feedback skills!","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What are your current methods for evaluating and providing feedback to your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"e7d6a4a0-ec8b-4c26-a3bf-3fbb0f8c4bc6","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 10:51:48.405 [http-nio-8080-exec-4] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 2 messages for simulation: 1952
2025-07-18 10:51:48.408 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 10:51:48.408 [http-nio-8080-exec-4] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 10:51:50.340 [http-nio-8080-exec-4] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 2 messages
2025-07-18 10:51:50.670 [http-nio-8080-exec-4] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 10:51:50.740 [http-nio-8080-exec-4] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 10:51:50.791 [http-nio-8080-exec-4] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 10:51:50.791 [http-nio-8080-exec-4] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 10:51:50.791 [http-nio-8080-exec-4] INFO  c.b.s.controllers.ChatController - Chat 14005 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 10:51:50.791 [http-nio-8080-exec-4] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14005 | message_count=2
2025-07-18 10:51:50.791 [http-nio-8080-exec-4] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to the Feedback Assessment simulation. Let's enhance your feedback skills!"
2025-07-18 10:51:50.791 [http-nio-8080-exec-4] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=ENTER_TEXT_QUESTION | content="What are your current methods for evaluating and providing feedback to your employees?"
2025-07-18 11:30:07.104 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m607ms).
2025-07-18 11:38:48.720 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m11s594ms).
2025-07-18 11:39:08.143 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6480a08b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:26:10.794 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@157c7984 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:26:11.004 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 12:26:11.005 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 2827754ms.
2025-07-18 12:26:11.008 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 12:26:11.033 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 2827754ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 2827754ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 12:26:16.525 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=47m27s805ms).
2025-07-18 12:27:05.770 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@4b1a659d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:27:10.783 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@aa4ddf1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:27:15.787 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5b21ef5f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:27:20.789 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@27eb2a86 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:27:25.793 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@b0c20df (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:27:30.799 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@66cc973a (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 12:27:30.801 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 12:27:30.801 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30203ms.
2025-07-18 12:27:30.801 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 12:27:30.803 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30203ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30203ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 12:28:30.831 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08001
2025-07-18 12:28:30.833 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30086ms.
2025-07-18 12:28:30.833 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - The connection attempt failed.
2025-07-18 12:28:30.833 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30086ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30086ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	... 3 common frames omitted
Caused by: java.net.UnknownHostException: database-1.cnemcy6u2psa.eu-north-1.rds.amazonaws.com
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:572)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 15 common frames omitted
2025-07-18 12:29:01.106 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08001
2025-07-18 12:29:01.110 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30007ms.
2025-07-18 12:29:01.111 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - The connection attempt failed.
2025-07-18 12:29:01.762 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy176.findUsersWithRecentHyperparamUpdates(Unknown Source)
	at com.backend.softtrainer.services.analytics.ProfileAiOverviewService.scheduledProfileOverviewUpdate(ProfileAiOverviewService.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:180)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at jdk.internal.reflect.GeneratedMethodAccessor84.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy199.getResultList(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 70 common frames omitted
Caused by: org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	... 3 common frames omitted
Caused by: java.net.SocketException: Network is unreachable
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:579)
	at java.base/sun.nio.ch.Net.connect(Net.java:568)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:593)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 15 common frames omitted
2025-07-18 12:29:31.824 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08001
2025-07-18 12:29:31.825 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30000ms.
2025-07-18 12:29:31.825 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - The connection attempt failed.
2025-07-18 12:29:31.826 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30000ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30000ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	... 3 common frames omitted
Caused by: java.net.SocketException: Network is unreachable
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:579)
	at java.base/sun.nio.ch.Net.connect(Net.java:568)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:593)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 15 common frames omitted
2025-07-18 12:30:30.106 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08001
2025-07-18 12:30:30.118 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30005ms.
2025-07-18 12:30:30.118 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - The connection attempt failed.
2025-07-18 12:30:30.140 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30005ms.] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy176.findUsersWithRecentHyperparamUpdates(Unknown Source)
	at com.backend.softtrainer.services.analytics.ProfileAiOverviewService.scheduledProfileOverviewUpdate(ProfileAiOverviewService.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30005ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:180)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at jdk.internal.reflect.GeneratedMethodAccessor84.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy199.getResultList(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 70 common frames omitted
Caused by: org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	... 3 common frames omitted
Caused by: java.net.SocketException: Network is unreachable
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:579)
	at java.base/sun.nio.ch.Net.connect(Net.java:568)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:593)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 15 common frames omitted
2025-07-18 12:31:00.216 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08001
2025-07-18 12:31:00.220 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30005ms.
2025-07-18 12:31:00.220 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - The connection attempt failed.
2025-07-18 12:31:00.226 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30005ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	... 3 common frames omitted
Caused by: java.net.SocketException: Network is unreachable
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:579)
	at java.base/sun.nio.ch.Net.connect(Net.java:568)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:593)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 15 common frames omitted
2025-07-18 12:31:30.825 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08001
2025-07-18 12:31:30.835 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30052ms.
2025-07-18 12:31:30.835 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - The connection attempt failed.
2025-07-18 12:31:30.837 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30052ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30052ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	... 3 common frames omitted
Caused by: java.net.SocketException: Network is unreachable
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:579)
	at java.base/sun.nio.ch.Net.connect(Net.java:568)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:593)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 15 common frames omitted
2025-07-18 12:44:23.623 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 23185 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 12:44:23.626 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 12:44:26.757 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 12:44:26.758 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 12:44:26.905 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 12:44:27.130 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 12:44:28.151 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@71ad959b
2025-07-18 12:44:28.153 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 12:44:28.754 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.8 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-07-18 12:44:39.992 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 12:44:40.499 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 12:44:40.499 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 12:44:41.061 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 12:44:42.097 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 19.04 seconds (process running for 22.628)
2025-07-18 12:46:39.540 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-18 12:46:41.544 [http-nio-8080-exec-7] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 853 ms
2025-07-18 12:48:34.750 [http-nio-8080-exec-5] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 12:48:35.470 [http-nio-8080-exec-5] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14052 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-5
2025-07-18 12:48:36.867 [http-nio-8080-exec-5] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 12:48:36.867 [http-nio-8080-exec-5] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 12:48:36.869 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 12:48:36.870 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.SimulationEngineFactory - 🤖 Creating AI-generated simulation engine
2025-07-18 12:48:36.870 [http-nio-8080-exec-5] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created AiGeneratedSimulationEngine$$SpringCGLIB$$0 engine for type: AI_GENERATED
2025-07-18 12:48:36.871 [http-nio-8080-exec-5] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14052
2025-07-18 12:48:36.875 [http-nio-8080-exec-5] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14052: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 12:48:36.875 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 12:48:36.876 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 12:48:36.876 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 12:48:36.876 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 12:48:36.876 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 12:48:36.876 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 12:48:36.876 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 12:48:36.884 [http-nio-8080-exec-5] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14052: {"simulation_id":"1952","chat_id":"14052","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 12:48:36.885 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 12:48:36.885 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 12:48:42.888 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 6002ms (attempt 1/3)
2025-07-18 12:48:42.891 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback together.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria do you consider when assessing the quality of feedback from your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"41f7d409-17d0-4894-8c70-5b4e36bd051e","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 12:48:42.892 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 2 messages
2025-07-18 12:48:42.892 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 12:48:42.892 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 12:48:42.893 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='EnterTextQuestion', requires_response=true
2025-07-18 12:48:42.894 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 12:48:42.894 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 2 messages are correctly configured
2025-07-18 12:48:42.900 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to the Feedb...'
2025-07-18 12:48:42.901 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='What criteria do you...'
2025-07-18 12:48:42.902 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 12:48:42.905 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback together.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria do you consider when assessing the quality of feedback from your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"41f7d409-17d0-4894-8c70-5b4e36bd051e","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 12:48:42.905 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 2 messages for simulation: 1952
2025-07-18 12:48:42.908 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 12:48:42.909 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 12:48:44.779 [http-nio-8080-exec-5] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 2 messages
2025-07-18 12:48:45.133 [http-nio-8080-exec-5] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 12:48:45.203 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 12:48:45.266 [http-nio-8080-exec-5] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 12:48:45.267 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 12:48:45.267 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - Chat 14052 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 12:48:45.268 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14052 | message_count=2
2025-07-18 12:48:45.270 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback together."
2025-07-18 12:48:45.274 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=ENTER_TEXT_QUESTION | content="What criteria do you consider when assessing the quality of feedback from your employees?"
2025-07-18 13:07:12.555 [http-nio-8080-exec-10] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 13:07:13.211 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14053 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-10
2025-07-18 13:07:14.481 [http-nio-8080-exec-10] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 13:07:14.482 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 13:07:14.482 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 13:07:14.483 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14053
2025-07-18 13:07:14.485 [http-nio-8080-exec-10] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14053: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 13:07:14.485 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 13:07:14.485 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 13:07:14.486 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 13:07:14.486 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 13:07:14.486 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 13:07:14.486 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 13:07:14.486 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 13:07:14.510 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14053: {"simulation_id":"1952","chat_id":"14053","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 13:07:14.511 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 13:07:14.511 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 13:07:17.839 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 3327ms (attempt 1/3)
2025-07-18 13:07:17.854 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback together.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria do you consider most important when assessing feedback from your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"9c046db9-c047-423b-b85d-e64a7173cb0d","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 13:07:17.856 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 2 messages
2025-07-18 13:07:17.857 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 13:07:17.858 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 13:07:17.860 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='EnterTextQuestion', requires_response=true
2025-07-18 13:07:17.861 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 13:07:17.861 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 2 messages are correctly configured
2025-07-18 13:07:17.866 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to the Feedb...'
2025-07-18 13:07:17.876 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='What criteria do you...'
2025-07-18 13:07:17.877 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 13:07:17.888 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback together.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":"What criteria do you consider most important when assessing feedback from your employees?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"operation":"create_chat","simulation_id":"1952","chat_id":"9c046db9-c047-423b-b85d-e64a7173cb0d","provider":"openai","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 13:07:17.893 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 2 messages for simulation: 1952
2025-07-18 13:07:17.897 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:07:17.899 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:07:19.790 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 2 messages
2025-07-18 13:07:20.123 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 13:07:20.189 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 13:07:20.247 [http-nio-8080-exec-10] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 13:07:20.249 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 13:07:20.249 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - Chat 14053 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 13:07:20.249 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14053 | message_count=2
2025-07-18 13:07:20.250 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to the Feedback Assessment Simulation. Let's dive into evaluating feedback together."
2025-07-18 13:07:20.250 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=ENTER_TEXT_QUESTION | content="What criteria do you consider most important when assessing feedback from your employees?"
2025-07-18 13:36:48.464 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@15fa80b1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:36:53.510 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7cfb45ea (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:36:58.514 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@163daadb (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:37:03.515 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6dc04bb5 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:37:08.516 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3022872d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:37:13.518 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@12e3690f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:37:13.781 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 13:37:13.783 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 31483ms.
2025-07-18 13:37:13.784 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 13:37:13.901 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 31483ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 31483ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 13:37:47.016 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@47b583fe (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:37:52.024 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3fe649e4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:37:57.028 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5cf4ab5f (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:38:02.032 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3765fc20 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 13:38:12.036 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 13:38:12.037 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30031ms.
2025-07-18 13:38:12.037 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 13:38:12.037 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30031ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30031ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 13:39:12.000 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 13:39:12.002 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30004ms.
2025-07-18 13:39:12.003 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 13:39:12.003 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30004ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 13:40:12.018 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 13:40:12.026 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30008ms.
2025-07-18 13:40:12.026 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 13:40:12.028 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30008ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30008ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 13:40:42.107 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 13:40:42.107 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30001ms.
2025-07-18 13:40:42.108 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 13:40:42.509 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30001ms.] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy176.findUsersWithRecentHyperparamUpdates(Unknown Source)
	at com.backend.softtrainer.services.analytics.ProfileAiOverviewService.scheduledProfileOverviewUpdate(ProfileAiOverviewService.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30001ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:180)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy213.getResultList(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 25 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30001ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 71 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	... 3 common frames omitted
2025-07-18 13:41:12.616 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 13:41:12.618 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30004ms.
2025-07-18 13:41:12.618 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 13:41:12.618 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30004ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 13:42:11.992 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 13:42:11.993 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30001ms.
2025-07-18 13:42:11.993 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 13:42:11.994 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.services.AiPlanProcessingService$$SpringCGLIB$$0.handleSkillGenerationTimeouts(<generated>)
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:305)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30001ms.] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 24 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30001ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 31 common frames omitted
Caused by: org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	... 36 common frames omitted
2025-07-18 13:43:35.055 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 55780 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:43:35.057 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 13:43:38.019 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 13:43:38.019 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 13:43:38.109 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 13:43:38.294 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 13:43:47.790 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@770cae59
2025-07-18 13:43:47.792 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 13:43:55.523 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.8 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-07-18 13:44:14.125 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:44:14.628 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 13:44:14.628 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 13:44:15.242 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:44:16.475 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 42.211 seconds (process running for 43.759)
2025-07-18 13:44:24.536 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-18 13:44:32.875 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Skill 1702 is present 
2025-07-18 13:44:33.519 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - For simulation 1952 with the order 1 there are 41 chats
2025-07-18 13:44:33.519 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - At least one completed chat: false for simulation 1952
2025-07-18 13:44:33.520 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - For simulation 1953 with the order 2 there are 0 chats
2025-07-18 13:44:33.521 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - For simulation 1954 with the order 3 there are 0 chats
2025-07-18 13:44:33.521 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Simulation 1952 is available true
2025-07-18 13:44:33.524 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Simulation 1953 is available false
2025-07-18 13:44:33.524 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Simulation 1954 is available false
2025-07-18 13:44:39.172 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - Skill 1702 is present 
2025-07-18 13:44:39.479 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - For simulation 1952 with the order 1 there are 41 chats
2025-07-18 13:44:39.479 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - At least one completed chat: false for simulation 1952
2025-07-18 13:44:39.479 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - For simulation 1953 with the order 2 there are 0 chats
2025-07-18 13:44:39.479 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - For simulation 1954 with the order 3 there are 0 chats
2025-07-18 13:44:39.479 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - Simulation 1952 is available true
2025-07-18 13:44:39.480 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - Simulation 1953 is available false
2025-07-18 13:44:39.480 [http-nio-8080-exec-3] INFO  c.b.s.services.SkillService - Simulation 1954 is available false
2025-07-18 13:44:41.426 [http-nio-8080-exec-5] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 13:44:41.993 [http-nio-8080-exec-5] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14102 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-5
2025-07-18 13:44:43.424 [http-nio-8080-exec-5] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 13:44:43.425 [http-nio-8080-exec-5] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 13:44:43.426 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 13:44:43.428 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.SimulationEngineFactory - 🤖 Creating AI-generated simulation engine
2025-07-18 13:44:43.429 [http-nio-8080-exec-5] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created AiGeneratedSimulationEngine$$SpringCGLIB$$0 engine for type: AI_GENERATED
2025-07-18 13:44:43.430 [http-nio-8080-exec-5] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14102
2025-07-18 13:44:43.434 [http-nio-8080-exec-5] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14102: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 13:44:43.434 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 13:44:43.435 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 13:44:43.435 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 13:44:43.435 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 13:44:43.435 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 13:44:43.435 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 13:44:43.435 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 13:44:43.455 [http-nio-8080-exec-5] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14102: {"simulation_id":"1952","chat_id":"14102","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 13:44:43.456 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 13:44:43.456 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 13:44:43.910 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 453ms (attempt 1/3)
2025-07-18 13:44:43.914 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"This is a mock response from the stub provider for testing purposes.","options":null,"character_name":"Coach","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"ResultSimulation","content":"This simulation has ended because the conversation flow was interrupted.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":true,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","simulation_id":"1952","chat_id":"886efc73-7101-4321-9a04-03787f78f84f","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 13:44:43.914 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 2 messages
2025-07-18 13:44:43.915 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 13:44:43.915 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 13:44:43.915 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='ResultSimulation', requires_response=true
2025-07-18 13:44:43.915 [http-nio-8080-exec-5] WARN  c.b.s.services.AiAgentService - ⚠️ UNKNOWN MESSAGE TYPE: Message[1] has unknown type='ResultSimulation', requires_response=true
2025-07-18 13:44:43.915 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 2 messages are correctly configured
2025-07-18 13:44:43.916 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='This is a mock respo...'
2025-07-18 13:44:43.916 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='ResultSimulation', content='This simulation has ...'
2025-07-18 13:44:43.917 [http-nio-8080-exec-5] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 13:44:43.919 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"This is a mock response from the stub provider for testing purposes.","options":null,"character_name":"Coach","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"ResultSimulation","content":"This simulation has ended because the conversation flow was interrupted.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":true,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","simulation_id":"1952","chat_id":"886efc73-7101-4321-9a04-03787f78f84f","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 13:44:43.919 [http-nio-8080-exec-5] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 2 messages for simulation: 1952
2025-07-18 13:44:43.920 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: Coach, using null for now
2025-07-18 13:44:43.921 [http-nio-8080-exec-5] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:44:45.914 [http-nio-8080-exec-5] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: empathy for the chatId: 14102 to the value: 0.8
2025-07-18 13:44:45.983 [http-nio-8080-exec-5] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: directness for the chatId: 14102 to the value: 0.6
2025-07-18 13:44:46.410 [http-nio-8080-exec-5] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: directness wasn't found for the chatId: 14102
2025-07-18 13:44:46.411 [http-nio-8080-exec-5] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 2 messages
2025-07-18 13:44:46.557 [http-nio-8080-exec-5] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 13:44:46.586 [http-nio-8080-exec-5] INFO  c.b.s.services.UserMessageService - Last simulation message content [TextInnerContent(title=null, description=This simulation has ended because the conversation flow was interrupted.)]
2025-07-18 13:44:46.664 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 13:44:46.734 [http-nio-8080-exec-5] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 13:44:46.734 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 13:44:46.735 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - Chat 14102 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 13:44:46.735 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14102 | message_count=2
2025-07-18 13:44:46.735 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="This is a mock response from the stub provider for testing purposes."
2025-07-18 13:44:46.737 [http-nio-8080-exec-5] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=RESULT_SIMULATION | content=""
2025-07-18 13:44:48.298 [http-nio-8080-exec-7] INFO  c.b.s.services.UserMessageService - Last simulation message content [TextInnerContent(title=null, description=This simulation has ended because the conversation flow was interrupted.)]
2025-07-18 13:46:59.852 [http-nio-8080-exec-9] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 13:47:00.745 [http-nio-8080-exec-9] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14103 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-9
2025-07-18 13:47:02.083 [http-nio-8080-exec-9] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 13:47:02.083 [http-nio-8080-exec-9] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 13:47:02.084 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 13:47:02.085 [http-nio-8080-exec-9] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14103
2025-07-18 13:47:02.085 [http-nio-8080-exec-9] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14103: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 13:47:02.085 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 13:47:02.086 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 13:47:02.086 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 13:47:02.086 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 13:47:02.086 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 13:47:02.086 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 13:47:02.086 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 13:47:02.110 [http-nio-8080-exec-9] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14103: {"simulation_id":"1952","chat_id":"14103","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 13:47:02.111 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 13:47:02.111 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 13:47:02.880 [http-nio-8080-exec-9] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 768ms (attempt 1/3)
2025-07-18 13:47:02.890 [http-nio-8080-exec-9] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"f747aec5-faf7-4169-a0b3-f0392c962773","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 13:47:02.892 [http-nio-8080-exec-9] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 13:47:02.893 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 13:47:02.893 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 13:47:02.893 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 13:47:02.893 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 13:47:02.894 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 13:47:02.894 [http-nio-8080-exec-9] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 13:47:02.895 [http-nio-8080-exec-9] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 13:47:02.898 [http-nio-8080-exec-9] WARN  c.b.s.s.v.AiAgentResponseValidator - ❌ AI response validation failed: Message[2]: content is required
2025-07-18 13:47:02.900 [http-nio-8080-exec-9] ERROR c.b.s.services.AiAgentService - ❌ AI response validation failed: Message[2]: content is required
2025-07-18 13:47:02.907 [http-nio-8080-exec-9] WARN  c.b.s.services.AiAgentService - 🔍 Validation error: Message[2]: content is required
2025-07-18 13:47:02.933 [http-nio-8080-exec-9] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"SingleChoiceQuestion","content":"I'm experiencing technical difficulties. How would you like to proceed?","options":["Continue simulation","Try different approach","End simulation"],"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"system","timestamp":"1752835622","fallback":true},"success":true,"error_message":"Using fallback response due to AI service issues"}
2025-07-18 13:47:02.933 [http-nio-8080-exec-9] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 1 messages for simulation: 1952
2025-07-18 13:47:02.937 [http-nio-8080-exec-9] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:47:05.482 [http-nio-8080-exec-9] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 1 messages
2025-07-18 13:47:05.670 [http-nio-8080-exec-9] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 1 messages using AI_GENERATED engine
2025-07-18 13:47:05.744 [http-nio-8080-exec-9] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 13:47:05.798 [http-nio-8080-exec-9] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 13:47:05.799 [http-nio-8080-exec-9] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 13:47:05.799 [http-nio-8080-exec-9] INFO  c.b.s.controllers.ChatController - Chat 14103 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 13:47:05.799 [http-nio-8080-exec-9] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14103 | message_count=1
2025-07-18 13:47:05.811 [http-nio-8080-exec-9] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=SINGLE_CHOICE_QUESTION | content="null" | options=[MessageAnswerOptionDto(optionId=115430b1-b85a-4017-a687-cefb2a38b66c, text=Continue simulation, isSelected=false), MessageAnswerOptionDto(optionId=cf363f41-c7f1-496b-b4ee-4d48540fb822, text=Try different approach, isSelected=false), MessageAnswerOptionDto(optionId=b615a743-ecc5-412f-b43a-70fddb1a0ab8, text=End simulation, isSelected=false)]
2025-07-18 13:51:29.729 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:51:29.744 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Starting AiGeneratedSimulationIntegrationTest using Java 17.0.13 with PID 58912 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:51:29.745 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:51:35.053 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 13:51:35.471 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:51:35.473 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 13:51:35.519 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:51:40.383 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:51:40.386 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:51:40.387 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:51:40.387 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:51:40.387 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:51:40.388 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:51:40.389 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:51:40.389 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:51:40.390 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:51:40.390 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:51:40.391 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:51:40.391 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:51:40.392 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:51:40.393 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:51:40.394 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:51:40.395 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:51:40.395 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:51:40.396 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:51:40.397 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:51:40.397 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:51:40.398 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:51:40.398 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:51:40.399 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:51:40.400 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:51:40.401 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:51:40.401 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:51:40.403 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:51:40.404 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:51:40.406 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:51:40.408 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:51:40.409 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:51:40.411 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:51:40.412 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:51:40.430 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:51:40.434 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:51:40.435 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:51:40.436 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:51:40.437 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:51:40.438 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:51:40.439 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:51:40.440 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:51:40.441 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:51:40.442 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:51:40.443 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:51:40.448 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:51:40.464 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:51:40.467 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:51:40.471 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:51:40.477 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:51:40.484 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:51:40.485 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:51:40.487 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:51:40.490 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:51:40.495 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 131 common frames omitted
2025-07-18 13:51:40.530 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:51:40.540 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:51:40.549 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:51:40.552 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:51:40.555 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:51:40.559 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:51:40.562 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:51:40.570 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:51:40.575 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:51:40.578 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:51:40.581 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:51:40.587 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:51:40.591 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:51:40.596 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:51:40.617 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:51:40.621 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:51:40.630 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:51:40.634 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:51:40.636 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:51:40.638 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:51:40.641 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:51:40.642 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:51:40.645 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:51:40.647 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:51:40.650 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:51:40.653 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:51:40.656 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:51:40.658 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:51:40.662 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:51:40.664 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:51:40.667 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:51:40.668 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:51:40.670 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:51:40.672 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:51:40.674 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:51:40.676 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:51:40.679 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:51:47.332 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:51:47.401 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:51:49.234 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Started AiGeneratedSimulationIntegrationTest in 19.827 seconds (process running for 22.662)
2025-07-18 13:51:49.491 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:49.491 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:51:49.561 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:49.615 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.123 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:51:50.237 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.239 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.241 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.268 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:51:50.305 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.307 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.311 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.349 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.375 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.381 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.420 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.425 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.427 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.490 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.493 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.500 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.537 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.540 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.542 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.576 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.582 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.587 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.624 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.626 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.632 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.667 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.671 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.675 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.710 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.713 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.718 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.751 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.754 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.759 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.785 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.789 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.792 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.821 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.824 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.829 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.861 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.865 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.867 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:50.875 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:51:50.908 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:51:50.910 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:51:50.917 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:51:51.021 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:51:51.027 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:51:51.033 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:51:51.036 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:51:51.038 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:51:51.040 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:51:51.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:51:51.043 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:51:51.047 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:51:51.049 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:51:51.052 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:51:51.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:51:51.058 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:51:51.060 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:51:51.063 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:51:51.067 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:51:51.069 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:51:51.071 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:51:51.072 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:51:51.073 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:51:51.074 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:51:51.075 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:51:51.078 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:51:51.081 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:51:51.083 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:51:51.084 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:51:51.085 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:51:51.087 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:51:51.088 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:51:51.090 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:51:51.091 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:51:51.092 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:51:51.093 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:51:51.102 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 13:51:51.109 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 13:52:04.824 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 13:53:04.121 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:53:04.176 [Test worker] INFO  c.b.s.s.v.AiAgentResponseValidatorTest - Starting AiAgentResponseValidatorTest using Java 17.0.13 with PID 59528 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:53:04.179 [Test worker] INFO  c.b.s.s.v.AiAgentResponseValidatorTest - No active profile set, falling back to 1 default profile: "default"
2025-07-18 13:53:07.759 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 13:53:08.830 [Test worker] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.api.configuration.ClassicConfiguration.setDataSource(ClassicConfiguration.java:1094)
	at org.flywaydb.core.api.configuration.FluentConfiguration.dataSource(FluentConfiguration.java:624)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.configureDataSource(FlywayAutoConfiguration.java:185)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.flyway(FlywayAutoConfiguration.java:172)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:639)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:554)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 133 common frames omitted
2025-07-18 13:53:08.940 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 13:53:09.944 [Test worker] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:554)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 127 common frames omitted
2025-07-18 13:53:09.953 [Test worker] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

2025-07-18 13:53:09.977 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:60)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 109 common frames omitted
Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	... 115 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:554)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 127 common frames omitted
2025-07-18 13:53:09.989 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest@28d56028]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@18f8e2e0 testClass = com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@54e7391d, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@51c929ae, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3a7b503d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@610db97e, org.springframework.boot.test.context.SpringBootTestAnnotation@e843270c], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 86 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:60)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 109 common frames omitted
Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	... 115 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:554)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 127 common frames omitted
2025-07-18 13:53:10.007 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest@758d4aa9]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@18f8e2e0 testClass = com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@54e7391d, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@51c929ae, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3a7b503d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@610db97e, org.springframework.boot.test.context.SpringBootTestAnnotation@e843270c], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-07-18 13:53:10.013 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest@7096d451]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@18f8e2e0 testClass = com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@54e7391d, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@51c929ae, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3a7b503d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@610db97e, org.springframework.boot.test.context.SpringBootTestAnnotation@e843270c], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-07-18 13:53:10.019 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest@67d180e4]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@18f8e2e0 testClass = com.backend.softtrainer.services.validation.AiAgentResponseValidatorTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@54e7391d, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@51c929ae, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3a7b503d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@610db97e, org.springframework.boot.test.context.SpringBootTestAnnotation@e843270c], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
2025-07-18 13:54:17.976 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:54:17.989 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Starting AiGeneratedSimulationIntegrationTest using Java 17.0.13 with PID 60173 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:54:17.990 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:54:22.743 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 13:54:23.036 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:54:23.038 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 13:54:23.080 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:54:26.022 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:54:26.025 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:54:26.026 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:54:26.027 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:54:26.027 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:54:26.028 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:54:26.028 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:54:26.029 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:54:26.029 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:54:26.029 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:54:26.030 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:54:26.031 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:54:26.031 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:54:26.032 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:54:26.033 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:54:26.034 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:54:26.034 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:54:26.035 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:54:26.035 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:54:26.035 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:54:26.036 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:54:26.036 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:54:26.037 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:54:26.038 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:54:26.038 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:54:26.039 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:54:26.039 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:54:26.040 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:54:26.040 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:54:26.041 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:54:26.041 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:54:26.042 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:54:26.044 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:54:26.053 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:54:26.060 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:54:26.062 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:54:26.063 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:54:26.064 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:54:26.064 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:54:26.065 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:54:26.065 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:54:26.066 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:54:26.067 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:54:26.068 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:54:26.072 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:54:26.083 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:54:26.085 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:54:26.088 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:54:26.091 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:54:26.095 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:54:26.096 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:54:26.097 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:54:26.099 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:54:26.101 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 131 common frames omitted
2025-07-18 13:54:26.116 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:54:26.124 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:54:26.128 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:54:26.129 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:54:26.131 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:54:26.133 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:54:26.135 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:54:26.138 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:54:26.142 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:54:26.143 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:54:26.145 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:54:26.147 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:54:26.149 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:54:26.152 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:54:26.159 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:54:26.161 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:54:26.164 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:54:26.165 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:54:26.167 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:54:26.169 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:54:26.170 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:54:26.171 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:54:26.173 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:54:26.175 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:54:26.177 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:54:26.179 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:54:26.181 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:54:26.183 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:54:26.185 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:54:26.187 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:54:26.189 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:54:26.192 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:54:26.193 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:54:26.195 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:54:26.197 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:54:26.198 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:54:26.200 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:54:30.063 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:54:30.079 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:54:30.830 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Started AiGeneratedSimulationIntegrationTest in 13.371 seconds (process running for 15.673)
2025-07-18 13:54:30.934 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:54:30.934 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:54:30.958 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:54:30.975 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:54:31.035 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:54:31.037 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:54:31.040 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:54:31.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:54:31.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:54:31.043 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:54:31.044 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:54:31.044 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:54:31.045 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:54:31.046 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:54:31.046 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:54:31.047 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:54:31.048 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:54:31.049 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:54:31.049 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:54:31.050 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:54:31.051 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:54:31.051 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:54:31.052 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:54:31.053 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:54:31.053 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:54:31.054 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:54:31.055 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:54:31.056 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:54:31.056 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:54:31.057 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:54:31.057 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:54:31.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:54:31.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:54:31.059 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:54:31.059 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:54:31.060 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:54:31.060 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:54:31.065 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 13:54:31.068 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 13:55:46.745 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:55:46.815 [Test worker] INFO  c.b.s.SoftTrainerBackendApplicationTests - Starting SoftTrainerBackendApplicationTests using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:55:46.817 [Test worker] INFO  c.b.s.SoftTrainerBackendApplicationTests - The following 1 profile is active: "test"
2025-07-18 13:55:56.703 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 13:55:58.383 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:55:58.395 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 13:55:58.539 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:56:16.655 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:56:16.669 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:56:16.674 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:56:16.675 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:56:16.675 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:56:16.676 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:56:16.681 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:56:16.684 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:56:16.685 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:56:16.687 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:56:16.689 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:56:16.690 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:56:16.690 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:56:16.691 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:56:16.694 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:56:16.699 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:56:16.700 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:56:16.702 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:56:16.703 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:56:16.704 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:56:16.705 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:56:16.707 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:56:16.710 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:56:16.713 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:56:16.717 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:56:16.720 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:56:16.721 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:56:16.722 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:56:16.723 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:56:16.723 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:56:16.724 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:56:16.728 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:56:16.735 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:56:16.772 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:56:16.787 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:56:16.789 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:56:16.790 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:56:16.800 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:56:16.803 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:56:16.804 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:56:16.805 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:56:16.807 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:56:16.818 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:56:16.821 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:56:16.833 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:56:16.896 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:56:16.903 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:56:16.911 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:56:16.925 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:56:16.949 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:56:17.002 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:56:17.054 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:56:17.102 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:56:17.124 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 131 common frames omitted
2025-07-18 13:56:17.251 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:56:17.278 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:56:17.297 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:56:17.308 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:56:17.320 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:56:17.332 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:56:17.353 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:56:17.398 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:56:17.411 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:56:17.425 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:56:17.446 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:56:17.451 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:56:17.470 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:56:17.483 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:56:17.536 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:56:17.549 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:56:17.596 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:56:17.605 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:56:17.661 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:56:17.677 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:56:17.691 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:56:17.694 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:56:17.716 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:56:17.728 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:56:17.736 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:56:17.750 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:56:17.765 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:56:17.793 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:56:17.814 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:56:17.832 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:56:17.839 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:56:17.904 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:56:17.950 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:56:17.970 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:56:18.098 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:56:18.106 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:56:18.120 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:56:23.446 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:56:24.575 [Test worker] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 13:56:24.579 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:56:24.593 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:56:24.596 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:56:24.599 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:56:24.600 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:56:24.610 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:56:24.611 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:56:24.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:56:24.615 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:56:24.616 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:56:24.626 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:56:24.628 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:56:24.629 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:56:24.716 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:56:24.719 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:56:24.725 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:56:24.727 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:56:24.728 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:56:24.729 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:56:24.730 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:56:24.731 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:56:24.731 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:56:24.733 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:56:24.733 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:56:24.734 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:56:24.734 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:56:24.735 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:56:24.735 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:56:24.736 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:56:24.737 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:56:24.737 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:56:24.738 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:56:24.738 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:56:24.744 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 13:56:24.756 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 13:56:24.818 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311)
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209)
	at java.base/java.util.Optional.of(Optional.java:113)
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366)
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343)
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 194 common frames omitted
2025-07-18 13:56:24.839 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.SoftTrainerBackendApplicationTests@32ad7ecc]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@ee5579f testClass = com.backend.softtrainer.SoftTrainerBackendApplicationTests, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 86 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311)
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209)
	at java.base/java.util.Optional.of(Optional.java:113)
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366)
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343)
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 194 common frames omitted
2025-07-18 13:56:25.284 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:56:25.286 [Test worker] INFO  c.b.s.c.AdminSkillControllerIntegrationTest - Starting AdminSkillControllerIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:56:25.287 [Test worker] DEBUG c.b.s.c.AdminSkillControllerIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-07-18 13:56:25.287 [Test worker] INFO  c.b.s.c.AdminSkillControllerIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:56:36.022 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-18 13:56:36.245 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:56:36.246 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-18 13:56:36.249 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:56:52.707 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:56:52.709 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:56:52.710 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:56:52.711 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:56:52.711 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:56:52.712 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:56:52.712 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:56:52.713 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:56:52.714 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:56:52.714 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:56:52.715 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:56:52.715 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:56:52.716 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:56:52.717 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:56:52.717 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:56:52.718 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:56:52.718 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:56:52.719 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:56:52.719 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:56:52.720 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:56:52.720 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:56:52.721 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:56:52.721 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:56:52.722 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:56:52.722 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:56:52.722 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:56:52.723 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:56:52.723 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:56:52.724 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:56:52.724 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:56:52.725 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:56:52.725 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:56:52.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:56:52.726 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:56:52.728 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:56:52.729 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:56:52.730 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:56:52.731 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:56:52.733 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:56:52.734 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:56:52.735 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:56:52.736 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:56:52.737 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:56:52.739 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:56:52.947 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:56:53.015 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:56:53.026 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:56:53.031 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:56:53.043 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:56:53.065 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:56:53.109 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:56:53.133 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:56:53.138 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:56:53.141 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:56:53.383 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:56:53.401 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:56:53.405 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:56:53.409 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:56:53.411 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:56:53.414 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:56:53.417 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:56:53.421 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:56:53.423 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:56:53.426 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:56:53.428 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:56:53.430 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:56:53.432 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:56:53.435 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:56:53.438 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:56:53.445 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:56:53.448 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:56:53.452 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:56:53.455 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:56:53.458 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:56:53.461 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:56:53.462 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:56:53.465 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:56:53.468 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:56:53.488 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:56:53.493 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:56:53.508 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:56:53.548 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:56:53.561 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:56:53.573 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:56:53.582 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:56:53.687 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:56:53.703 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:56:53.712 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:56:53.721 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:56:53.726 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:56:53.735 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:57:04.403 [Test worker] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 13:57:04.408 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:04.414 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:04.418 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:04.421 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:04.424 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:04.428 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:04.432 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:04.434 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:04.439 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:04.441 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:04.444 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:04.448 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:04.454 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:04.459 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:04.463 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:04.466 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:04.471 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:04.474 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:04.477 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:04.480 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:04.484 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:04.487 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:04.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:04.494 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:04.498 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:04.501 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:04.504 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:04.509 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:04.512 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:04.514 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:04.515 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:04.517 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:04.518 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:04.520 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-18 13:57:04.525 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-18 13:57:04.568 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 13:57:04.827 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@45d32ca3]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@58c7300 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@1403f6d3 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@f9a95c57, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 86 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 13:57:04.928 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@38980d25]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@58c7300 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@1403f6d3 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@f9a95c57, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:57:05.138 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@7994c28a]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@58c7300 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@1403f6d3 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@f9a95c57, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:57:05.195 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@36ac7956]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@58c7300 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@1403f6d3 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@f9a95c57, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:57:05.364 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@3eff7ec9]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@58c7300 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@1403f6d3 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@f9a95c57, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:57:06.508 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:57:06.537 [Test worker] INFO  c.b.s.c.MessageControllerIntegrationTest - Starting MessageControllerIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:57:06.583 [Test worker] DEBUG c.b.s.c.MessageControllerIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-07-18 13:57:06.605 [Test worker] INFO  c.b.s.c.MessageControllerIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:57:17.356 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-07-18 13:57:17.376 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:57:17.379 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-07-18 13:57:17.384 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:57:20.459 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:20.460 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:20.462 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:20.465 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:20.466 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:20.468 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:20.470 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:20.471 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:20.473 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:20.474 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:20.474 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:20.475 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:20.476 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:20.477 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:20.478 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:20.480 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:20.484 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:20.486 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:20.487 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:20.488 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:20.490 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:20.491 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:20.491 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:20.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:20.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:20.493 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:20.494 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:20.496 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:20.498 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:20.500 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:20.502 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:20.504 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:20.505 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:20.508 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:57:20.515 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:57:20.520 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:57:20.523 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:20.535 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:57:20.540 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:57:20.542 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:57:20.545 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:57:20.549 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:57:20.554 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:20.557 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:57:20.559 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:57:20.563 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:57:20.569 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:57:20.592 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:20.601 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:57:20.607 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:57:20.608 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:57:20.613 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:57:20.619 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:57:20.642 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:57:20.773 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:57:20.784 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:57:20.800 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:20.803 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:57:20.807 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:57:20.810 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:57:20.816 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:57:20.823 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:57:20.826 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:57:20.835 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:57:20.841 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:57:20.844 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:57:20.870 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:57:20.875 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:57:20.884 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:57:20.902 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:57:20.907 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:57:20.921 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:57:20.926 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:57:20.938 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:57:20.943 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:57:20.945 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:57:20.956 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:57:20.961 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:57:20.971 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:57:20.975 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:57:20.983 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:57:20.990 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:57:20.994 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:57:21.003 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:57:21.023 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:57:21.030 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:57:21.059 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:57:21.070 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:57:21.077 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:57:21.083 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:57:21.096 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:57:24.087 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:57:25.125 [Test worker] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 13:57:25.129 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:25.133 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:25.136 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:25.137 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:25.138 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:25.140 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:25.142 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:25.144 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:25.147 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:25.149 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:25.153 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:25.155 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:25.156 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:25.159 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:25.162 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:25.166 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:25.170 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:25.172 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:25.174 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:25.175 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:25.176 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:25.179 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:25.182 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:25.185 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:25.186 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:25.187 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:25.188 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:25.189 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:25.190 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:25.192 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:25.194 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:25.196 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:25.199 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:25.203 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-07-18 13:57:25.205 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-07-18 13:57:25.222 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 13:57:25.257 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.MessageControllerIntegrationTest@c1c39bb]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@46fab768 testClass = com.backend.softtrainer.controllers.MessageControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@202ab08b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 86 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 13:57:25.331 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.SkillControllerIntegrationTest@6b7246fb]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3514d665 testClass = com.backend.softtrainer.controllers.SkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@3d308ad9 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@f9a95c57, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:57:25.362 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.SkillControllerIntegrationTest@2b3eb355]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3514d665 testClass = com.backend.softtrainer.controllers.SkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@3d308ad9 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@f9a95c57, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:57:26.264 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:57:26.284 [Test worker] INFO  c.b.s.i.AiGeneratedApiIntegrationTest - Starting AiGeneratedApiIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:57:26.284 [Test worker] INFO  c.b.s.i.AiGeneratedApiIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:57:27.550 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-07-18 13:57:27.552 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:57:27.553 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-07-18 13:57:27.554 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:57:28.509 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:28.510 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:28.510 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:28.510 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:28.511 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:28.511 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:28.511 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:28.513 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:28.513 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:28.513 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:28.514 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:28.514 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:28.514 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:28.514 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:28.514 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:28.515 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:28.515 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:28.515 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:28.515 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:28.515 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:28.516 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:28.516 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:28.516 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:28.516 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:28.517 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:28.517 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:28.517 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:28.517 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:28.517 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:28.518 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:28.518 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:28.518 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:28.518 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:28.519 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:57:28.519 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:57:28.519 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:57:28.520 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:28.520 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:57:28.521 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:57:28.521 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:57:28.521 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:57:28.522 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:57:28.522 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:28.522 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:57:28.523 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:57:28.525 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:57:28.526 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:57:28.527 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:28.529 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:57:28.530 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:57:28.531 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:57:28.533 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:57:28.534 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:57:28.535 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:57:28.543 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:57:28.546 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:57:28.548 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:28.549 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:57:28.551 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:57:28.552 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:57:28.556 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:57:28.558 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:57:28.559 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:57:28.560 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:57:28.561 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:57:28.562 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:57:28.564 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:57:28.565 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:57:28.566 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:57:28.568 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:57:28.569 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:57:28.571 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:57:28.573 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:57:28.574 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:57:28.576 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:57:28.577 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:57:28.578 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:57:28.580 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:57:28.582 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:57:28.586 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:57:28.590 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:57:28.592 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:57:28.594 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:57:28.596 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:57:28.598 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:57:28.602 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:57:28.604 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:57:28.606 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:57:28.607 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:57:28.609 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:57:28.610 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:57:29.649 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:57:30.979 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:57:33.930 [Test worker] INFO  c.b.s.i.AiGeneratedApiIntegrationTest - Started AiGeneratedApiIntegrationTest in 7.702 seconds (process running for 110.709)
2025-07-18 13:57:34.165 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:57:34.165 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:57:34.236 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:57:34.278 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:57:34.333 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s2_0.skills_id,s2_1.id,s2_1.avatar,s2_1.complexity,s2_1.created_at,s2_1.hearts,s2_1.is_open,s2_1.name,s3_0.id,s3_0.avatar,s3_0.behavior,s3_0.description,s3_0.generation_status,s3_0.is_admin_hidden,s3_0.is_hidden,s3_0.is_protected,s3_0.name,s3_0.simulation_count,s3_0.timestamp,s3_0.type,s2_1.type,s2_0.simulations,s1_0.timestamp,s1_0.type from skills s1_0 left join skills_simulations s2_0 on s1_0.id=s2_0.skills_id left join simulations s2_1 on s2_1.id=s2_0.simulations_key left join skills s3_0 on s3_0.id=s2_1.skill_id where s1_0.id=?
2025-07-18 13:57:34.345 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:57:34.448 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:34.451 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:57:34.463 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type from simulations s1_0 left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where s1_0.id=?
2025-07-18 13:57:34.465 [Test worker] DEBUG org.hibernate.SQL - select next value for simulations_seq
2025-07-18 13:57:34.470 [Test worker] DEBUG org.hibernate.SQL - insert into simulations (avatar,complexity,created_at,hearts,is_open,name,skill_id,type,id) values (?,?,localtimestamp,?,?,?,?,?,?)
2025-07-18 13:57:34.471 [Test worker] DEBUG org.hibernate.SQL - select s1_0.created_at from simulations s1_0 where s1_0.id=?
2025-07-18 13:57:34.487 [Test worker] DEBUG org.hibernate.SQL - insert into organizations_skills (organization_id,skill_id) values (?,?)
2025-07-18 13:57:34.493 [Test worker] DEBUG org.hibernate.SQL - insert into skills_simulations (skills_id,simulations_key,simulations) values (?,?,?)
2025-07-18 13:57:34.674 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:57:34.676 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:57:34.691 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:57:34.697 [Test worker] DEBUG org.hibernate.SQL - select next value for chats_seq
2025-07-18 13:57:34.699 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 1 for simulation: AI Leadership Simulation (ID: 1) on thread: Test worker
2025-07-18 13:57:34.699 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: Test worker
2025-07-18 13:57:34.700 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:57:34.700 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🤖 No specific nodes detected, using DYNAMIC mode
2025-07-18 13:57:34.702 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:57:34.715 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.721 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:57:34.723 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:57:34.728 [Test worker] DEBUG org.hibernate.SQL - insert into chats (hearts,is_finished,simulation_id,skill_id,timestamp,user_id,id) values (?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:34.729 [Test worker] DEBUG org.hibernate.SQL - select c1_0.timestamp from chats c1_0 where c1_0.id=?
2025-07-18 13:57:34.731 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:34.735 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.738 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:57:34.739 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:57:34.743 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:34.745 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.746 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:57:34.749 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:34.750 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.751 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:57:34.755 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.756 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:57:34.760 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.761 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:57:34.765 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.767 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:57:34.770 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:34.771 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.773 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:57:34.776 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:34.777 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.779 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:57:34.782 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:34.783 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:34.784 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:57:34.785 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 0 messages and 7 hyperparameters
2025-07-18 13:57:34.785 [Test worker] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: AI Leadership Simulation
2025-07-18 13:57:34.785 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: AI Leadership Simulation
2025-07-18 13:57:34.787 [Test worker] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - ✅ AI-generated simulation AI Leadership Simulation passed validation
2025-07-18 13:57:34.788 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 13:57:34.790 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🤖 Creating AI-generated simulation engine
2025-07-18 13:57:34.791 [Test worker] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created AiGeneratedSimulationEngine$$SpringCGLIB$$0 engine for type: AI_GENERATED
2025-07-18 13:57:34.792 [Test worker] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 1
2025-07-18 13:57:34.795 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - No skill materials found for context: 1
2025-07-18 13:57:34.795 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 13:57:34.795 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 13:57:34.795 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 13:57:34.796 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 13:57:34.796 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 13:57:34.796 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 13:57:34.796 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 13:57:34.823 [Test worker] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 1: {"simulation_id":"1","chat_id":"1","skill":{"name":"AI Leadership Training","description":"Advanced AI-powered leadership development","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":3},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"AI Leadership Simulation","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":null,"experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":null,"experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 13:57:34.826 [Test worker] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://16.171.20.54:8000/create-chat with simulation_id: 1
2025-07-18 13:57:34.826 [Test worker] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://16.171.20.54:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 13:57:37.491 [Test worker] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 2663ms (attempt 1/3)
2025-07-18 13:57:37.495 [Test worker] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"I apologize, but I'm experiencing technical difficulties. Please try again in a moment.","options":null,"character_name":"System","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"fallback":true,"provider":"system","timestamp":"1752836257"},"success":false,"error_message":"Chat creation failed: 1 validation error for AiMessageGenerationResponseDto\nmessages.2.requires_response\n  Value error, Text should not require response [type=value_error, input_value=True, input_type=bool]\n    For further information visit https://errors.pydantic.dev/2.4/v/value_error"}
2025-07-18 13:57:37.496 [Test worker] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 1 messages
2025-07-18 13:57:37.496 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 13:57:37.496 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 13:57:37.496 [Test worker] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 1 messages are correctly configured
2025-07-18 13:57:37.498 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='I apologize, but I'm...'
2025-07-18 13:57:37.499 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 13:57:37.502 [Test worker] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1: {"messages":[{"message_type":"Text","content":"I apologize, but I'm experiencing technical difficulties. Please try again in a moment.","options":null,"character_name":"System","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"fallback":true,"provider":"system","timestamp":"1752836257"},"success":false,"error_message":"Chat creation failed: 1 validation error for AiMessageGenerationResponseDto\nmessages.2.requires_response\n  Value error, Text should not require response [type=value_error, input_value=True, input_type=bool]\n    For further information visit https://errors.pydantic.dev/2.4/v/value_error"}
2025-07-18 13:57:37.503 [Test worker] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 1 messages for simulation: 1
2025-07-18 13:57:37.503 [Test worker] ERROR c.b.s.s.e.AiGeneratedSimulationEngine - ❌ AI agent initialization failed: Chat creation failed: 1 validation error for AiMessageGenerationResponseDto
messages.2.requires_response
  Value error, Text should not require response [type=value_error, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.4/v/value_error
2025-07-18 13:57:37.503 [Test worker] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Creating fallback initial messages for chat 1
2025-07-18 13:57:37.503 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:57:37.504 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:57:37.505 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 13:57:37.519 [Test worker] INFO  c.b.s.services.UserMessageService - Last simulation message content [TextInnerContent(title=Результат, description=Вітаємо! Ви успішно завершили тест симуляції. Ваші навички емпатії, професіоналізму та вирішення проблем були продемонстровані на високому рівні. Результат: відмінно!)]
2025-07-18 13:57:37.528 [Test worker] DEBUG org.hibernate.SQL - select hp1_0."key" from hyperparams hp1_0 where hp1_0.simulation_id=?
2025-07-18 13:57:37.531 [Test worker] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1
2025-07-18 13:57:37.535 [Test worker] DEBUG org.hibernate.SQL - select u1_0.email from users u1_0 where u1_0.id=?
2025-07-18 13:57:37.539 [Test worker] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: test-admin
2025-07-18 13:57:37.540 [Test worker] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: test-admin (bulk insert)
2025-07-18 13:57:37.540 [Test worker] INFO  c.b.s.controllers.ChatController - Chat 1 created for user 1 and simulation 1 using dual-mode runtime
2025-07-18 13:57:37.540 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=1 | message_count=2
2025-07-18 13:57:37.540 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="We are so sorry, but the dynamic simulation is currently unavailable. Please try again later or cont..."
2025-07-18 13:57:37.544 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=RESULT_SIMULATION | content=""
2025-07-18 13:57:40.607 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:40.608 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:57:40.609 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:57:40.610 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,prompt_id,title,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,'LastSimulationMessage',?)
2025-07-18 13:57:40.611 [Test worker] DEBUG org.hibernate.SQL - select lsm1_0.timestamp from messages lsm1_0 where lsm1_0.dtype='LastSimulationMessage' and lsm1_0.id=?
2025-07-18 13:57:40.792 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 join organizations o1_0 on o1_0.id=u1_0.organization_id where u1_0.email=?
2025-07-18 13:57:40.794 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:57:40.795 [Test worker] DEBUG org.hibernate.SQL - select as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type from organizations_skills as1_0 join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where as1_0.organization_id=?
2025-07-18 13:57:40.801 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id from chats c1_0 where c1_0.id=? and c1_0.user_id=? fetch first ? rows only
2025-07-18 13:57:40.802 [Test worker] ERROR c.b.s.s.auth.CustomUsrDetailsService - The user test-admin doesn't have chat 99999 
2025-07-18 13:57:40.808 [Test worker] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Could not resolve subtype of [simple type, class com.backend.softtrainer.dtos.messages.MessageRequestDto]: missing type id property 'message_type']
2025-07-18 13:57:40.818 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 join organizations o1_0 on o1_0.id=u1_0.organization_id where u1_0.email=?
2025-07-18 13:57:40.819 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:57:40.819 [Test worker] DEBUG org.hibernate.SQL - select as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type from organizations_skills as1_0 join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where as1_0.organization_id=?
2025-07-18 13:57:40.828 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id from chats c1_0 where c1_0.id=? and c1_0.user_id=? fetch first ? rows only
2025-07-18 13:57:40.829 [Test worker] ERROR c.b.s.s.auth.CustomUsrDetailsService - The user test-admin doesn't have chat 99999 
2025-07-18 13:57:40.848 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type from simulations s1_0 left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where s1_0.id=?
2025-07-18 13:57:40.868 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:40.869 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:40.870 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:40.870 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:40.871 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:40.871 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:40.871 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:40.872 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:40.872 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:40.872 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:40.873 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:40.873 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:40.873 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:40.874 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:40.874 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:40.874 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:40.875 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:40.875 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:40.876 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:40.877 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:40.877 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:40.878 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:40.879 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:40.879 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:40.880 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:40.880 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:40.880 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:40.880 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:40.880 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:40.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:40.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:40.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:40.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:40.882 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-07-18 13:57:40.883 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-07-18 13:57:40.941 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:57:40.942 [Test worker] INFO  c.b.s.i.AiGeneratedEndToEndTest - Starting AiGeneratedEndToEndTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:57:40.942 [Test worker] INFO  c.b.s.i.AiGeneratedEndToEndTest - The following 1 profile is active: "test"
2025-07-18 13:57:42.294 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-07-18 13:57:42.297 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:57:42.298 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-07-18 13:57:42.298 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:57:43.296 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:43.296 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:43.296 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:43.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:43.298 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:43.299 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:57:43.300 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:57:43.300 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:57:43.300 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:43.300 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:57:43.300 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:57:43.301 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:57:43.301 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:57:43.301 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:57:43.301 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:43.301 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:57:43.302 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:57:43.302 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:57:43.303 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:57:43.303 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:43.304 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:57:43.305 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:57:43.305 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:57:43.306 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:57:43.307 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:57:43.308 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:57:43.316 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:57:43.318 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:57:43.319 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:43.320 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:57:43.321 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:57:43.322 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:57:43.323 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:57:43.324 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:57:43.327 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:57:43.328 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:57:43.329 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:57:43.329 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:57:43.330 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:57:43.331 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:57:43.333 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:57:43.334 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:57:43.336 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:57:43.337 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:57:43.338 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:57:43.339 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:57:43.340 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:57:43.340 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:57:43.341 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:57:43.342 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:57:43.343 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:57:43.345 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:57:43.348 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:57:43.349 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:57:43.349 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:57:43.350 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:57:43.351 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:57:43.352 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:57:43.352 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:57:43.353 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:57:43.354 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:57:43.355 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:57:43.356 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:57:43.946 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=3000ms
2025-07-18 13:57:44.638 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:57:45.161 [Test worker] INFO  c.b.s.i.AiGeneratedEndToEndTest - Started AiGeneratedEndToEndTest in 4.26 seconds (process running for 121.941)
2025-07-18 13:57:45.166 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:57:45.186 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:57:45.187 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:57:45.191 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:57:45.196 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:57:45.198 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:57:45.200 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:45.201 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:57:45.203 [Test worker] DEBUG org.hibernate.SQL - select next value for materials_seq
2025-07-18 13:57:45.204 [Test worker] DEBUG org.hibernate.SQL - insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?)
2025-07-18 13:57:45.205 [Test worker] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-07-18 13:57:45.206 [Test worker] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "materials" not found; SQL statement:
insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?) [42102-224]
2025-07-18 13:57:45.237 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:45.250 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:45.260 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:45.272 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:57:45.275 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:57:45.280 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:45.282 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:57:45.289 [Test worker] DEBUG org.hibernate.SQL - select next value for materials_seq
2025-07-18 13:57:45.291 [Test worker] DEBUG org.hibernate.SQL - insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?)
2025-07-18 13:57:45.293 [Test worker] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-07-18 13:57:45.293 [Test worker] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "materials" not found; SQL statement:
insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?) [42102-224]
2025-07-18 13:57:45.335 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:57:45.350 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:45.351 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:57:45.354 [Test worker] DEBUG org.hibernate.SQL - insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?)
2025-07-18 13:57:45.354 [Test worker] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-07-18 13:57:45.355 [Test worker] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "materials" not found; SQL statement:
insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?) [42102-224]
2025-07-18 13:57:45.375 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:45.378 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:45.382 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:45.385 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:45.386 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:45.390 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:45.395 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:45.395 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:45.396 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:45.396 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:45.396 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:45.397 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:45.397 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:45.398 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:45.399 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:45.402 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:45.406 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:45.406 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:45.407 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:45.408 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:45.408 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:45.409 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:45.409 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:45.409 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:45.409 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:45.410 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:45.410 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:45.411 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:45.412 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:45.412 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:45.412 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:45.412 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:45.412 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:45.413 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-07-18 13:57:45.414 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
2025-07-18 13:57:45.483 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:57:45.488 [Test worker] INFO  c.b.s.i.AiGeneratedProductionSimulationIntegrationTest - Starting AiGeneratedProductionSimulationIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:57:45.490 [Test worker] INFO  c.b.s.i.AiGeneratedProductionSimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:57:47.030 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-07-18 13:57:47.032 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:57:47.033 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-07-18 13:57:47.033 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:57:48.528 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:48.529 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:48.529 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:48.529 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:48.529 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:48.529 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:48.529 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:48.530 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:48.531 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:48.532 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:48.533 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:48.533 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:57:48.533 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:57:48.533 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:57:48.534 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:48.534 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:57:48.534 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:57:48.534 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:57:48.534 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:57:48.535 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:57:48.535 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:48.535 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:57:48.535 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:57:48.536 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:57:48.537 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:57:48.538 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:48.539 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:57:48.539 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:57:48.540 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:57:48.541 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:57:48.542 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:57:48.542 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:57:48.549 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:57:48.551 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:57:48.552 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:48.553 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:57:48.554 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:57:48.554 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:57:48.555 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:57:48.556 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:57:48.557 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:57:48.558 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:57:48.559 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:57:48.560 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:57:48.561 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:57:48.562 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:57:48.564 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:57:48.565 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:57:48.566 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:57:48.568 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:57:48.569 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:57:48.570 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:57:48.571 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:57:48.572 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:57:48.573 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:57:48.574 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:57:48.575 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:57:48.576 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:57:48.577 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:57:48.578 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:57:48.579 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:57:48.580 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:57:48.581 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:57:48.582 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:57:48.583 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:57:48.584 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:57:48.585 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:57:48.586 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:57:48.587 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:57:50.163 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:57:53.725 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:57:55.043 [Test worker] INFO  c.b.s.i.AiGeneratedProductionSimulationIntegrationTest - Started AiGeneratedProductionSimulationIntegrationTest in 9.609 seconds (process running for 131.823)
2025-07-18 13:57:55.053 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:57:55.226 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:57:55.236 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:57:55.242 [Test worker] DEBUG org.hibernate.SQL - select next value for materials_seq
2025-07-18 13:57:55.249 [Test worker] DEBUG org.hibernate.SQL - select next value for materials_seq
2025-07-18 13:57:55.257 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:55.260 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:57:55.265 [Test worker] DEBUG org.hibernate.SQL - insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?)
2025-07-18 13:57:55.268 [Test worker] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-07-18 13:57:55.269 [Test worker] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "materials" not found; SQL statement:
insert into materials (file_content,file_name,skill_id,tag,id) values (?,?,?,?,?) [42102-224]
2025-07-18 13:57:55.291 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.test.context.transaction.TransactionalTestExecutionListener] for test method [void com.backend.softtrainer.integration.AiGeneratedProductionSimulationIntegrationTest.testGenerateTrainingPlan() throws java.lang.Exception] and test instance [com.backend.softtrainer.integration.AiGeneratedProductionSimulationIntegrationTest@3194a37e]
org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:803) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.transaction.TransactionContext.endTransaction(TransactionContext.java:135) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.transaction.TransactionalTestExecutionListener.afterTestMethod(TransactionalTestExecutionListener.java:259) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:278) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:261) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:277) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:277) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.commons.util.CollectionUtils.forEachInReverseOrder(CollectionUtils.java:217) ~[junit-platform-commons-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:276) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:260) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:145) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:57:55.356 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:55.428 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:55.519 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:55.557 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:55.610 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:55.648 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:57:55.696 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:55.698 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:55.701 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:55.703 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:55.707 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:55.712 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:55.717 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:55.719 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:55.720 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:55.720 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:55.721 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:55.721 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:55.721 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:55.722 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:55.722 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:55.723 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:55.723 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:55.724 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:55.724 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:55.724 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:55.725 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:55.725 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:55.725 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:55.725 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:55.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:55.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:55.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:55.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:55.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:55.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:55.726 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:55.727 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:55.727 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:55.727 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-07-18 13:57:55.728 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
2025-07-18 13:57:55.796 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:57:55.797 [Test worker] INFO  c.b.s.i.AiGeneratedRealAgentIntegrationTest - Starting AiGeneratedRealAgentIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:57:55.797 [Test worker] INFO  c.b.s.i.AiGeneratedRealAgentIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:57:56.900 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-07-18 13:57:56.902 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:57:56.902 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-07-18 13:57:56.903 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:57:57.612 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:57:57.613 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:57:57.614 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:57:57.615 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:57:57.615 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:57:57.615 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:57:57.615 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:57:57.615 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:57:57.615 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:57:57.615 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:57:57.616 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:57:57.617 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:57:57.617 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:57:57.617 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:57:57.618 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:57:57.618 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:57:57.618 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:57:57.618 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:57:57.619 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:57:57.620 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:57:57.621 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:57:57.622 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:57.622 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:57:57.623 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:57:57.623 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:57:57.623 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:57:57.624 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:57:57.624 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:57:57.624 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:57:57.625 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:57:57.626 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:57:57.627 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:57:57.628 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:57.629 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:57:57.631 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:57:57.633 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:57:57.633 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:57:57.635 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:57:57.635 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:57:57.642 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:57:57.645 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:57:57.645 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:57:57.646 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:57:57.646 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:57:57.647 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:57:57.648 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:57:57.648 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:57:57.649 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:57:57.650 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:57:57.651 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:57:57.651 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:57:57.651 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:57:57.652 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:57:57.653 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:57:57.653 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:57:57.654 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:57:57.655 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:57:57.656 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:57:57.657 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:57:57.658 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:57:57.658 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:57:57.659 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:57:57.660 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:57:57.662 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:57:57.663 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:57:57.665 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:57:57.667 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:57:57.669 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:57:57.671 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:57:57.672 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:57:57.673 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:57:57.674 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:57:57.675 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:57:57.676 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:57:57.677 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:57:57.679 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:57:58.413 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:57:59.312 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:57:59.646 [Test worker] INFO  c.b.s.i.AiGeneratedRealAgentIntegrationTest - Started AiGeneratedRealAgentIntegrationTest in 3.898 seconds (process running for 136.426)
2025-07-18 13:57:59.650 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:57:59.667 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:57:59.669 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:57:59.672 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:57:59.681 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s2_0.skills_id,s2_1.id,s2_1.avatar,s2_1.complexity,s2_1.created_at,s2_1.hearts,s2_1.is_open,s2_1.name,s3_0.id,s3_0.avatar,s3_0.behavior,s3_0.description,s3_0.generation_status,s3_0.is_admin_hidden,s3_0.is_hidden,s3_0.is_protected,s3_0.name,s3_0.simulation_count,s3_0.timestamp,s3_0.type,s2_1.type,s2_0.simulations,s1_0.timestamp,s1_0.type from skills s1_0 left join skills_simulations s2_0 on s1_0.id=s2_0.skills_id left join simulations s2_1 on s2_1.id=s2_0.simulations_key left join skills s3_0 on s3_0.id=s2_1.skill_id where s1_0.id=?
2025-07-18 13:57:59.683 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:57:59.685 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:59.686 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:57:59.689 [Test worker] DEBUG org.hibernate.SQL - insert into organizations_skills (organization_id,skill_id) values (?,?)
2025-07-18 13:57:59.692 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type from simulations s1_0 left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where s1_0.id=?
2025-07-18 13:57:59.693 [Test worker] DEBUG org.hibernate.SQL - select next value for simulations_seq
2025-07-18 13:57:59.695 [Test worker] DEBUG org.hibernate.SQL - insert into simulations (avatar,complexity,created_at,hearts,is_open,name,skill_id,type,id) values (?,?,localtimestamp,?,?,?,?,?,?)
2025-07-18 13:57:59.695 [Test worker] DEBUG org.hibernate.SQL - select s1_0.created_at from simulations s1_0 where s1_0.id=?
2025-07-18 13:57:59.699 [Test worker] DEBUG org.hibernate.SQL - insert into skills_simulations (skills_id,simulations_key,simulations) values (?,?,?)
2025-07-18 13:57:59.713 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:57:59.714 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:57:59.717 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:57:59.720 [Test worker] DEBUG org.hibernate.SQL - select next value for chats_seq
2025-07-18 13:57:59.721 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 1 for simulation: AI Leadership Simulation (ID: 1) on thread: Test worker
2025-07-18 13:57:59.722 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: Test worker
2025-07-18 13:57:59.722 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:57:59.722 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🤖 No specific nodes detected, using DYNAMIC mode
2025-07-18 13:57:59.722 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:57:59.726 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.728 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:57:59.729 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:57:59.732 [Test worker] DEBUG org.hibernate.SQL - insert into chats (hearts,is_finished,simulation_id,skill_id,timestamp,user_id,id) values (?,?,?,?,localtimestamp,?,?)
2025-07-18 13:57:59.733 [Test worker] DEBUG org.hibernate.SQL - select c1_0.timestamp from chats c1_0 where c1_0.id=?
2025-07-18 13:57:59.734 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:59.735 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.736 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:57:59.736 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:57:59.739 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:59.740 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.741 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:57:59.744 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:59.745 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.746 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:57:59.748 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.749 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:57:59.752 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.753 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:57:59.756 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.757 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:57:59.759 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:59.759 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.760 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:57:59.763 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:59.764 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.765 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:57:59.768 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:57:59.769 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:57:59.770 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:57:59.770 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 0 messages and 7 hyperparameters
2025-07-18 13:57:59.770 [Test worker] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: AI Leadership Simulation
2025-07-18 13:57:59.770 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: AI Leadership Simulation
2025-07-18 13:57:59.770 [Test worker] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - ✅ AI-generated simulation AI Leadership Simulation passed validation
2025-07-18 13:57:59.770 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 13:57:59.770 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🤖 Creating AI-generated simulation engine
2025-07-18 13:57:59.771 [Test worker] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created AiGeneratedSimulationEngine$$SpringCGLIB$$0 engine for type: AI_GENERATED
2025-07-18 13:57:59.771 [Test worker] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 1
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - No skill materials found for context: 1
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 13:57:59.771 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 13:57:59.779 [Test worker] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 1: {"simulation_id":"1","chat_id":"1","skill":{"name":"AI Leadership Training","description":"Advanced AI-powered leadership development with real-time conversation","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":3},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"AI Leadership Simulation","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":null,"experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":null,"experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 13:57:59.780 [Test worker] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://16.171.20.54:8000/create-chat with simulation_id: 1
2025-07-18 13:57:59.780 [Test worker] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://16.171.20.54:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 13:58:02.683 [Test worker] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 2903ms (attempt 1/3)
2025-07-18 13:58:02.687 [Test worker] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"I apologize, but I'm experiencing technical difficulties. Please try again in a moment.","options":null,"character_name":"System","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"fallback":true,"provider":"system","timestamp":"1752836283"},"success":false,"error_message":"Chat creation failed: 1 validation error for AiMessageGenerationResponseDto\nmessages.1.requires_response\n  Value error, Text should not require response [type=value_error, input_value=True, input_type=bool]\n    For further information visit https://errors.pydantic.dev/2.4/v/value_error"}
2025-07-18 13:58:02.687 [Test worker] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 1 messages
2025-07-18 13:58:02.687 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 13:58:02.687 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 13:58:02.687 [Test worker] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 1 messages are correctly configured
2025-07-18 13:58:02.688 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='I apologize, but I'm...'
2025-07-18 13:58:02.688 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 13:58:02.691 [Test worker] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1: {"messages":[{"message_type":"Text","content":"I apologize, but I'm experiencing technical difficulties. Please try again in a moment.","options":null,"character_name":"System","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":null,"conversation_ended":false,"end_reason":null,"generation_metadata":{"fallback":true,"provider":"system","timestamp":"1752836283"},"success":false,"error_message":"Chat creation failed: 1 validation error for AiMessageGenerationResponseDto\nmessages.1.requires_response\n  Value error, Text should not require response [type=value_error, input_value=True, input_type=bool]\n    For further information visit https://errors.pydantic.dev/2.4/v/value_error"}
2025-07-18 13:58:02.691 [Test worker] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 1 messages for simulation: 1
2025-07-18 13:58:02.691 [Test worker] ERROR c.b.s.s.e.AiGeneratedSimulationEngine - ❌ AI agent initialization failed: Chat creation failed: 1 validation error for AiMessageGenerationResponseDto
messages.1.requires_response
  Value error, Text should not require response [type=value_error, input_value=True, input_type=bool]
    For further information visit https://errors.pydantic.dev/2.4/v/value_error
2025-07-18 13:58:02.691 [Test worker] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Creating fallback initial messages for chat 1
2025-07-18 13:58:02.692 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:58:02.692 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 13:58:02.693 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 13:58:02.694 [Test worker] INFO  c.b.s.services.UserMessageService - Last simulation message content [TextInnerContent(title=Результат, description=Вітаємо! Ви успішно завершили тест симуляції. Ваші навички емпатії, професіоналізму та вирішення проблем були продемонстровані на високому рівні. Результат: відмінно!)]
2025-07-18 13:58:02.696 [Test worker] DEBUG org.hibernate.SQL - select hp1_0."key" from hyperparams hp1_0 where hp1_0.simulation_id=?
2025-07-18 13:58:02.698 [Test worker] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1
2025-07-18 13:58:02.699 [Test worker] DEBUG org.hibernate.SQL - select u1_0.email from users u1_0 where u1_0.id=?
2025-07-18 13:58:02.701 [Test worker] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: test-admin
2025-07-18 13:58:02.701 [Test worker] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: test-admin (bulk insert)
2025-07-18 13:58:02.701 [Test worker] INFO  c.b.s.controllers.ChatController - Chat 1 created for user 1 and simulation 1 using dual-mode runtime
2025-07-18 13:58:02.701 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=1 | message_count=2
2025-07-18 13:58:02.701 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="We are so sorry, but the dynamic simulation is currently unavailable. Please try again later or cont..."
2025-07-18 13:58:02.701 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=RESULT_SIMULATION | content=""
2025-07-18 13:58:05.716 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:05.717 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:58:05.718 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:58:05.718 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,prompt_id,title,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,'LastSimulationMessage',?)
2025-07-18 13:58:05.719 [Test worker] DEBUG org.hibernate.SQL - select lsm1_0.timestamp from messages lsm1_0 where lsm1_0.dtype='LastSimulationMessage' and lsm1_0.id=?
2025-07-18 13:58:05.740 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type from simulations s1_0 left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where s1_0.id=?
2025-07-18 13:58:05.752 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:05.752 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:05.752 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:05.753 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:05.753 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:05.753 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:05.753 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:05.753 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:05.753 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:05.753 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:05.754 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:05.754 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:05.754 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:05.755 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:05.755 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:05.755 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:05.756 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:05.756 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:05.756 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:05.756 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:05.757 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:05.757 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:05.757 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:05.757 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:05.758 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:05.758 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:05.758 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:05.758 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:05.758 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:05.759 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:05.759 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:05.759 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:05.759 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:05.760 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-07-18 13:58:05.760 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
2025-07-18 13:58:05.792 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:58:05.793 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Starting AiGeneratedSimulationIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:58:05.793 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:58:06.481 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-07-18 13:58:06.483 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn70: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:58:06.484 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-07-18 13:58:06.484 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:58:06.824 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:06.824 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:06.825 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:06.826 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:06.827 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:06.828 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:58:06.828 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:58:06.828 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:58:06.828 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:06.828 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:58:06.829 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:58:06.829 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:58:06.829 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:58:06.829 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:58:06.829 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:06.830 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:58:06.830 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:58:06.830 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:58:06.831 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:58:06.831 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:06.832 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:58:06.832 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:58:06.833 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:58:06.833 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:58:06.834 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:58:06.834 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:58:06.839 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:58:06.840 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:58:06.841 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:06.842 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:58:06.842 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:58:06.843 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:58:06.843 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:58:06.843 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:58:06.844 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:58:06.844 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:58:06.845 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:58:06.845 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:58:06.845 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:58:06.846 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:58:06.847 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:58:06.847 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:58:06.848 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:58:06.848 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:58:06.849 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:58:06.849 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:58:06.849 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:58:06.850 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:58:06.850 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:58:06.851 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:58:06.851 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:58:06.852 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:58:06.852 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:58:06.853 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:58:06.853 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:58:06.854 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:58:06.854 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:58:06.855 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:58:06.855 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:58:06.856 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:58:06.857 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:58:06.857 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:58:06.858 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:58:07.418 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:58:07.425 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:58:07.676 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Started AiGeneratedSimulationIntegrationTest in 1.908 seconds (process running for 144.455)
2025-07-18 13:58:07.678 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:58:07.689 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.690 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.691 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.699 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:58:07.708 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.709 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.710 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.712 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:58:07.721 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.722 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.723 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.733 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.735 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.736 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.743 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.744 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.744 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.751 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.752 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.753 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.760 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.760 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.761 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.768 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.768 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.769 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.776 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.778 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.779 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.788 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.789 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.790 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.799 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.800 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.800 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.809 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.810 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.810 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.818 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.819 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.820 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.831 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.832 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.833 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.842 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.843 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.844 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.847 [Test worker] WARN  c.b.s.s.auth.CustomUsrDetailsService - simulationId is null for user test-admin
2025-07-18 13:58:07.855 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:07.856 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:07.857 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:07.893 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:07.893 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:07.894 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:07.894 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:07.894 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:07.894 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:07.894 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:07.895 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:07.895 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:07.895 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:07.895 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:07.896 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:07.896 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:07.896 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:07.896 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:07.896 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:07.897 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:07.897 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:07.897 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:07.897 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:07.897 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:07.897 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:07.898 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:07.899 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:07.899 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:07.899 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-07-18 13:58:07.900 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
2025-07-18 13:58:07.926 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:58:07.927 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationWorkingTest - Starting AiGeneratedSimulationWorkingTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:58:07.927 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationWorkingTest - The following 1 profile is active: "test"
2025-07-18 13:58:08.422 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Starting...
2025-07-18 13:58:08.423 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-9 - Added connection conn80: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:58:08.423 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Start completed.
2025-07-18 13:58:08.424 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:58:08.771 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:08.771 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:08.771 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:08.771 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:08.771 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:08.771 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:08.771 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:08.772 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:58:08.773 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:58:08.774 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:58:08.775 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:58:08.776 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:58:08.776 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:08.776 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:58:08.777 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:58:08.777 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:58:08.778 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:58:08.778 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:58:08.778 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.getApplicationContext(SpringExtension.java:355) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.resolveParameter(SpringExtension.java:341) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.execution.ParameterResolutionUtils.resolveParameter(ParameterResolutionUtils.java:136) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.ParameterResolutionUtils.resolveParameters(ParameterResolutionUtils.java:103) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.ParameterResolutionUtils.resolveParameters(ParameterResolutionUtils.java:64) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:84) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllMethods$13(ClassBasedTestDescriptor.java:412) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllMethods(ClassBasedTestDescriptor.java:410) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:216) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:85) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 108 common frames omitted
2025-07-18 13:58:08.783 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:58:08.784 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:58:08.785 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:08.785 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:58:08.786 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:58:08.786 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:58:08.787 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:58:08.787 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:58:08.788 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:58:08.788 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:58:08.789 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:58:08.789 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:58:08.789 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:58:08.790 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:58:08.790 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:58:08.791 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:58:08.791 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:58:08.791 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:58:08.792 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:58:08.792 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:58:08.793 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:58:08.793 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:58:08.793 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:58:08.794 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:58:08.794 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:58:08.794 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:58:08.795 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:58:08.795 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:58:08.796 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:58:08.796 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:58:08.796 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:58:08.797 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:58:08.797 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:58:08.797 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:58:08.798 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:58:08.798 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:58:08.799 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:58:09.239 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:58:09.242 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:58:09.363 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationWorkingTest - Started AiGeneratedSimulationWorkingTest in 1.456 seconds (process running for 146.142)
2025-07-18 13:58:09.369 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:58:09.373 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:09.375 [Test worker] DEBUG org.hibernate.SQL - select e1_0.organization_id,e1_0.id,e1_0.avatar,e1_0.department,e1_0.email,e1_0.name,e1_0.password,e1_0.username from users e1_0 where e1_0.organization_id=?
2025-07-18 13:58:09.376 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:09.381 [Test worker] DEBUG org.hibernate.SQL - update organizations set avatar=?,localization=?,name=? where id=?
2025-07-18 13:58:09.387 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:09.388 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:09.389 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:09.392 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where u1_0.id=?
2025-07-18 13:58:09.393 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:09.394 [Test worker] DEBUG org.hibernate.SQL - select e1_0.organization_id,e1_0.id,e1_0.avatar,e1_0.department,e1_0.email,e1_0.name,e1_0.password,e1_0.username from users e1_0 where e1_0.organization_id=?
2025-07-18 13:58:09.395 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:58:09.397 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:58:09.397 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:58:09.399 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:09.400 [Test worker] DEBUG org.hibernate.SQL - select e1_0.organization_id,e1_0.id,e1_0.avatar,e1_0.department,e1_0.email,e1_0.name,e1_0.password,e1_0.username from users e1_0 where e1_0.organization_id=?
2025-07-18 13:58:09.401 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:09.402 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s2_0.skills_id,s2_1.id,s2_1.avatar,s2_1.complexity,s2_1.created_at,s2_1.hearts,s2_1.is_open,s2_1.name,s3_0.id,s3_0.avatar,s3_0.behavior,s3_0.description,s3_0.generation_status,s3_0.is_admin_hidden,s3_0.is_hidden,s3_0.is_protected,s3_0.name,s3_0.simulation_count,s3_0.timestamp,s3_0.type,s2_1.type,s2_0.simulations,s1_0.timestamp,s1_0.type from skills s1_0 left join skills_simulations s2_0 on s1_0.id=s2_0.skills_id left join simulations s2_1 on s2_1.id=s2_0.simulations_key left join skills s3_0 on s3_0.id=s2_1.skill_id where s1_0.id=?
2025-07-18 13:58:09.403 [Test worker] DEBUG org.hibernate.SQL - select m1_0.skill_id,m1_0.id,m1_0.file_content,m1_0.file_name,m1_0.tag from materials m1_0 where m1_0.skill_id=?
2025-07-18 13:58:09.404 [Test worker] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-07-18 13:58:09.404 [Test worker] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "materials" not found; SQL statement:
select m1_0.skill_id,m1_0.id,m1_0.file_content,m1_0.file_name,m1_0.tag from materials m1_0 where m1_0.skill_id=? [42102-224]
2025-07-18 13:58:09.421 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:09.421 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:09.422 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:09.422 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:09.422 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:09.423 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:09.423 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:09.424 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:09.424 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:09.424 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:09.424 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:09.425 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:09.425 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:09.425 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:09.425 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:09.426 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:09.426 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:09.426 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:09.427 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:09.427 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:09.427 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:09.427 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:09.428 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:09.428 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:09.428 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:09.428 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:09.428 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:09.428 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:09.428 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:09.429 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:09.429 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:09.429 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:09.429 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:09.429 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-07-18 13:58:09.430 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-07-18 13:58:09.467 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:58:09.468 [Test worker] INFO  c.b.s.i.DualModeRuntimeIntegrationTest - Starting DualModeRuntimeIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:58:09.468 [Test worker] INFO  c.b.s.i.DualModeRuntimeIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:58:09.873 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Starting...
2025-07-18 13:58:09.874 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-10 - Added connection conn90: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:58:09.874 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Start completed.
2025-07-18 13:58:09.874 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:58:10.177 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:10.177 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:10.177 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:10.178 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:10.179 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:10.180 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:10.180 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:10.180 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:10.180 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:58:10.180 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:58:10.180 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:58:10.181 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:10.181 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:58:10.181 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:58:10.181 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:58:10.181 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:58:10.181 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:58:10.182 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:10.182 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:58:10.182 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:58:10.183 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:58:10.183 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:58:10.184 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:10.184 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:58:10.185 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:58:10.185 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:58:10.186 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:58:10.186 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:58:10.187 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:58:10.191 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:58:10.192 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:58:10.192 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:10.193 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:58:10.193 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:58:10.193 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:58:10.194 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:58:10.194 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:58:10.194 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:58:10.195 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:58:10.195 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:58:10.195 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:58:10.196 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:58:10.196 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:58:10.197 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:58:10.197 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:58:10.198 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:58:10.198 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:58:10.198 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:58:10.199 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:58:10.199 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:58:10.199 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:58:10.200 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:58:10.200 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:58:10.201 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:58:10.201 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:58:10.202 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:58:10.202 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:58:10.202 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:58:10.203 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:58:10.203 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:58:10.204 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:58:10.204 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:58:10.204 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:58:10.205 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:58:10.205 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:58:10.206 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:58:10.378 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:58:10.663 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:58:10.789 [Test worker] INFO  c.b.s.i.DualModeRuntimeIntegrationTest - Started DualModeRuntimeIntegrationTest in 1.343 seconds (process running for 147.568)
2025-07-18 13:58:10.792 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:58:10.854 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:58:10.857 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:10.858 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:10.861 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:10.885 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:58:10.885 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:58:10.894 [Test worker] DEBUG org.hibernate.SQL - INSERT INTO organizations_skills (organization_id, skill_id) VALUES (?, ?) ON CONFLICT DO NOTHING
2025-07-18 13:58:10.895 [Test worker] INFO  c.b.softtrainer.services.FlowService - Associated skill 'Customer Service Excellence' (ID: 1) with organization 'SoftTrainer' (ID: 1) for user 'test-admin'
2025-07-18 13:58:10.895 [Test worker] DEBUG org.hibernate.SQL - select next value for simulations_seq
2025-07-18 13:58:10.898 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:10.900 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:10.902 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:10.903 [Test worker] DEBUG org.hibernate.SQL - insert into simulations (avatar,complexity,created_at,hearts,is_open,name,skill_id,type,id) values (?,?,localtimestamp,?,?,?,?,?,?)
2025-07-18 13:58:10.904 [Test worker] DEBUG org.hibernate.SQL - select s1_0.created_at from simulations s1_0 where s1_0.id=?
2025-07-18 13:58:10.907 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:10.915 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:10.916 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:10.916 [Test worker] INFO  c.b.softtrainer.services.FlowService - Saved 3 new characters
2025-07-18 13:58:10.917 [Test worker] DEBUG org.hibernate.SQL - select next value for hyperparams_seq
2025-07-18 13:58:10.918 [Test worker] DEBUG org.hibernate.SQL - select next value for hyperparams_seq
2025-07-18 13:58:10.920 [Test worker] DEBUG org.hibernate.SQL - select next value for nodes_seq
2025-07-18 13:58:10.927 [Test worker] DEBUG org.hibernate.SQL - select next value for nodes_seq
2025-07-18 13:58:10.931 [Test worker] INFO  c.b.softtrainer.services.FlowService - Successfully uploaded simulation 'E2E Test - Legacy Customer Service Training' for skill 'Customer Service Excellence' with 13 flow nodes
2025-07-18 13:58:10.931 [Test worker] INFO  c.b.s.c.SimulationsController - Successful stored skill null and simulation E2E Test - Legacy Customer Service Training
2025-07-18 13:58:10.985 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:10.985 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:10.986 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:10.986 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:10.986 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:10.992 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:10.993 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,'SingleChoiceTask',?)
2025-07-18 13:58:10.993 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:10.994 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:10.994 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:10.994 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:10.995 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:10.998 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:10.999 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:11.000 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:11.001 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:11.002 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'ResultSimulationNode',?)
2025-07-18 13:58:11.003 [Test worker] DEBUG org.hibernate.SQL - update simulations set avatar=?,complexity=?,hearts=?,is_open=?,name=?,skill_id=?,type=? where id=?
2025-07-18 13:58:11.004 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:11.006 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:11.008 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=? where id=?
2025-07-18 13:58:11.009 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:11.010 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:11.010 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:11.011 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:11.011 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:11.012 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:11.013 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:11.014 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:11.014 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:11.015 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,prompt=? where id=?
2025-07-18 13:58:11.016 [Test worker] DEBUG org.hibernate.SQL - insert into skills_simulations (skills_id,simulations_key,simulations) values (?,?,?)
2025-07-18 13:58:11.017 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.017 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.017 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.017 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.017 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.017 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.018 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.018 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.018 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.018 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.018 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.019 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.019 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:11.025 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:11.025 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:11.027 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:11.041 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:11.044 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:11.046 [Test worker] INFO  c.b.s.services.SkillService - Skill 1 is present 
2025-07-18 13:58:11.049 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,c1_0.simulation_id,s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type,c1_0.timestamp,c1_0.user_id from chats c1_0 join skills s1_0 on s1_0.id=c1_0.skill_id where s1_0.id=? and c1_0.user_id=?
2025-07-18 13:58:11.051 [Test worker] INFO  c.b.s.services.SkillService - For simulation 1 with the order 1 there are 0 chats
2025-07-18 13:58:11.051 [Test worker] INFO  c.b.s.services.SkillService - Simulation 1 is available true
2025-07-18 13:58:11.064 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:11.065 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:11.066 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:11.066 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:58:11.067 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:11.069 [Test worker] DEBUG org.hibernate.SQL - select next value for chats_seq
2025-07-18 13:58:11.069 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 1 for simulation: E2E Test - Legacy Customer Service Training (ID: 1) on thread: Test worker
2025-07-18 13:58:11.069 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: Test worker
2025-07-18 13:58:11.069 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:11.070 [Test worker] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:11.074 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:11.074 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:11.076 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.077 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:58:11.077 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:11.079 [Test worker] DEBUG org.hibernate.SQL - insert into chats (hearts,is_finished,simulation_id,skill_id,timestamp,user_id,id) values (?,?,?,?,localtimestamp,?,?)
2025-07-18 13:58:11.079 [Test worker] DEBUG org.hibernate.SQL - select c1_0.timestamp from chats c1_0 where c1_0.id=?
2025-07-18 13:58:11.079 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.080 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.080 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:58:11.081 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:11.082 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.083 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.083 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:11.085 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.086 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.086 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:11.087 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.088 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:11.089 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.090 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:11.091 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.091 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:11.093 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.093 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.094 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:11.095 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.095 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.096 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:11.097 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.097 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.097 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:11.098 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 0 messages and 7 hyperparameters
2025-07-18 13:58:11.098 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Legacy Customer Service Training with 13 nodes
2025-07-18 13:58:11.099 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 40 legacy indicators, 0 modern indicators
2025-07-18 13:58:11.099 [Test worker] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Legacy Customer Service Training detected as: LEGACY (confidence: 0.8153846153846154)
2025-07-18 13:58:11.099 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing LEGACY simulation: E2E Test - Legacy Customer Service Training
2025-07-18 13:58:11.102 [Test worker] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - 📋 Found 1 compatibility issues for simulation E2E Test - Legacy Customer Service Training
2025-07-18 13:58:11.102 [Test worker] WARN  c.b.s.s.v.SimulationCompatibilityValidator - ⚠️ Simulation E2E Test - Legacy Customer Service Training (ID: 1) has compatibility issues for type LEGACY: Simulation has duplicate order numbers
2025-07-18 13:58:11.102 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:11.102 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏛️ Creating legacy simulation engine
2025-07-18 13:58:11.102 [Test worker] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created LegacySimulationEngine engine for type: LEGACY
2025-07-18 13:58:11.103 [Test worker] DEBUG c.b.s.s.e.LegacySimulationEngine - 🎬 Initializing legacy simulation: E2E Test - Legacy Customer Service Training (ID: 1)
2025-07-18 13:58:11.108 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:11.112 [Test worker] INFO  c.b.s.s.e.LegacySimulationEngine - ✅ Legacy initialization completed with 3 messages in 9ms
2025-07-18 13:58:11.112 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using LEGACY engine
2025-07-18 13:58:11.116 [Test worker] DEBUG org.hibernate.SQL - select hp1_0."key" from hyperparams hp1_0 where hp1_0.simulation_id=?
2025-07-18 13:58:11.117 [Test worker] INFO  c.b.s.controllers.ChatController - User hyper params [empathy, professionalism, problem_solving, communication] initialized for user 1 and simulation 1
2025-07-18 13:58:11.118 [Test worker] DEBUG org.hibernate.SQL - select u1_0.email from users u1_0 where u1_0.id=?
2025-07-18 13:58:11.119 [Test worker] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: test-admin
2025-07-18 13:58:11.119 [Test worker] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: test-admin (bulk insert)
2025-07-18 13:58:11.119 [Test worker] INFO  c.b.s.controllers.ChatController - Chat 1 created for user 1 and simulation 1 using dual-mode runtime
2025-07-18 13:58:11.119 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=1 | message_count=3
2025-07-18 13:58:11.119 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to our E2E customer service training! Today we will test the dual-mode runtime."
2025-07-18 13:58:11.119 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="A customer calls: I am extremely frustrated! My premium order is 5 days late and I have a presentati..."
2025-07-18 13:58:11.119 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=SINGLE_CHOICE_TASK | content=""
2025-07-18 13:58:11.128 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.129 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:58:11.129 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:58:11.130 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:58:11.130 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:58:11.131 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,answer,correct,options,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,'SingleChoiceTaskQuestionMessage',?)
2025-07-18 13:58:11.131 [Test worker] DEBUG org.hibernate.SQL - select sctqm1_0.timestamp from messages sctqm1_0 where sctqm1_0.dtype='SingleChoiceTaskQuestionMessage' and sctqm1_0.id=?
2025-07-18 13:58:11.132 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.132 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.132 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.132 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:11.138 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:11.139 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:11.140 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:11.141 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:58:11.142 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:11.146 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.user_id=? and c1_0.simulation_id=?
2025-07-18 13:58:11.147 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:11.147 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:11.148 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:11.149 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:11.149 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:11.150 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:11.157 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 join organizations o1_0 on o1_0.id=u1_0.organization_id where u1_0.email=?
2025-07-18 13:58:11.159 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id from chats c1_0 where c1_0.id=? and c1_0.user_id=? fetch first ? rows only
2025-07-18 13:58:11.160 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🚀 Starting dual-mode message processing for chat 1 on thread: Test worker
2025-07-18 13:58:11.162 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.DualModeSimulationRuntime - 🔄 Async processing started on thread: ForkJoinPool.commonPool-worker-1 for chat: 1
2025-07-18 13:58:11.162 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:11.162 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:11.165 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:11.166 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:11.167 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:11.169 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-07-18 13:58:11.170 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:11.171 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:11.171 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:11.172 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:11.173 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:11.173 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:11.173 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:11.173 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:11.176 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:11.176 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message d18fdf59-fa5c-4a28-ba1d-74d183180987 to context. Total messages: 1
2025-07-18 13:58:11.176 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message e211224d-77ac-4669-ab55-afa3523f1640 to context. Total messages: 2
2025-07-18 13:58:11.176 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message b5e05619-64ee-4046-a959-567633784bec to context. Total messages: 3
2025-07-18 13:58:11.176 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:11.178 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.179 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:11.180 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.182 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:11.182 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:11.184 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.184 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:11.186 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.186 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:11.188 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.188 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:11.188 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:11.189 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.190 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:11.191 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.191 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:11.192 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.193 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:11.194 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.195 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:11.196 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.196 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:11.196 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 3 messages and 7 hyperparameters
2025-07-18 13:58:11.196 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Legacy Customer Service Training with 13 nodes
2025-07-18 13:58:11.196 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 40 legacy indicators, 0 modern indicators
2025-07-18 13:58:11.196 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Legacy Customer Service Training detected as: LEGACY (confidence: 0.8153846153846154)
2025-07-18 13:58:11.197 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 📊 Detected simulation type: LEGACY for simulation: E2E Test - Legacy Customer Service Training (ID: 1)
2025-07-18 13:58:11.197 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - 📋 Found 1 compatibility issues for simulation E2E Test - Legacy Customer Service Training
2025-07-18 13:58:11.197 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.v.SimulationCompatibilityValidator - ⚠️ Simulation E2E Test - Legacy Customer Service Training (ID: 1) has compatibility issues for type LEGACY: Simulation has duplicate order numbers
2025-07-18 13:58:11.197 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:11.197 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message b5e05619-64ee-4046-a959-567633784bec with legacy engine
2025-07-18 13:58:11.198 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:11.199 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:11.200 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message b5e05619-64ee-4046-a959-567633784bec with message_type SINGLE_CHOICE_TASK in the chat 1
2025-07-18 13:58:11.203 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:11.204 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find first by predicate in flowNodes [Text(text=Excellent! Your immediate acknowledgment and urgency shows true empathy and professionalism.), Text(text=Good effort, but could be more empathetic. The customer needs to feel their urgency is understood.), Text(text=Good empathy, but lacks the urgency this premium customer deserves.), Text(text=Offering solutions immediately is good, but first acknowledge their specific situation.)]
2025-07-18 13:58:11.207 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Found nodes by order number: [10, 20, 30, 40]
2025-07-18 13:58:11.233 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find message by order number: 3
2025-07-18 13:58:11.236 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - update messages set character_id=?,chat_id=?,flow_node_id=?,interacted=?,message_type=?,response_time_limit=?,role=?,user_response_time=?,version=?,answer=?,correct=?,options=? where id=? and version=?
2025-07-18 13:58:11.237 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0 join nodes fn1_0 on fn1_0.id=m1_0.flow_node_id where fn1_0.order_number=? and m1_0.chat_id=?
2025-07-18 13:58:11.238 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Messages [SingleChoiceTaskQuestionMessage(correct=1, options=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately. || Unfortunately, delays can happen. Let me see what I can do. || I understand your frustration. Let me check with shipping. || I can offer you a refund or store credit for the inconvenience., answer=09a4f419-cb00-4aac-a8f0-56bdb021f4fd)] found by order number: 3
2025-07-18 13:58:11.239 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - UUID answer detected, using correct answer index: 1
2025-07-18 13:58:11.240 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Created option with selectedIndex: 1 for answer: 09a4f419-cb00-4aac-a8f0-56bdb021f4fd
2025-07-18 13:58:11.244 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.245 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.e.LegacySimulationEngine - ❌ Legacy engine error processing message b5e05619-64ee-4046-a959-567633784bec: Inner readChatValue function exception
com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:106) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 53 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 74 common frames omitted
2025-07-18 13:58:11.246 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ Error in dual-mode processing for chat 1: Legacy processing failed
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:106) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 10 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 53 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 74 common frames omitted
2025-07-18 13:58:11.247 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 🔄 Attempting legacy fallback for LEGACY simulation
2025-07-18 13:58:11.247 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.DualModeSimulationRuntime - 🚨 Falling back to legacy processing for chat 1 due to error: Legacy processing failed
2025-07-18 13:58:11.247 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:11.247 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:11.247 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:11.248 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message d18fdf59-fa5c-4a28-ba1d-74d183180987 to context. Total messages: 1
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message e211224d-77ac-4669-ab55-afa3523f1640 to context. Total messages: 2
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message b5e05619-64ee-4046-a959-567633784bec to context. Total messages: 3
2025-07-18 13:58:11.249 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:11.250 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.251 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:11.252 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.252 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:11.252 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:11.253 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.253 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:11.254 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.255 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:11.256 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.256 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:11.256 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:11.257 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.258 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:11.259 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.259 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:11.260 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.260 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:11.262 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.262 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:11.264 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.264 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:11.264 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 3 messages and 7 hyperparameters
2025-07-18 13:58:11.264 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message b5e05619-64ee-4046-a959-567633784bec with legacy engine
2025-07-18 13:58:11.265 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:11.266 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:11.267 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message b5e05619-64ee-4046-a959-567633784bec with message_type SINGLE_CHOICE_TASK in the chat 1
2025-07-18 13:58:11.268 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:11.268 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find first by predicate in flowNodes [Text(text=Excellent! Your immediate acknowledgment and urgency shows true empathy and professionalism.), Text(text=Good effort, but could be more empathetic. The customer needs to feel their urgency is understood.), Text(text=Good empathy, but lacks the urgency this premium customer deserves.), Text(text=Offering solutions immediately is good, but first acknowledge their specific situation.)]
2025-07-18 13:58:11.268 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Found nodes by order number: [10, 20, 30, 40]
2025-07-18 13:58:11.271 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find message by order number: 3
2025-07-18 13:58:11.272 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0 join nodes fn1_0 on fn1_0.id=m1_0.flow_node_id where fn1_0.order_number=? and m1_0.chat_id=?
2025-07-18 13:58:11.272 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Messages [SingleChoiceTaskQuestionMessage(correct=1, options=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately. || Unfortunately, delays can happen. Let me see what I can do. || I understand your frustration. Let me check with shipping. || I can offer you a refund or store credit for the inconvenience., answer=09a4f419-cb00-4aac-a8f0-56bdb021f4fd)] found by order number: 3
2025-07-18 13:58:11.272 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - UUID answer detected, using correct answer index: 1
2025-07-18 13:58:11.273 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Created option with selectedIndex: 1 for answer: 09a4f419-cb00-4aac-a8f0-56bdb021f4fd
2025-07-18 13:58:11.274 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:11.275 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.e.LegacySimulationEngine - ❌ Legacy engine error processing message b5e05619-64ee-4046-a959-567633784bec: Inner readChatValue function exception
com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:11.276 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ Legacy fallback failed: Legacy processing failed
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:11.278 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ All processing attempts failed for chat 1
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:11.279 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.controllers.MessageController - ❌ Dual-mode runtime failed completely
java.util.concurrent.CompletionException: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:145) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	... 6 common frames omitted
Caused by: java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	... 7 common frames omitted
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:11.297 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:11.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:11.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:11.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:11.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:11.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:11.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:11.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:11.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:11.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:11.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:11.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:11.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:11.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:11.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:11.302 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:11.302 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:11.302 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:11.302 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:11.303 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:11.303 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:11.303 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:11.303 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:11.303 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:11.303 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:11.304 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:11.304 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:11.304 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:11.304 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:11.304 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:11.304 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:11.304 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:11.305 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:11.305 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown initiated...
2025-07-18 13:58:11.306 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-10 - Shutdown completed.
2025-07-18 13:58:11.330 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:58:11.331 [Test worker] INFO  c.b.s.i.DualModeRuntimeSimpleTest - Starting DualModeRuntimeSimpleTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:58:11.331 [Test worker] INFO  c.b.s.i.DualModeRuntimeSimpleTest - The following 1 profile is active: "test"
2025-07-18 13:58:11.678 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Starting...
2025-07-18 13:58:11.679 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-11 - Added connection conn100: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:58:11.680 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Start completed.
2025-07-18 13:58:11.680 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:58:12.054 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:12.055 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:12.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:12.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:12.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:12.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:12.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:12.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:12.056 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:12.057 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:12.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:12.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:12.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:12.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:12.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:12.058 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:12.058 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:58:12.059 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:58:12.059 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:58:12.059 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:12.059 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:58:12.059 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:58:12.060 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:58:12.060 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:58:12.060 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:58:12.060 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:12.061 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:58:12.061 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:58:12.062 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:58:12.063 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:58:12.063 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:12.064 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:58:12.064 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:58:12.065 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:58:12.065 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:58:12.065 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:58:12.066 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:58:12.071 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:58:12.072 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:58:12.073 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:12.073 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:58:12.073 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:58:12.074 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:58:12.074 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:58:12.075 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:58:12.075 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:58:12.076 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:58:12.077 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:58:12.077 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:58:12.078 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:58:12.078 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:58:12.079 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:58:12.080 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:58:12.081 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:58:12.082 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:58:12.083 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:58:12.084 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:58:12.084 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:58:12.085 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:58:12.085 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:58:12.086 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:58:12.086 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:58:12.087 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:58:12.088 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:58:12.089 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:58:12.089 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:58:12.090 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:58:12.090 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:58:12.091 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:58:12.091 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:58:12.092 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:58:12.092 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:58:12.092 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:58:12.093 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:58:12.306 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:58:12.383 [Test worker] WARN  o.s.c.a.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 13:58:12.383 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:12.384 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:12.385 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:12.385 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:12.385 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:12.386 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:12.386 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:12.386 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:12.386 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:12.387 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:12.387 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:12.387 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:12.388 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:12.388 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:12.388 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:12.388 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:12.389 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:12.391 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:12.392 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:12.392 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:12.392 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:12.392 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:12.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:12.394 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:12.394 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:12.394 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:12.394 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown initiated...
2025-07-18 13:58:12.395 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-11 - Shutdown completed.
2025-07-18 13:58:12.398 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 13:58:12.403 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.backend.softtrainer.integration.DualModeRuntimeSimpleTest@655cb50d]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@41f582ee testClass = com.backend.softtrainer.integration.DualModeRuntimeSimpleTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "spring.main.web-application-type=none"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@4ba1fbb6], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 86 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 13:58:12.410 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.backend.softtrainer.integration.DualModeRuntimeSimpleTest@17388b0a]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@41f582ee testClass = com.backend.softtrainer.integration.DualModeRuntimeSimpleTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "spring.main.web-application-type=none"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@4ba1fbb6], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:58:12.415 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.backend.softtrainer.integration.DualModeRuntimeSimpleTest@5d143931]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@41f582ee testClass = com.backend.softtrainer.integration.DualModeRuntimeSimpleTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "spring.main.web-application-type=none"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@4ba1fbb6], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:58:12.421 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.backend.softtrainer.integration.DualModeRuntimeSimpleTest@5bcf8b09]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@41f582ee testClass = com.backend.softtrainer.integration.DualModeRuntimeSimpleTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "spring.main.web-application-type=none"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@4ba1fbb6], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:58:12.426 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.backend.softtrainer.integration.DualModeRuntimeSimpleTest@1aa43cac]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@41f582ee testClass = com.backend.softtrainer.integration.DualModeRuntimeSimpleTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "spring.main.web-application-type=none"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@4ba1fbb6], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:58:12.432 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.backend.softtrainer.integration.DualModeRuntimeSimpleTest@548f0e9b]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@41f582ee testClass = com.backend.softtrainer.integration.DualModeRuntimeSimpleTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "spring.main.web-application-type=none"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@4ba1fbb6], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:58:12.477 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:58:12.478 [Test worker] INFO  c.b.s.i.LegacySimulationIntegrationTest - Starting LegacySimulationIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:58:12.479 [Test worker] INFO  c.b.s.i.LegacySimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:58:13.117 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Starting...
2025-07-18 13:58:13.118 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-12 - Added connection conn110: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:58:13.118 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Start completed.
2025-07-18 13:58:13.118 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:58:13.488 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:13.488 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:13.489 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:13.490 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:13.490 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:13.490 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:13.491 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:13.491 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:13.491 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:13.491 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:13.492 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:13.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:13.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:13.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:13.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:13.492 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:13.493 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:13.493 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:13.493 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:13.493 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:13.493 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:13.493 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:13.494 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:58:13.494 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:58:13.494 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:58:13.494 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:13.495 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:58:13.495 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:58:13.495 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:58:13.495 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:58:13.495 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:58:13.495 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:13.496 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:58:13.496 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:58:13.497 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:58:13.497 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:58:13.498 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:13.498 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:58:13.499 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:58:13.499 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:58:13.499 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:58:13.500 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:58:13.500 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:58:13.504 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:58:13.506 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:58:13.507 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:13.507 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:58:13.507 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:58:13.508 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:58:13.508 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:58:13.509 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:58:13.509 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:58:13.510 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:58:13.511 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:58:13.512 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:58:13.512 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:58:13.513 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:58:13.514 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:58:13.515 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:58:13.516 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:58:13.517 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:58:13.518 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:58:13.519 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:58:13.519 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:58:13.519 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:58:13.520 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:58:13.520 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:58:13.521 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:58:13.522 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:58:13.522 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:58:13.523 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:58:13.524 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:58:13.524 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:58:13.525 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:58:13.525 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:58:13.526 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:58:13.526 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:58:13.527 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:58:13.528 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:58:13.528 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:58:13.730 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:58:13.976 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:58:14.095 [Test worker] INFO  c.b.s.i.LegacySimulationIntegrationTest - Started LegacySimulationIntegrationTest in 1.65 seconds (process running for 150.875)
2025-07-18 13:58:14.097 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:58:14.122 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:58:14.124 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:14.124 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:14.125 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:14.127 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:58:14.127 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:58:14.128 [Test worker] DEBUG org.hibernate.SQL - INSERT INTO organizations_skills (organization_id, skill_id) VALUES (?, ?) ON CONFLICT DO NOTHING
2025-07-18 13:58:14.128 [Test worker] INFO  c.b.softtrainer.services.FlowService - Associated skill 'Customer Service Excellence' (ID: 1) with organization 'SoftTrainer' (ID: 1) for user 'test-admin'
2025-07-18 13:58:14.129 [Test worker] DEBUG org.hibernate.SQL - select next value for simulations_seq
2025-07-18 13:58:14.130 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:14.131 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:14.133 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:14.133 [Test worker] DEBUG org.hibernate.SQL - insert into simulations (avatar,complexity,created_at,hearts,is_open,name,skill_id,type,id) values (?,?,localtimestamp,?,?,?,?,?,?)
2025-07-18 13:58:14.134 [Test worker] DEBUG org.hibernate.SQL - select s1_0.created_at from simulations s1_0 where s1_0.id=?
2025-07-18 13:58:14.134 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:14.135 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:14.135 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:14.135 [Test worker] INFO  c.b.softtrainer.services.FlowService - Saved 3 new characters
2025-07-18 13:58:14.136 [Test worker] DEBUG org.hibernate.SQL - select next value for hyperparams_seq
2025-07-18 13:58:14.136 [Test worker] DEBUG org.hibernate.SQL - select next value for hyperparams_seq
2025-07-18 13:58:14.137 [Test worker] DEBUG org.hibernate.SQL - select next value for nodes_seq
2025-07-18 13:58:14.137 [Test worker] DEBUG org.hibernate.SQL - select next value for nodes_seq
2025-07-18 13:58:14.139 [Test worker] INFO  c.b.softtrainer.services.FlowService - Successfully uploaded simulation 'E2E Test - Legacy Customer Service Training' for skill 'Customer Service Excellence' with 13 flow nodes
2025-07-18 13:58:14.140 [Test worker] INFO  c.b.s.c.SimulationsController - Successful stored skill null and simulation E2E Test - Legacy Customer Service Training
2025-07-18 13:58:14.144 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:14.144 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:14.144 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:14.144 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:14.145 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:14.145 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:14.145 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,'SingleChoiceTask',?)
2025-07-18 13:58:14.145 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:14.146 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:14.146 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:14.146 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:14.147 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:14.147 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:14.147 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:14.147 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:14.148 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:14.148 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'ResultSimulationNode',?)
2025-07-18 13:58:14.148 [Test worker] DEBUG org.hibernate.SQL - update simulations set avatar=?,complexity=?,hearts=?,is_open=?,name=?,skill_id=?,type=? where id=?
2025-07-18 13:58:14.149 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:14.149 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:14.149 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=? where id=?
2025-07-18 13:58:14.150 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:14.150 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:14.151 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:14.151 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:14.151 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:14.152 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:14.152 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:14.152 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,correct=?,options=?,prompt=? where id=?
2025-07-18 13:58:14.153 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,text=? where id=?
2025-07-18 13:58:14.153 [Test worker] DEBUG org.hibernate.SQL - update nodes set character_id=?,flow_rules=? format json,has_hint=?,message_type=?,order_number=?,previous_order_number=?,response_time_limit=?,show_predicate=?,simulation_id=?,prompt=? where id=?
2025-07-18 13:58:14.154 [Test worker] DEBUG org.hibernate.SQL - insert into skills_simulations (skills_id,simulations_key,simulations) values (?,?,?)
2025-07-18 13:58:14.154 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.154 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.154 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.154 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.155 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.155 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.155 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.155 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.155 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.155 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.155 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.156 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.156 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:14.161 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:14.161 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:14.162 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:14.168 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:14.170 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:14.170 [Test worker] INFO  c.b.s.services.SkillService - Skill 1 is present 
2025-07-18 13:58:14.172 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,c1_0.simulation_id,s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type,c1_0.timestamp,c1_0.user_id from chats c1_0 join skills s1_0 on s1_0.id=c1_0.skill_id where s1_0.id=? and c1_0.user_id=?
2025-07-18 13:58:14.172 [Test worker] INFO  c.b.s.services.SkillService - For simulation 1 with the order 1 there are 0 chats
2025-07-18 13:58:14.172 [Test worker] INFO  c.b.s.services.SkillService - Simulation 1 is available true
2025-07-18 13:58:14.176 [Test worker] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:14.184 [Test worker] DEBUG org.hibernate.SQL - select hp1_0.id,hp1_0.description,hp1_0."key",hp1_0.max_value,hp1_0.simulation_id from hyperparams hp1_0
2025-07-18 13:58:14.194 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:14.195 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:14.196 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:14.196 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:58:14.197 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:14.198 [Test worker] DEBUG org.hibernate.SQL - select next value for chats_seq
2025-07-18 13:58:14.198 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 1 for simulation: E2E Test - Legacy Customer Service Training (ID: 1) on thread: Test worker
2025-07-18 13:58:14.198 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: Test worker
2025-07-18 13:58:14.199 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:14.199 [Test worker] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:14.202 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:14.202 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:14.203 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.204 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:58:14.204 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.205 [Test worker] DEBUG org.hibernate.SQL - insert into chats (hearts,is_finished,simulation_id,skill_id,timestamp,user_id,id) values (?,?,?,?,localtimestamp,?,?)
2025-07-18 13:58:14.206 [Test worker] DEBUG org.hibernate.SQL - select c1_0.timestamp from chats c1_0 where c1_0.id=?
2025-07-18 13:58:14.206 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.207 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.207 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:58:14.207 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.209 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.209 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.210 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.211 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.211 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.212 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.213 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.213 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.214 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.214 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.215 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.216 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:14.217 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.217 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.217 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:14.218 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.219 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.219 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:14.220 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.220 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.221 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:14.221 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 0 messages and 7 hyperparameters
2025-07-18 13:58:14.221 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Legacy Customer Service Training with 13 nodes
2025-07-18 13:58:14.221 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 40 legacy indicators, 0 modern indicators
2025-07-18 13:58:14.221 [Test worker] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Legacy Customer Service Training detected as: LEGACY (confidence: 0.8153846153846154)
2025-07-18 13:58:14.221 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing LEGACY simulation: E2E Test - Legacy Customer Service Training
2025-07-18 13:58:14.221 [Test worker] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - 📋 Found 1 compatibility issues for simulation E2E Test - Legacy Customer Service Training
2025-07-18 13:58:14.221 [Test worker] WARN  c.b.s.s.v.SimulationCompatibilityValidator - ⚠️ Simulation E2E Test - Legacy Customer Service Training (ID: 1) has compatibility issues for type LEGACY: Simulation has duplicate order numbers
2025-07-18 13:58:14.221 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:14.221 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏛️ Creating legacy simulation engine
2025-07-18 13:58:14.221 [Test worker] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created LegacySimulationEngine engine for type: LEGACY
2025-07-18 13:58:14.222 [Test worker] DEBUG c.b.s.s.e.LegacySimulationEngine - 🎬 Initializing legacy simulation: E2E Test - Legacy Customer Service Training (ID: 1)
2025-07-18 13:58:14.223 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:14.225 [Test worker] INFO  c.b.s.s.e.LegacySimulationEngine - ✅ Legacy initialization completed with 3 messages in 3ms
2025-07-18 13:58:14.225 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using LEGACY engine
2025-07-18 13:58:14.227 [Test worker] DEBUG org.hibernate.SQL - select hp1_0."key" from hyperparams hp1_0 where hp1_0.simulation_id=?
2025-07-18 13:58:14.228 [Test worker] INFO  c.b.s.controllers.ChatController - User hyper params [empathy, professionalism, problem_solving, communication] initialized for user 1 and simulation 1
2025-07-18 13:58:14.229 [Test worker] DEBUG org.hibernate.SQL - select u1_0.email from users u1_0 where u1_0.id=?
2025-07-18 13:58:14.229 [Test worker] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: test-admin
2025-07-18 13:58:14.230 [Test worker] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: test-admin (bulk insert)
2025-07-18 13:58:14.230 [Test worker] INFO  c.b.s.controllers.ChatController - Chat 1 created for user 1 and simulation 1 using dual-mode runtime
2025-07-18 13:58:14.230 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=1 | message_count=3
2025-07-18 13:58:14.230 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to our E2E customer service training! Today we will test the dual-mode runtime."
2025-07-18 13:58:14.230 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="A customer calls: I am extremely frustrated! My premium order is 5 days late and I have a presentati..."
2025-07-18 13:58:14.230 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=SINGLE_CHOICE_TASK | content=""
2025-07-18 13:58:14.742 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.742 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:58:14.743 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:58:14.744 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:58:14.744 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:58:14.744 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,answer,correct,options,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,'SingleChoiceTaskQuestionMessage',?)
2025-07-18 13:58:14.745 [Test worker] DEBUG org.hibernate.SQL - select sctqm1_0.timestamp from messages sctqm1_0 where sctqm1_0.dtype='SingleChoiceTaskQuestionMessage' and sctqm1_0.id=?
2025-07-18 13:58:14.746 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.746 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.746 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.747 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:14.747 [Test worker] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0
2025-07-18 13:58:14.750 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=?
2025-07-18 13:58:14.760 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:14.761 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:14.763 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:14.764 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:58:14.765 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:14.768 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.user_id=? and c1_0.simulation_id=?
2025-07-18 13:58:14.769 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.770 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.771 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.771 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.773 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.773 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.786 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 join organizations o1_0 on o1_0.id=u1_0.organization_id where u1_0.email=?
2025-07-18 13:58:14.789 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id from chats c1_0 where c1_0.id=? and c1_0.user_id=? fetch first ? rows only
2025-07-18 13:58:14.789 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🚀 Starting dual-mode message processing for chat 1 on thread: Test worker
2025-07-18 13:58:14.790 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.DualModeSimulationRuntime - 🔄 Async processing started on thread: ForkJoinPool.commonPool-worker-1 for chat: 1
2025-07-18 13:58:14.790 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:14.790 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:14.792 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.793 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.794 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.796 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-07-18 13:58:14.797 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.798 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.798 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.799 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.799 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:14.800 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:14.800 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:14.800 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:14.802 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:14.802 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 50649fb0-a4e1-42c0-b200-1932bb044a26 to context. Total messages: 1
2025-07-18 13:58:14.802 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message a966675a-5418-426a-8f34-3b4d7032199c to context. Total messages: 2
2025-07-18 13:58:14.803 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message dc372721-14af-4216-a4d2-f6a8cb89b635 to context. Total messages: 3
2025-07-18 13:58:14.803 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:14.804 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.805 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.807 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.808 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:14.808 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.809 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.810 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.811 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.811 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.813 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.814 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:14.814 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.815 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.815 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.817 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.817 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:14.819 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.819 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:14.821 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.822 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:14.823 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.823 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 3 messages and 7 hyperparameters
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Legacy Customer Service Training with 13 nodes
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 40 legacy indicators, 0 modern indicators
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Legacy Customer Service Training detected as: LEGACY (confidence: 0.8153846153846154)
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 📊 Detected simulation type: LEGACY for simulation: E2E Test - Legacy Customer Service Training (ID: 1)
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - 📋 Found 1 compatibility issues for simulation E2E Test - Legacy Customer Service Training
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.v.SimulationCompatibilityValidator - ⚠️ Simulation E2E Test - Legacy Customer Service Training (ID: 1) has compatibility issues for type LEGACY: Simulation has duplicate order numbers
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:14.824 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message dc372721-14af-4216-a4d2-f6a8cb89b635 with legacy engine
2025-07-18 13:58:14.826 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.828 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.829 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message dc372721-14af-4216-a4d2-f6a8cb89b635 with message_type SINGLE_CHOICE_TASK in the chat 1
2025-07-18 13:58:14.832 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:14.833 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find first by predicate in flowNodes [Text(text=Excellent! Your immediate acknowledgment and urgency shows true empathy and professionalism.), Text(text=Good effort, but could be more empathetic. The customer needs to feel their urgency is understood.), Text(text=Good empathy, but lacks the urgency this premium customer deserves.), Text(text=Offering solutions immediately is good, but first acknowledge their specific situation.)]
2025-07-18 13:58:14.833 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Found nodes by order number: [10, 20, 30, 40]
2025-07-18 13:58:14.838 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find message by order number: 3
2025-07-18 13:58:14.840 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - update messages set character_id=?,chat_id=?,flow_node_id=?,interacted=?,message_type=?,response_time_limit=?,role=?,user_response_time=?,version=?,answer=?,correct=?,options=? where id=? and version=?
2025-07-18 13:58:14.841 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0 join nodes fn1_0 on fn1_0.id=m1_0.flow_node_id where fn1_0.order_number=? and m1_0.chat_id=?
2025-07-18 13:58:14.842 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Messages [SingleChoiceTaskQuestionMessage(correct=1, options=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately. || Unfortunately, delays can happen. Let me see what I can do. || I understand your frustration. Let me check with shipping. || I can offer you a refund or store credit for the inconvenience., answer=1d5817fe-c132-4e97-a1d7-b3f7c3cb076e)] found by order number: 3
2025-07-18 13:58:14.842 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - UUID answer detected, using correct answer index: 1
2025-07-18 13:58:14.842 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Created option with selectedIndex: 1 for answer: 1d5817fe-c132-4e97-a1d7-b3f7c3cb076e
2025-07-18 13:58:14.844 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.845 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.e.LegacySimulationEngine - ❌ Legacy engine error processing message dc372721-14af-4216-a4d2-f6a8cb89b635: Inner readChatValue function exception
com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:106) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 53 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 74 common frames omitted
2025-07-18 13:58:14.846 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ Error in dual-mode processing for chat 1: Legacy processing failed
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:106) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 10 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 53 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 74 common frames omitted
2025-07-18 13:58:14.847 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 🔄 Attempting legacy fallback for LEGACY simulation
2025-07-18 13:58:14.847 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.DualModeSimulationRuntime - 🚨 Falling back to legacy processing for chat 1 due to error: Legacy processing failed
2025-07-18 13:58:14.847 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:14.847 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:14.847 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:14.848 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 50649fb0-a4e1-42c0-b200-1932bb044a26 to context. Total messages: 1
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message a966675a-5418-426a-8f34-3b4d7032199c to context. Total messages: 2
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message dc372721-14af-4216-a4d2-f6a8cb89b635 to context. Total messages: 3
2025-07-18 13:58:14.849 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:14.850 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.851 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.852 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.852 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:14.852 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.854 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.855 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.856 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.856 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.857 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.858 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:14.858 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.859 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.860 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.862 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.862 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:14.864 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.864 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:14.866 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.866 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:14.867 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.867 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:14.867 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 3 messages and 7 hyperparameters
2025-07-18 13:58:14.868 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message dc372721-14af-4216-a4d2-f6a8cb89b635 with legacy engine
2025-07-18 13:58:14.869 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.871 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.871 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message dc372721-14af-4216-a4d2-f6a8cb89b635 with message_type SINGLE_CHOICE_TASK in the chat 1
2025-07-18 13:58:14.873 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:14.874 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find first by predicate in flowNodes [Text(text=Excellent! Your immediate acknowledgment and urgency shows true empathy and professionalism.), Text(text=Good effort, but could be more empathetic. The customer needs to feel their urgency is understood.), Text(text=Good empathy, but lacks the urgency this premium customer deserves.), Text(text=Offering solutions immediately is good, but first acknowledge their specific situation.)]
2025-07-18 13:58:14.874 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Found nodes by order number: [10, 20, 30, 40]
2025-07-18 13:58:14.878 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find message by order number: 3
2025-07-18 13:58:14.880 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0 join nodes fn1_0 on fn1_0.id=m1_0.flow_node_id where fn1_0.order_number=? and m1_0.chat_id=?
2025-07-18 13:58:14.880 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Messages [SingleChoiceTaskQuestionMessage(correct=1, options=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately. || Unfortunately, delays can happen. Let me see what I can do. || I understand your frustration. Let me check with shipping. || I can offer you a refund or store credit for the inconvenience., answer=1d5817fe-c132-4e97-a1d7-b3f7c3cb076e)] found by order number: 3
2025-07-18 13:58:14.881 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - UUID answer detected, using correct answer index: 1
2025-07-18 13:58:14.881 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Created option with selectedIndex: 1 for answer: 1d5817fe-c132-4e97-a1d7-b3f7c3cb076e
2025-07-18 13:58:14.885 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.886 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.e.LegacySimulationEngine - ❌ Legacy engine error processing message dc372721-14af-4216-a4d2-f6a8cb89b635: Inner readChatValue function exception
com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:14.888 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ Legacy fallback failed: Legacy processing failed
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:14.891 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ All processing attempts failed for chat 1
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:14.894 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.controllers.MessageController - ❌ Dual-mode runtime failed completely
java.util.concurrent.CompletionException: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:145) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	... 6 common frames omitted
Caused by: java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	... 7 common frames omitted
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:14.916 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:14.916 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:14.918 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:14.919 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:58:14.920 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:14.922 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.user_id=? and c1_0.simulation_id=?
2025-07-18 13:58:14.926 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.927 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.929 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.930 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.931 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.932 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.939 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 join organizations o1_0 on o1_0.id=u1_0.organization_id where u1_0.email=?
2025-07-18 13:58:14.941 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id from chats c1_0 where c1_0.id=? and c1_0.user_id=? fetch first ? rows only
2025-07-18 13:58:14.941 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🚀 Starting dual-mode message processing for chat 1 on thread: Test worker
2025-07-18 13:58:14.941 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.DualModeSimulationRuntime - 🔄 Async processing started on thread: ForkJoinPool.commonPool-worker-1 for chat: 1
2025-07-18 13:58:14.942 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:14.942 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:14.943 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.945 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.946 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.948 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-07-18 13:58:14.950 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.951 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.953 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:14.953 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:14.955 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:14.955 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:14.955 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:14.955 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:14.959 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:14.959 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 50649fb0-a4e1-42c0-b200-1932bb044a26 to context. Total messages: 1
2025-07-18 13:58:14.959 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message a966675a-5418-426a-8f34-3b4d7032199c to context. Total messages: 2
2025-07-18 13:58:14.959 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message dc372721-14af-4216-a4d2-f6a8cb89b635 to context. Total messages: 3
2025-07-18 13:58:14.959 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:14.962 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.963 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.965 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.966 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:14.966 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.968 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.969 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.972 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.972 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:14.974 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.974 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:14.975 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:14.977 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.977 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:14.979 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.980 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:14.982 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.983 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:14.985 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.985 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:14.988 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:14.989 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:14.989 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 3 messages and 7 hyperparameters
2025-07-18 13:58:14.989 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Legacy Customer Service Training with 13 nodes
2025-07-18 13:58:14.989 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 40 legacy indicators, 0 modern indicators
2025-07-18 13:58:14.989 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Legacy Customer Service Training detected as: LEGACY (confidence: 0.8153846153846154)
2025-07-18 13:58:14.989 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 📊 Detected simulation type: LEGACY for simulation: E2E Test - Legacy Customer Service Training (ID: 1)
2025-07-18 13:58:14.990 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - 📋 Found 1 compatibility issues for simulation E2E Test - Legacy Customer Service Training
2025-07-18 13:58:14.990 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.v.SimulationCompatibilityValidator - ⚠️ Simulation E2E Test - Legacy Customer Service Training (ID: 1) has compatibility issues for type LEGACY: Simulation has duplicate order numbers
2025-07-18 13:58:14.990 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:14.990 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message dc372721-14af-4216-a4d2-f6a8cb89b635 with legacy engine
2025-07-18 13:58:14.992 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.995 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:14.995 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message dc372721-14af-4216-a4d2-f6a8cb89b635 with message_type SINGLE_CHOICE_TASK in the chat 1
2025-07-18 13:58:14.998 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:14.999 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find first by predicate in flowNodes [Text(text=Excellent! Your immediate acknowledgment and urgency shows true empathy and professionalism.), Text(text=Good effort, but could be more empathetic. The customer needs to feel their urgency is understood.), Text(text=Good empathy, but lacks the urgency this premium customer deserves.), Text(text=Offering solutions immediately is good, but first acknowledge their specific situation.)]
2025-07-18 13:58:14.999 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Found nodes by order number: [10, 20, 30, 40]
2025-07-18 13:58:15.003 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find message by order number: 3
2025-07-18 13:58:15.004 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - update messages set character_id=?,chat_id=?,flow_node_id=?,interacted=?,message_type=?,response_time_limit=?,role=?,user_response_time=?,version=?,answer=?,correct=?,options=? where id=? and version=?
2025-07-18 13:58:15.005 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0 join nodes fn1_0 on fn1_0.id=m1_0.flow_node_id where fn1_0.order_number=? and m1_0.chat_id=?
2025-07-18 13:58:15.006 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Messages [SingleChoiceTaskQuestionMessage(correct=1, options=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately. || Unfortunately, delays can happen. Let me see what I can do. || I understand your frustration. Let me check with shipping. || I can offer you a refund or store credit for the inconvenience., answer=dcdfd7b4-53d5-4902-8638-947baec2ea36)] found by order number: 3
2025-07-18 13:58:15.007 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - UUID answer detected, using correct answer index: 1
2025-07-18 13:58:15.007 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Created option with selectedIndex: 1 for answer: dcdfd7b4-53d5-4902-8638-947baec2ea36
2025-07-18 13:58:15.012 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.013 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.e.LegacySimulationEngine - ❌ Legacy engine error processing message dc372721-14af-4216-a4d2-f6a8cb89b635: Inner readChatValue function exception
com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:106) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 53 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 74 common frames omitted
2025-07-18 13:58:15.015 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ Error in dual-mode processing for chat 1: Legacy processing failed
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:106) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 10 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 53 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 74 common frames omitted
2025-07-18 13:58:15.017 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 🔄 Attempting legacy fallback for LEGACY simulation
2025-07-18 13:58:15.017 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.DualModeSimulationRuntime - 🚨 Falling back to legacy processing for chat 1 due to error: Legacy processing failed
2025-07-18 13:58:15.018 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: LEGACY
2025-07-18 13:58:15.018 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:15.018 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:15.020 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:15.020 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:15.021 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:15.021 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:15.021 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:15.021 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 50649fb0-a4e1-42c0-b200-1932bb044a26 to context. Total messages: 1
2025-07-18 13:58:15.021 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message a966675a-5418-426a-8f34-3b4d7032199c to context. Total messages: 2
2025-07-18 13:58:15.021 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message dc372721-14af-4216-a4d2-f6a8cb89b635 to context. Total messages: 3
2025-07-18 13:58:15.021 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:15.025 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.026 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:15.028 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.028 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:15.028 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:15.030 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.031 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:15.034 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.035 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:15.038 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.039 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:15.039 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:15.041 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.042 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:15.044 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.045 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:15.047 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.048 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:15.050 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.050 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:15.054 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.055 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:15.055 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 3 messages and 7 hyperparameters
2025-07-18 13:58:15.055 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message dc372721-14af-4216-a4d2-f6a8cb89b635 with legacy engine
2025-07-18 13:58:15.057 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:15.060 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:15.061 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message dc372721-14af-4216-a4d2-f6a8cb89b635 with message_type SINGLE_CHOICE_TASK in the chat 1
2025-07-18 13:58:15.064 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:15.064 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find first by predicate in flowNodes [Text(text=Excellent! Your immediate acknowledgment and urgency shows true empathy and professionalism.), Text(text=Good effort, but could be more empathetic. The customer needs to feel their urgency is understood.), Text(text=Good empathy, but lacks the urgency this premium customer deserves.), Text(text=Offering solutions immediately is good, but first acknowledge their specific situation.)]
2025-07-18 13:58:15.065 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Found nodes by order number: [10, 20, 30, 40]
2025-07-18 13:58:15.072 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Trying to find message by order number: 3
2025-07-18 13:58:15.074 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0 join nodes fn1_0 on fn1_0.id=m1_0.flow_node_id where fn1_0.order_number=? and m1_0.chat_id=?
2025-07-18 13:58:15.075 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Messages [SingleChoiceTaskQuestionMessage(correct=1, options=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately. || Unfortunately, delays can happen. Let me see what I can do. || I understand your frustration. Let me check with shipping. || I can offer you a refund or store credit for the inconvenience., answer=dcdfd7b4-53d5-4902-8638-947baec2ea36)] found by order number: 3
2025-07-18 13:58:15.075 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - UUID answer detected, using correct answer index: 1
2025-07-18 13:58:15.075 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - Created option with selectedIndex: 1 for answer: dcdfd7b4-53d5-4902-8638-947baec2ea36
2025-07-18 13:58:15.079 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:15.079 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.e.LegacySimulationEngine - ❌ Legacy engine error processing message dc372721-14af-4216-a4d2-f6a8cb89b635: Inner readChatValue function exception
com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:15.082 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ Legacy fallback failed: Legacy processing failed
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:15.084 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.s.DualModeSimulationRuntime - ❌ All processing attempts failed for chat 1
java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:15.086 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.controllers.MessageController - ❌ Dual-mode runtime failed completely
java.util.concurrent.CompletionException: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
Caused by: java.lang.RuntimeException: Dual-mode processing failed: Legacy processing failed
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:145) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	... 6 common frames omitted
Caused by: java.lang.RuntimeException: Legacy processing failed
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:75) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.fallbackToLegacyProcessing(DualModeSimulationRuntime.java:302) ~[main/:na]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$0(DualModeSimulationRuntime.java:135) ~[main/:na]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.lambda$processUserMessage$1(DualModeSimulationRuntime.java:86) ~[main/:na]
	... 7 common frames omitted
Caused by: com.oruel.scriptforge.InnerFunctionException: Inner readChatValue function exception
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:164) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:38) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingListNode(ScriptForgeScriptEngine.kt:49) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:21) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:28) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:34) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.ScriptForgeScriptEngine.processingCommandNode(ScriptForgeScriptEngine.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.script.ConditionScriptScriptEngine.processingCommandNode(ConditionScriptScriptEngine.kt:12) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.processing(AstEngine.kt:20) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.AstEngine.execute(AstEngine.kt:11) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runCode(Runner.kt:31) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.scriptforge.Runner.runPredicate(Runner.kt:33) ~[ScriptForge-jvm-1.0.jar:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$11(InputMessageService.java:671) ~[main/:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647) ~[na:na]
	at com.backend.softtrainer.services.InputMessageService.findFirstByPredicate(InputMessageService.java:683) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.getNextFlowNode(InputMessageService.java:644) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.figureOutNextMessagesWith(InputMessageService.java:432) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.findOutTheListOfMessagesBasedOnUserActionableMessage(InputMessageService.java:161) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.buildResponse(InputMessageService.java:124) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.InputMessageService$$SpringCGLIB$$0.buildResponse(<generated>) ~[main/:na]
	at com.backend.softtrainer.simulation.engine.LegacySimulationEngine.processUserMessage(LegacySimulationEngine.java:60) ~[main/:na]
	... 11 common frames omitted
Caused by: org.springframework.dao.IncorrectResultSizeDataAccessException: Query did not return a unique result: 2 results were returned
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:301) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220) ~[spring-aop-6.1.4.jar:6.1.4]
	at jdk.proxy3/jdk.proxy3.$Proxy195.findUserHyperParameterByChatIdAndKey(Unknown Source) ~[na:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:50) ~[main/:na]
	at com.backend.softtrainer.services.UserHyperParameterService.getOrCreateUserHyperParameter(UserHyperParameterService.java:78) ~[main/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor77.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.4.jar:6.1.4]
	at com.backend.softtrainer.services.UserHyperParameterService$$SpringCGLIB$$0.getOrCreateUserHyperParameter(<generated>) ~[main/:na]
	at com.backend.softtrainer.services.InputMessageService.lambda$findFirstByPredicate$9(InputMessageService.java:655) ~[main/:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:31) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.function(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.FunctionalType1$DefaultImpls.invoke(FunctionalType.kt:25) ~[ScriptForge-jvm-1.0.jar:na]
	at com.oruel.conditionscript.libs.MessageManagerLib$lib$2.invoke(MessageManagerLib.kt:30) ~[ConditionScript-jvm-1.0.jar:na]
	at com.oruel.scriptforge.engine.EngineKt.executeMultiArgumentFunction(Engine.kt:69) ~[ScriptForge-jvm-1.0.jar:na]
	... 54 common frames omitted
Caused by: org.hibernate.NonUniqueResultException: Query did not return a unique result: 2 results were returned
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueElement(AbstractSelectionQuery.java:586) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:570) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.4.jar:6.1.4]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.1.4.jar:6.1.4]
	... 75 common frames omitted
2025-07-18 13:58:15.102 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:15.103 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:15.104 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:15.104 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:15.105 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:15.106 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:15.106 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:15.106 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:15.107 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:15.107 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:15.107 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:15.137 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:15.137 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:15.138 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:15.143 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:15.144 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:15.145 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:15.145 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:15.145 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:15.145 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:15.145 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:15.146 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:15.146 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:15.146 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:15.146 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:15.146 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:15.146 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:15.146 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:15.147 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:15.147 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:15.147 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:15.147 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:15.147 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:15.147 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown initiated...
2025-07-18 13:58:15.148 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-12 - Shutdown completed.
2025-07-18 13:58:15.179 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 13:58:15.179 [Test worker] INFO  c.b.s.i.ModernSimulationIntegrationTest - Starting ModernSimulationIntegrationTest using Java 17.0.13 with PID 60652 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 13:58:15.180 [Test worker] INFO  c.b.s.i.ModernSimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 13:58:15.702 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Starting...
2025-07-18 13:58:15.703 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-13 - Added connection conn120: url=jdbc:h2:mem:testdb user=SA
2025-07-18 13:58:15.704 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Start completed.
2025-07-18 13:58:15.704 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 13:58:16.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:16.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:16.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:16.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:16.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:16.041 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:16.042 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:16.043 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:16.044 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:16.044 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 13:58:16.044 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 13:58:16.044 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 13:58:16.044 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:16.044 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 13:58:16.044 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 13:58:16.045 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 13:58:16.045 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 13:58:16.045 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 13:58:16.045 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 13:58:16.045 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 13:58:16.045 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 13:58:16.046 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 13:58:16.046 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 13:58:16.046 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:16.047 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 13:58:16.047 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 13:58:16.047 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 13:58:16.048 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 13:58:16.048 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 13:58:16.048 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 13:58:16.052 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 13:58:16.053 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 13:58:16.053 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 13:58:16.054 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 13:58:16.054 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 13:58:16.054 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 13:58:16.055 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 13:58:16.055 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 13:58:16.056 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 13:58:16.056 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 13:58:16.057 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 13:58:16.057 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 13:58:16.058 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 13:58:16.058 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 13:58:16.059 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 13:58:16.060 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 13:58:16.060 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 13:58:16.061 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 13:58:16.061 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 13:58:16.062 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 13:58:16.062 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 13:58:16.063 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 13:58:16.063 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 13:58:16.064 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 13:58:16.064 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 13:58:16.065 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 13:58:16.065 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 13:58:16.066 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 13:58:16.066 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 13:58:16.067 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 13:58:16.067 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 13:58:16.067 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 13:58:16.068 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 13:58:16.069 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 13:58:16.069 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 13:58:16.070 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 13:58:16.070 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 13:58:16.283 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 13:58:16.546 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 13:58:16.729 [Test worker] INFO  c.b.s.i.ModernSimulationIntegrationTest - Started ModernSimulationIntegrationTest in 1.571 seconds (process running for 153.508)
2025-07-18 13:58:16.731 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 13:58:16.770 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 13:58:16.772 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:16.773 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:16.775 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:16.779 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 13:58:16.780 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 13:58:16.781 [Test worker] DEBUG org.hibernate.SQL - INSERT INTO organizations_skills (organization_id, skill_id) VALUES (?, ?) ON CONFLICT DO NOTHING
2025-07-18 13:58:16.782 [Test worker] INFO  c.b.softtrainer.services.FlowService - Associated skill 'Modern Customer Service Excellence' (ID: 1) with organization 'SoftTrainer' (ID: 1) for user 'test-admin'
2025-07-18 13:58:16.782 [Test worker] DEBUG org.hibernate.SQL - select next value for simulations_seq
2025-07-18 13:58:16.785 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:16.787 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:16.789 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.flow_character_id=?
2025-07-18 13:58:16.790 [Test worker] DEBUG org.hibernate.SQL - insert into simulations (avatar,complexity,created_at,hearts,is_open,name,skill_id,type,id) values (?,?,localtimestamp,?,?,?,?,?,?)
2025-07-18 13:58:16.791 [Test worker] DEBUG org.hibernate.SQL - select s1_0.created_at from simulations s1_0 where s1_0.id=?
2025-07-18 13:58:16.791 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:16.793 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:16.794 [Test worker] DEBUG org.hibernate.SQL - insert into characters (avatar,flow_character_id,name,id) values (?,?,?,default)
2025-07-18 13:58:16.795 [Test worker] INFO  c.b.softtrainer.services.FlowService - Saved 3 new characters
2025-07-18 13:58:16.796 [Test worker] DEBUG org.hibernate.SQL - select next value for hyperparams_seq
2025-07-18 13:58:16.797 [Test worker] DEBUG org.hibernate.SQL - select next value for hyperparams_seq
2025-07-18 13:58:16.804 [Test worker] DEBUG org.hibernate.SQL - select next value for nodes_seq
2025-07-18 13:58:16.806 [Test worker] DEBUG org.hibernate.SQL - select next value for nodes_seq
2025-07-18 13:58:16.809 [Test worker] INFO  c.b.softtrainer.services.FlowService - Successfully uploaded simulation 'E2E Test - Modern Customer Service Training' for skill 'Modern Customer Service Excellence' with 5 flow nodes
2025-07-18 13:58:16.809 [Test worker] INFO  c.b.s.c.SimulationsController - Successful stored skill null and simulation E2E Test - Modern Customer Service Training
2025-07-18 13:58:16.815 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:16.815 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:16.816 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:16.816 [Test worker] DEBUG org.hibernate.SQL - insert into hyperparams (description,"key",max_value,simulation_id,id) values (?,?,?,?,?)
2025-07-18 13:58:16.816 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:16.817 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,text,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'Text',?)
2025-07-18 13:58:16.817 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,'SingleChoiceQuestion',?)
2025-07-18 13:58:16.818 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,correct,options,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,?,?,'EnterTextQuestion',?)
2025-07-18 13:58:16.819 [Test worker] DEBUG org.hibernate.SQL - insert into nodes (character_id,flow_rules,has_hint,message_type,order_number,previous_order_number,response_time_limit,show_predicate,simulation_id,prompt,dtype,id) values (?,? format json,?,?,?,?,?,?,?,?,'ResultSimulationNode',?)
2025-07-18 13:58:16.820 [Test worker] DEBUG org.hibernate.SQL - update simulations set avatar=?,complexity=?,hearts=?,is_open=?,name=?,skill_id=?,type=? where id=?
2025-07-18 13:58:16.820 [Test worker] DEBUG org.hibernate.SQL - insert into skills_simulations (skills_id,simulations_key,simulations) values (?,?,?)
2025-07-18 13:58:16.821 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:16.821 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:16.821 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:16.822 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:16.822 [Test worker] DEBUG org.hibernate.SQL - insert into simulations_nodes (simulations_id,nodes_id) values (?,?)
2025-07-18 13:58:17.832 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:17.833 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:17.835 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:17.845 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:17.848 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:17.850 [Test worker] INFO  c.b.s.services.SkillService - Skill 1 is present 
2025-07-18 13:58:17.852 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,c1_0.simulation_id,s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type,c1_0.timestamp,c1_0.user_id from chats c1_0 join skills s1_0 on s1_0.id=c1_0.skill_id where s1_0.id=? and c1_0.user_id=?
2025-07-18 13:58:17.853 [Test worker] INFO  c.b.s.services.SkillService - For simulation 1 with the order 1 there are 0 chats
2025-07-18 13:58:17.853 [Test worker] INFO  c.b.s.services.SkillService - Simulation 1 is available true
2025-07-18 13:58:17.858 [Test worker] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:17.885 [Test worker] DEBUG org.hibernate.SQL - select hp1_0.id,hp1_0.description,hp1_0."key",hp1_0.max_value,hp1_0.simulation_id from hyperparams hp1_0
2025-07-18 13:58:17.903 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:17.904 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:17.906 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:17.907 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:58:17.911 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:17.914 [Test worker] DEBUG org.hibernate.SQL - select next value for chats_seq
2025-07-18 13:58:17.915 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 1 for simulation: E2E Test - Modern Customer Service Training (ID: 1) on thread: Test worker
2025-07-18 13:58:17.915 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: Test worker
2025-07-18 13:58:17.915 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:17.916 [Test worker] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:17.918 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:17.919 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:17.921 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.922 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:58:17.923 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:17.927 [Test worker] DEBUG org.hibernate.SQL - insert into chats (hearts,is_finished,simulation_id,skill_id,timestamp,user_id,id) values (?,?,?,?,localtimestamp,?,?)
2025-07-18 13:58:17.929 [Test worker] DEBUG org.hibernate.SQL - select c1_0.timestamp from chats c1_0 where c1_0.id=?
2025-07-18 13:58:17.929 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:17.930 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.931 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 13:58:17.932 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:17.933 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:17.934 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.934 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:17.936 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:17.936 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.936 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:17.938 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.938 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:17.940 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.940 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:17.941 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.941 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:17.942 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:17.943 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.943 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:17.944 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:17.945 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.945 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:17.946 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:17.947 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:17.947 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:17.947 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 0 messages and 7 hyperparameters
2025-07-18 13:58:17.947 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Modern Customer Service Training with 5 nodes
2025-07-18 13:58:17.951 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 1
2025-07-18 13:58:17.954 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 2
2025-07-18 13:58:17.961 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 3
2025-07-18 13:58:17.964 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 4
2025-07-18 13:58:17.969 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 5
2025-07-18 13:58:17.970 [Test worker] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 15 legacy indicators, 15 modern indicators
2025-07-18 13:58:17.970 [Test worker] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Modern Customer Service Training detected as: HYBRID (confidence: 0.6499999999999999)
2025-07-18 13:58:17.970 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing HYBRID simulation: E2E Test - Modern Customer Service Training
2025-07-18 13:58:17.970 [Test worker] INFO  c.b.s.s.v.SimulationCompatibilityValidator - ℹ️ Hybrid simulation E2E Test - Modern Customer Service Training appears compatible with both formats
2025-07-18 13:58:17.970 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: HYBRID
2025-07-18 13:58:17.970 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🔄 Creating hybrid simulation engine (using legacy for compatibility)
2025-07-18 13:58:17.970 [Test worker] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created LegacySimulationEngine engine for type: HYBRID
2025-07-18 13:58:17.970 [Test worker] DEBUG c.b.s.s.e.LegacySimulationEngine - 🎬 Initializing legacy simulation: E2E Test - Modern Customer Service Training (ID: 1)
2025-07-18 13:58:17.973 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:17.981 [Test worker] INFO  c.b.s.s.e.LegacySimulationEngine - ✅ Legacy initialization completed with 3 messages in 11ms
2025-07-18 13:58:17.981 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using HYBRID engine
2025-07-18 13:58:17.985 [Test worker] DEBUG org.hibernate.SQL - select hp1_0."key" from hyperparams hp1_0 where hp1_0.simulation_id=?
2025-07-18 13:58:17.987 [Test worker] INFO  c.b.s.controllers.ChatController - User hyper params [empathy, professionalism, problem_solving, communication] initialized for user 1 and simulation 1
2025-07-18 13:58:17.989 [Test worker] DEBUG org.hibernate.SQL - select u1_0.email from users u1_0 where u1_0.id=?
2025-07-18 13:58:17.990 [Test worker] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: test-admin
2025-07-18 13:58:17.990 [Test worker] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: test-admin (bulk insert)
2025-07-18 13:58:17.990 [Test worker] INFO  c.b.s.controllers.ChatController - Chat 1 created for user 1 and simulation 1 using dual-mode runtime
2025-07-18 13:58:17.990 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=1 | message_count=3
2025-07-18 13:58:17.990 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to our E2E modern customer service training! Today we will test the modern runtime."
2025-07-18 13:58:17.990 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="A customer calls: I am extremely frustrated! My premium order is 5 days late and I have a presentati..."
2025-07-18 13:58:17.995 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=SINGLE_CHOICE_QUESTION | content="null" | options=[MessageAnswerOptionDto(optionId=d1856e1c-e4d8-43a4-9bcc-ca3a09f9e7ba, text=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately., isSelected=false), MessageAnswerOptionDto(optionId=470cefb3-145c-4193-bf85-9f44373e2cfd, text=Unfortunately, delays can happen. Let me see what I can do., isSelected=false), MessageAnswerOptionDto(optionId=1d13c24f-66ac-478e-a3e5-fba7300bda5d, text=I understand your frustration. Let me check with shipping., isSelected=false), MessageAnswerOptionDto(optionId=1452550e-163e-452b-8091-65011662f90c, text=I can offer you a refund or store credit for the inconvenience., isSelected=false)]
2025-07-18 13:58:18.014 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:18.015 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:58:18.016 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:58:18.017 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 13:58:18.018 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 13:58:18.018 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,answer,correct,options,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,'SingleChoiceQuestionMessage',?)
2025-07-18 13:58:18.020 [Test worker] DEBUG org.hibernate.SQL - select scqm1_0.timestamp from messages scqm1_0 where scqm1_0.dtype='SingleChoiceQuestionMessage' and scqm1_0.id=?
2025-07-18 13:58:18.021 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:18.021 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:18.022 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:18.022 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 13:58:18.023 [Test worker] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0
2025-07-18 13:58:18.029 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=?
2025-07-18 13:58:18.042 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 13:58:18.043 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 13:58:18.044 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 13:58:18.045 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 13:58:18.047 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 13:58:18.052 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.user_id=? and c1_0.simulation_id=?
2025-07-18 13:58:18.054 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.056 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.058 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.058 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.060 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.061 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.073 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 join organizations o1_0 on o1_0.id=u1_0.organization_id where u1_0.email=?
2025-07-18 13:58:18.075 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id from chats c1_0 where c1_0.id=? and c1_0.user_id=? fetch first ? rows only
2025-07-18 13:58:18.076 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🚀 Starting dual-mode message processing for chat 1 on thread: Test worker
2025-07-18 13:58:18.076 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.DualModeSimulationRuntime - 🔄 Async processing started on thread: ForkJoinPool.commonPool-worker-1 for chat: 1
2025-07-18 13:58:18.076 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:18.076 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:18.080 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:18.081 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.082 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.085 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-07-18 13:58:18.087 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.087 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.088 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.089 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.091 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:18.091 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:18.091 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:18.092 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:18.094 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:18.094 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 8bfa546f-426a-41b3-84b1-5583a3608dec to context. Total messages: 1
2025-07-18 13:58:18.094 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 24f747b9-5d41-46e5-9246-ae3ddadff3fd to context. Total messages: 2
2025-07-18 13:58:18.094 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 30959dd4-c867-4cd9-a849-224688cea601 to context. Total messages: 3
2025-07-18 13:58:18.094 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:18.096 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.096 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:18.098 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.099 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:18.099 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:18.100 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.100 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:18.101 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.102 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:18.103 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.103 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:18.103 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:18.105 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.105 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:18.107 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.107 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:18.108 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.109 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:18.110 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.111 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:18.112 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.113 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:18.113 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 3 messages and 7 hyperparameters
2025-07-18 13:58:18.113 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Modern Customer Service Training with 5 nodes
2025-07-18 13:58:18.116 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 1
2025-07-18 13:58:18.119 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 2
2025-07-18 13:58:18.121 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 3
2025-07-18 13:58:18.125 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 4
2025-07-18 13:58:18.129 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 5
2025-07-18 13:58:18.129 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 15 legacy indicators, 15 modern indicators
2025-07-18 13:58:18.129 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Modern Customer Service Training detected as: HYBRID (confidence: 0.6499999999999999)
2025-07-18 13:58:18.129 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 📊 Detected simulation type: HYBRID for simulation: E2E Test - Modern Customer Service Training (ID: 1)
2025-07-18 13:58:18.129 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.v.SimulationCompatibilityValidator - ℹ️ Hybrid simulation E2E Test - Modern Customer Service Training appears compatible with both formats
2025-07-18 13:58:18.129 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: HYBRID
2025-07-18 13:58:18.129 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message 30959dd4-c867-4cd9-a849-224688cea601 with legacy engine
2025-07-18 13:58:18.131 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:18.134 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:18.135 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message 30959dd4-c867-4cd9-a849-224688cea601 with message_type SINGLE_CHOICE_QUESTION in the chat 1
2025-07-18 13:58:18.137 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:18.139 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:18.140 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is no hint message after that node 3 and simulation 1
2025-07-18 13:58:18.140 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - ✅ Legacy processing completed for message 30959dd4-c867-4cd9-a849-224688cea601 in 11ms
2025-07-18 13:58:18.140 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully processed message with HYBRID engine
2025-07-18 13:58:18.141 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,answer,content,correct,open_answer,options,selected,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,? format json,'EnterTextQuestionMessage',?)
2025-07-18 13:58:18.141 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select etqm1_0.timestamp from messages etqm1_0 where etqm1_0.dtype='EnterTextQuestionMessage' and etqm1_0.id=?
2025-07-18 13:58:18.142 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - update messages set character_id=?,chat_id=?,flow_node_id=?,interacted=?,message_type=?,response_time_limit=?,role=?,user_response_time=?,version=?,answer=?,correct=?,options=? where id=? and version=?
2025-07-18 13:58:18.144 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,s4_0.id,s4_0.avatar,s4_0.behavior,s4_0.description,s4_0.generation_status,s4_0.is_admin_hidden,s4_0.is_hidden,s4_0.is_protected,s4_0.name,s4_0.simulation_count,s5_0.skills_id,s5_1.id,s5_1.avatar,s5_1.complexity,s5_1.created_at,s5_1.hearts,s5_1.is_open,s5_1.name,s6_0.id,s6_0.avatar,s6_0.behavior,s6_0.description,s6_0.generation_status,s6_0.is_admin_hidden,s6_0.is_hidden,s6_0.is_protected,s6_0.name,s6_0.simulation_count,s6_0.timestamp,s6_0.type,s5_1.type,s5_0.simulations,s4_0.timestamp,s4_0.type,c1_0.timestamp,u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s7_0.skills_id,s7_1.id,s7_1.avatar,s7_1.complexity,s7_1.created_at,s7_1.hearts,s7_1.is_open,s7_1.name,s8_0.id,s8_0.avatar,s8_0.behavior,s8_0.description,s8_0.generation_status,s8_0.is_admin_hidden,s8_0.is_hidden,s8_0.is_protected,s8_0.name,s8_0.simulation_count,s8_0.timestamp,s8_0.type,s7_1.type,s7_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from chats c1_0 left join simulations s1_0 on s1_0.id=c1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key left join skills s4_0 on s4_0.id=c1_0.skill_id left join skills_simulations s5_0 on s4_0.id=s5_0.skills_id left join simulations s5_1 on s5_1.id=s5_0.simulations_key left join skills s6_0 on s6_0.id=s5_1.skill_id left join users u1_0 on u1_0.id=c1_0.user_id left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s7_0 on as1_1.id=s7_0.skills_id left join simulations s7_1 on s7_1.id=s7_0.simulations_key left join skills s8_0 on s8_0.id=s7_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where c1_0.id=?
2025-07-18 13:58:18.146 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] SEND_MESSAGE | chat_id=1 | message_count=2
2025-07-18 13:58:18.146 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] msg_1=send_message | message_type=TEXT | content="33aae0b4-091b-4b52-ad82-67ae38decb62" | options=[MessageAnswerOptionDto(optionId=9f166dbb-f311-4a71-9e06-5734c3b252b9, text=I sincerely apologize for this unacceptable delay. Let me prioritize resolving this immediately., isSelected=false), MessageAnswerOptionDto(optionId=f42eba1e-2131-4130-809c-bf92337aae4a, text=Unfortunately, delays can happen. Let me see what I can do., isSelected=false), MessageAnswerOptionDto(optionId=90e2cebe-4463-4e09-a4d4-24207e469e2f, text=I understand your frustration. Let me check with shipping., isSelected=false), MessageAnswerOptionDto(optionId=cd918d73-d257-4897-a66b-7591d334df84, text=I can offer you a refund or store credit for the inconvenience., isSelected=false)]
2025-07-18 13:58:18.147 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] msg_2=send_message | message_type=ENTER_TEXT_QUESTION | content="null"
2025-07-18 13:58:18.152 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.153 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=?
2025-07-18 13:58:18.156 [Test worker] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0
2025-07-18 13:58:18.157 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.162 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,u1_0.username from users u1_0 join organizations o1_0 on o1_0.id=u1_0.organization_id where u1_0.email=?
2025-07-18 13:58:18.163 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id from chats c1_0 where c1_0.id=? and c1_0.user_id=? fetch first ? rows only
2025-07-18 13:58:18.164 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🚀 Starting dual-mode message processing for chat 1 on thread: Test worker
2025-07-18 13:58:18.164 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.DualModeSimulationRuntime - 🔄 Async processing started on thread: ForkJoinPool.commonPool-worker-1 for chat: 1
2025-07-18 13:58:18.164 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔄 Building simulation context from message request for chat: 1
2025-07-18 13:58:18.164 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🔍 Attempting to load chat 1 (attempt 1/3)
2025-07-18 13:58:18.165 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:18.166 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.166 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.168 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-07-18 13:58:18.169 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.170 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.171 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name from characters c1_0 where c1_0.id=?
2025-07-18 13:58:18.172 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.174 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.175 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Chat 1 loaded successfully on attempt 1
2025-07-18 13:58:18.176 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: ForkJoinPool.commonPool-worker-1
2025-07-18 13:58:18.176 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 13:58:18.176 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:18.178 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📜 Detected legacy nodes, using PREDEFINED mode
2025-07-18 13:58:18.179 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 8bfa546f-426a-41b3-84b1-5583a3608dec to context. Total messages: 1
2025-07-18 13:58:18.179 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 24f747b9-5d41-46e5-9246-ae3ddadff3fd to context. Total messages: 2
2025-07-18 13:58:18.179 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 30959dd4-c867-4cd9-a849-224688cea601 to context. Total messages: 3
2025-07-18 13:58:18.179 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message 72fad71d-a2d7-43a4-96ed-6ea863ee2f42 to context. Total messages: 4
2025-07-18 13:58:18.179 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 13:58:18.180 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.181 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:18.183 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.184 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:18.184 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:18.186 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.187 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:18.191 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.191 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 13:58:18.193 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.194 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.c.SimulationContextBuilder - ⚠️ Could not load hyperparameter empathy: Query did not return a unique result: 2 results were returned
2025-07-18 13:58:18.194 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 13:58:18.196 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.196 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 13:58:18.197 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.198 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 13:58:18.199 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.199 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 13:58:18.200 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.201 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 13:58:18.202 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 13:58:18.202 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 13:58:18.202 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 4 messages and 7 hyperparameters
2025-07-18 13:58:18.202 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🔍 Analyzing simulation: E2E Test - Modern Customer Service Training with 5 nodes
2025-07-18 13:58:18.205 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 1
2025-07-18 13:58:18.208 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 2
2025-07-18 13:58:18.211 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 3
2025-07-18 13:58:18.213 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 4
2025-07-18 13:58:18.216 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 🚀 Found modern rule structure in node: 5
2025-07-18 13:58:18.216 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.d.SimulationTypeDetector - 📈 Analysis complete: 15 legacy indicators, 15 modern indicators
2025-07-18 13:58:18.216 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.d.SimulationTypeDetector - 📊 Simulation E2E Test - Modern Customer Service Training detected as: HYBRID (confidence: 0.6499999999999999)
2025-07-18 13:58:18.216 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 📊 Detected simulation type: HYBRID for simulation: E2E Test - Modern Customer Service Training (ID: 1)
2025-07-18 13:58:18.216 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.v.SimulationCompatibilityValidator - ℹ️ Hybrid simulation E2E Test - Modern Customer Service Training appears compatible with both formats
2025-07-18 13:58:18.216 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: HYBRID
2025-07-18 13:58:18.216 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - 🏛️ Processing user message 72fad71d-a2d7-43a4-96ed-6ea863ee2f42 with legacy engine
2025-07-18 13:58:18.217 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:18.220 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,m1_0.chat_id,m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables,c1_0.simulation_id,c1_0.skill_id,c1_0.timestamp,c1_0.user_id from chats c1_0 join messages m1_0 on c1_0.id=m1_0.chat_id where c1_0.id=?
2025-07-18 13:58:18.221 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is input message 72fad71d-a2d7-43a4-96ed-6ea863ee2f42 with message_type ENTER_TEXT_QUESTION in the chat 1
2025-07-18 13:58:18.222 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:18.224 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:18.224 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - No flow nodes found for chatId: 1 and previousOrderNumber: 70
2025-07-18 13:58:18.238 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - update chats set is_finished=? where id=?
2025-07-18 13:58:18.240 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - The chat with id 1 is finished
2025-07-18 13:58:18.241 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,fn1_0.character_id,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,fn1_0.simulation_id,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 where fn1_0.simulation_id=? and fn1_0.previous_order_number=? order by fn1_0.order_number fetch first 10 rows only
2025-07-18 13:58:18.242 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.InputMessageService - There is no hint message after that node 50 and simulation 1
2025-07-18 13:58:18.242 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.LegacySimulationEngine - ✅ Legacy processing completed for message 72fad71d-a2d7-43a4-96ed-6ea863ee2f42 in 26ms
2025-07-18 13:58:18.242 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully processed message with HYBRID engine
2025-07-18 13:58:18.243 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,prompt_id,title,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,'LastSimulationMessage',?)
2025-07-18 13:58:18.244 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select lsm1_0.timestamp from messages lsm1_0 where lsm1_0.dtype='LastSimulationMessage' and lsm1_0.id=?
2025-07-18 13:58:18.245 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - update messages set character_id=?,chat_id=?,flow_node_id=?,interacted=?,message_type=?,response_time_limit=?,role=?,user_response_time=?,version=?,answer=?,content=?,correct=?,open_answer=?,options=?,selected=? format json where id=? and version=?
2025-07-18 13:58:18.246 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.UserMessageService - Last simulation message content []
2025-07-18 13:58:18.247 [ForkJoinPool.commonPool-worker-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,s4_0.id,s4_0.avatar,s4_0.behavior,s4_0.description,s4_0.generation_status,s4_0.is_admin_hidden,s4_0.is_hidden,s4_0.is_protected,s4_0.name,s4_0.simulation_count,s5_0.skills_id,s5_1.id,s5_1.avatar,s5_1.complexity,s5_1.created_at,s5_1.hearts,s5_1.is_open,s5_1.name,s6_0.id,s6_0.avatar,s6_0.behavior,s6_0.description,s6_0.generation_status,s6_0.is_admin_hidden,s6_0.is_hidden,s6_0.is_protected,s6_0.name,s6_0.simulation_count,s6_0.timestamp,s6_0.type,s5_1.type,s5_0.simulations,s4_0.timestamp,s4_0.type,c1_0.timestamp,u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s7_0.skills_id,s7_1.id,s7_1.avatar,s7_1.complexity,s7_1.created_at,s7_1.hearts,s7_1.is_open,s7_1.name,s8_0.id,s8_0.avatar,s8_0.behavior,s8_0.description,s8_0.generation_status,s8_0.is_admin_hidden,s8_0.is_hidden,s8_0.is_protected,s8_0.name,s8_0.simulation_count,s8_0.timestamp,s8_0.type,s7_1.type,s7_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from chats c1_0 left join simulations s1_0 on s1_0.id=c1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key left join skills s4_0 on s4_0.id=c1_0.skill_id left join skills_simulations s5_0 on s4_0.id=s5_0.skills_id left join simulations s5_1 on s5_1.id=s5_0.simulations_key left join skills s6_0 on s6_0.id=s5_1.skill_id left join users u1_0 on u1_0.id=c1_0.user_id left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s7_0 on as1_1.id=s7_0.skills_id left join simulations s7_1 on s7_1.id=s7_0.simulations_key left join skills s8_0 on s8_0.id=s7_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where c1_0.id=?
2025-07-18 13:58:18.249 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] SEND_MESSAGE | chat_id=1 | message_count=2
2025-07-18 13:58:18.249 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] msg_1=send_message | message_type=TEXT | content="I would immediately escalate this to our logistics team, contact the customer directly with a sincer..."
2025-07-18 13:58:18.249 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] msg_2=send_message | message_type=RESULT_SIMULATION | content=""
2025-07-18 13:58:18.256 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=?
2025-07-18 13:58:18.258 [Test worker] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0
2025-07-18 13:58:18.259 [Test worker] DEBUG org.hibernate.SQL - select fn1_0.id,fn1_0.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,fn1_0.flow_rules,fn1_0.has_hint,fn1_0.message_type,fn1_0.order_number,fn1_0.previous_order_number,fn1_0.response_time_limit,fn1_0.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,fn1_0.preview,fn1_0.url,fn1_0.correct,fn1_0.options,fn1_0.prompt,fn1_0.text from nodes fn1_0 left join characters c1_0 on c1_0.id=fn1_0.character_id left join simulations s1_0 on s1_0.id=fn1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where fn1_0.id=?
2025-07-18 13:58:18.265 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type from simulations s1_0 left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where s1_0.id=?
2025-07-18 13:58:18.266 [Test worker] DEBUG org.hibernate.SQL - select n1_0.simulations_id,n1_1.id,n1_1.dtype,c1_0.id,c1_0.avatar,c1_0.flow_character_id,c1_0.name,n1_1.flow_rules,n1_1.has_hint,n1_1.message_type,n1_1.order_number,n1_1.previous_order_number,n1_1.response_time_limit,n1_1.show_predicate,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_0.type,n1_1.preview,n1_1.url,n1_1.correct,n1_1.options,n1_1.prompt,n1_1.text from simulations_nodes n1_0 join nodes n1_1 on n1_1.id=n1_0.nodes_id left join characters c1_0 on c1_0.id=n1_1.character_id left join simulations s1_0 on s1_0.id=n1_1.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id where n1_0.simulations_id=?
2025-07-18 13:58:18.280 [Test worker] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.hearts,c1_0.is_finished,s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type,s4_0.id,s4_0.avatar,s4_0.behavior,s4_0.description,s4_0.generation_status,s4_0.is_admin_hidden,s4_0.is_hidden,s4_0.is_protected,s4_0.name,s4_0.simulation_count,s5_0.skills_id,s5_1.id,s5_1.avatar,s5_1.complexity,s5_1.created_at,s5_1.hearts,s5_1.is_open,s5_1.name,s6_0.id,s6_0.avatar,s6_0.behavior,s6_0.description,s6_0.generation_status,s6_0.is_admin_hidden,s6_0.is_hidden,s6_0.is_protected,s6_0.name,s6_0.simulation_count,s6_0.timestamp,s6_0.type,s5_1.type,s5_0.simulations,s4_0.timestamp,s4_0.type,c1_0.timestamp,u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s7_0.skills_id,s7_1.id,s7_1.avatar,s7_1.complexity,s7_1.created_at,s7_1.hearts,s7_1.is_open,s7_1.name,s8_0.id,s8_0.avatar,s8_0.behavior,s8_0.description,s8_0.generation_status,s8_0.is_admin_hidden,s8_0.is_hidden,s8_0.is_protected,s8_0.name,s8_0.simulation_count,s8_0.timestamp,s8_0.type,s7_1.type,s7_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from chats c1_0 left join simulations s1_0 on s1_0.id=c1_0.simulation_id left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key left join skills s4_0 on s4_0.id=c1_0.skill_id left join skills_simulations s5_0 on s4_0.id=s5_0.skills_id left join simulations s5_1 on s5_1.id=s5_0.simulations_key left join skills s6_0 on s6_0.id=s5_1.skill_id left join users u1_0 on u1_0.id=c1_0.user_id left join organizations o1_0 on o1_0.id=u1_0.organization_id left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s7_0 on as1_1.id=s7_0.skills_id left join simulations s7_1 on s7_1.id=s7_0.simulations_key left join skills s8_0 on s8_0.id=s7_1.skill_id left join user_roles r1_0 on u1_0.id=r1_0.user_id left join roles r1_1 on r1_1.id=r1_0.role_id where c1_0.id=?
2025-07-18 13:58:18.284 [Test worker] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.dtype,m1_0.character_id,m1_0.chat_id,m1_0.flow_node_id,m1_0.interacted,m1_0.message_type,m1_0.response_time_limit,m1_0.role,m1_0.timestamp,m1_0.user_response_time,m1_0.version,m1_0.ai_generation_params,m1_0.ai_prompt_template,m1_0.cache_duration_minutes,m1_0.content_template,m1_0.context_requirements,m1_0.difficulty_level,m1_0.enable_ai_generation,m1_0.fallback_content,m1_0.include_emoji,m1_0.include_examples,m1_0.learning_objective,m1_0.max_length,m1_0.min_length,m1_0.personalization_rules,m1_0.regenerate_threshold,m1_0.text_format,m1_0.tone_style,m1_0.content,m1_0.preview,m1_0.allow_multiple,m1_0.conditional_options,m1_0.display_rules,m1_0.enable_hints,m1_0.enable_other_option,m1_0.hint_delay_seconds,m1_0.layout_type,m1_0.max_selections,m1_0.min_selections,m1_0.option_style,m1_0.options,m1_0.other_option_text,m1_0.question_text,m1_0.randomize_options,m1_0.show_progress,m1_0.time_limit_seconds,m1_0.validation_rules,m1_0.accessibility_features,m1_0.alt_text,m1_0.annotation_enabled,m1_0.auto_play,m1_0.caption,m1_0.compression_level,m1_0.controls_visible,m1_0.download_allowed,m1_0.duration_seconds,m1_0.enable_lazy_loading,m1_0.enable_progressive_loading,m1_0.file_size_bytes,m1_0.fullscreen_enabled,m1_0.height_pixels,m1_0.interactive_elements,m1_0.loop_playback,m1_0.media_metadata,m1_0.media_type,m1_0.media_url,m1_0.mobile_optimized,m1_0.quality_adaptive,m1_0.streaming_protocol,m1_0.thumbnail_url,m1_0.width_pixels,m1_0.zoom_enabled,m1_0.answer,m1_0.correct,m1_0.open_answer,m1_0.selected,m1_0.based_message_id,m1_0.title,m1_0.accessibility_mode,m1_0.allow_retry,m1_0.auto_submit,m1_0.element_configuration,m1_0.feedback_mode,m1_0.hint_threshold,m1_0.instructions,m1_0.interaction_type,m1_0.max_attempts,m1_0.scoring_criteria,m1_0.prompt_id,m1_0.is_voted,m1_0.animation_type,m1_0.css_classes,m1_0.delay_seconds,m1_0.enable_interactive_elements,m1_0.enable_variable_substitution,m1_0.format_options,m1_0.variables from messages m1_0
2025-07-18 13:58:18.288 [Test worker] DEBUG org.hibernate.SQL - select hp1_0.id,hp1_0.description,hp1_0."key",hp1_0.max_value,hp1_0.simulation_id from hyperparams hp1_0
2025-07-18 13:58:18.291 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=?
2025-07-18 13:58:18.298 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 13:58:18.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 13:58:18.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 13:58:18.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 13:58:18.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 13:58:18.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 13:58:18.299 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 13:58:18.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 13:58:18.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 13:58:18.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 13:58:18.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 13:58:18.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 13:58:18.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 13:58:18.300 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 13:58:18.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 13:58:18.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 13:58:18.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 13:58:18.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 13:58:18.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 13:58:18.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 13:58:18.301 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 13:58:18.302 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 13:58:18.303 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-07-18 13:58:18.303 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
2025-07-18 13:58:18.342 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.services.SecurityTests@29fa3666]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@8aaaa68 testClass = com.backend.softtrainer.services.SecurityTests, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@22db8f4, [ImportsContextCustomizer@4615b3e3 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29caf222, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3caa4757, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@28c0b664, org.springframework.boot.test.context.SpringBootTestAnnotation@5974c55a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 13:58:18.349 [Test worker] WARN  c.b.s.s.v.AiAgentResponseValidator - ❌ AI response validation failed: Message[0]: content is required
2025-07-18 13:58:18.350 [Test worker] WARN  c.b.s.s.v.AiAgentResponseValidator - ❌ AI response validation failed: Message[0]: content is required, Response appears to be empty or invalid (no meaningful content or actionable elements)
2025-07-18 13:58:18.929 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1
2025-07-18 13:58:18.932 [ForkJoinPool.commonPool-worker-1] ERROR c.b.s.simulation.FlowExecutor - ❌ Error initializing simulation
java.lang.NullPointerException: Cannot invoke "com.backend.softtrainer.simulation.context.SimulationContext.getChatId()" because "context" is null
	at com.backend.softtrainer.simulation.FlowExecutor.initializeSimulation(FlowExecutor.java:121) ~[main/:na]
	at com.backend.softtrainer.simulation.FlowExecutor.lambda$initializeSimulation$3(FlowExecutor.java:307) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
2025-07-18 13:58:18.943 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎯 Processing user input for message: test-message-1752836298942
2025-07-18 13:58:18.948 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.simulation.FlowExecutor - 🎯 Processing user input for chat: 1, simulation mode: PREDEFINED
2025-07-18 13:58:18.949 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message test-message-1752836298942 to context. Total messages: 1
2025-07-18 13:58:18.949 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.simulation.FlowExecutor - 🔍 Resolved 1 candidate nodes
2025-07-18 13:58:18.950 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.simulation.FlowExecutor - ✅ Generated and saved 1 messages
2025-07-18 13:58:18.950 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.simulation.FlowExecutor - 🏁 Simulation completed for chat: 1
2025-07-18 13:58:18.950 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.context.SimulationContext - 🏁 Simulation 1 marked as completed
2025-07-18 13:58:18.955 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.956 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:18.956 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 0 messages
2025-07-18 13:58:18.960 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.960 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.960 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.960 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.960 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.960 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:18.960 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:18.960 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 0 messages
2025-07-18 13:58:18.961 [ForkJoinPool.commonPool-worker-3] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:18.961 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 0 messages
2025-07-18 13:58:18.961 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:18.961 [ForkJoinPool.commonPool-worker-3] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 0 messages
2025-07-18 13:58:18.961 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:18.961 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 0 messages
2025-07-18 13:58:18.961 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 0 messages
2025-07-18 13:58:18.966 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.967 [ForkJoinPool.commonPool-worker-4] ERROR c.b.s.simulation.FlowExecutor - ❌ Error initializing simulation for chat: 1
java.lang.RuntimeException: Test Exception
	at com.backend.softtrainer.simulation.flow.NodeCollector.getInitialNodes(NodeCollector.java:27) ~[main/:na]
	at com.backend.softtrainer.simulation.FlowExecutor.lambda$initializeSimulation$1(FlowExecutor.java:126) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
2025-07-18 13:58:18.967 [ForkJoinPool.commonPool-worker-4] WARN  c.b.s.simulation.FlowExecutor - 🆘 Generating fallback initialization for chat: 1
2025-07-18 13:58:18.972 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎯 Processing user input for chat: 1, simulation mode: PREDEFINED
2025-07-18 13:58:18.972 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message test-message-1752836298971 to context. Total messages: 1
2025-07-18 13:58:18.973 [ForkJoinPool.commonPool-worker-4] ERROR c.b.s.simulation.FlowExecutor - ❌ Error processing user input for chat: 1
java.lang.RuntimeException: Test Exception
	at com.backend.softtrainer.simulation.flow.FlowResolver.resolveNextNodes(FlowResolver.java:32) ~[main/:na]
	at com.backend.softtrainer.simulation.FlowExecutor.lambda$generateResponse$0(FlowExecutor.java:84) ~[main/:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[na:na]
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[na:na]
2025-07-18 13:58:18.973 [ForkJoinPool.commonPool-worker-4] WARN  c.b.s.simulation.FlowExecutor - 🆘 Generating fallback response for chat: 1
2025-07-18 13:58:18.980 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.981 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 1 initial nodes
2025-07-18 13:58:18.981 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message null is not actionable, continuing flow (iteration: 1)
2025-07-18 13:58:18.982 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - 🏁 No more nodes found, ending flow
2025-07-18 13:58:18.982 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 1 messages
2025-07-18 13:58:18.989 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:18.991 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:18.991 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message null is not actionable, continuing flow (iteration: 1)
2025-07-18 13:58:18.995 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 2)
2025-07-18 13:58:18.996 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 3)
2025-07-18 13:58:18.996 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 4)
2025-07-18 13:58:18.996 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 5)
2025-07-18 13:58:18.996 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 6)
2025-07-18 13:58:18.998 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 7)
2025-07-18 13:58:18.998 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 8)
2025-07-18 13:58:18.999 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 9)
2025-07-18 13:58:18.999 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 10)
2025-07-18 13:58:18.999 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 11)
2025-07-18 13:58:19.000 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 12)
2025-07-18 13:58:19.000 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 13)
2025-07-18 13:58:19.000 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 14)
2025-07-18 13:58:19.001 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 15)
2025-07-18 13:58:19.001 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 16)
2025-07-18 13:58:19.001 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 17)
2025-07-18 13:58:19.002 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 18)
2025-07-18 13:58:19.002 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 19)
2025-07-18 13:58:19.002 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 20)
2025-07-18 13:58:19.002 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 21)
2025-07-18 13:58:19.003 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 22)
2025-07-18 13:58:19.003 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 23)
2025-07-18 13:58:19.003 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 24)
2025-07-18 13:58:19.004 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 25)
2025-07-18 13:58:19.004 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 26)
2025-07-18 13:58:19.004 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 27)
2025-07-18 13:58:19.004 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 28)
2025-07-18 13:58:19.005 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 29)
2025-07-18 13:58:19.005 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 30)
2025-07-18 13:58:19.006 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 31)
2025-07-18 13:58:19.006 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 32)
2025-07-18 13:58:19.006 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 33)
2025-07-18 13:58:19.006 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 34)
2025-07-18 13:58:19.007 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 35)
2025-07-18 13:58:19.007 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 36)
2025-07-18 13:58:19.007 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 37)
2025-07-18 13:58:19.007 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 38)
2025-07-18 13:58:19.008 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 39)
2025-07-18 13:58:19.008 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 40)
2025-07-18 13:58:19.008 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 41)
2025-07-18 13:58:19.008 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 42)
2025-07-18 13:58:19.008 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 43)
2025-07-18 13:58:19.009 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 44)
2025-07-18 13:58:19.009 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 45)
2025-07-18 13:58:19.009 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 46)
2025-07-18 13:58:19.010 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 47)
2025-07-18 13:58:19.010 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 48)
2025-07-18 13:58:19.010 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 49)
2025-07-18 13:58:19.010 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message test-message-1752836298989 is not actionable, continuing flow (iteration: 50)
2025-07-18 13:58:19.014 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 51 messages
2025-07-18 13:58:19.014 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message test-message-1752836298988 to context. Total messages: 1
2025-07-18 13:58:19.014 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎯 Processing user input for chat: 1, simulation mode: PREDEFINED
2025-07-18 13:58:19.014 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message test-message-1752836298988 to context. Total messages: 2
2025-07-18 13:58:19.015 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔍 Resolved 1 candidate nodes
2025-07-18 13:58:19.015 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - ✅ Generated and saved 1 messages
2025-07-18 13:58:19.016 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - 🏁 Simulation completed for chat: 1
2025-07-18 13:58:19.016 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.s.context.SimulationContext - 🏁 Simulation 1 marked as completed
2025-07-18 13:58:19.019 [Test worker] DEBUG c.b.s.s.context.SimulationContext - ❤️ Hearts updated to: 0.0
2025-07-18 13:58:19.024 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: PREDEFINED
2025-07-18 13:58:19.024 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 1 initial nodes
2025-07-18 13:58:19.025 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message null is not actionable, continuing flow (iteration: 1)
2025-07-18 13:58:19.026 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - 🏁 No more nodes found, ending flow
2025-07-18 13:58:19.026 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 1 messages
2025-07-18 13:58:19.030 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: DYNAMIC
2025-07-18 13:58:19.030 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 0 initial nodes
2025-07-18 13:58:19.031 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message null is not actionable, continuing flow (iteration: 1)
2025-07-18 13:58:19.031 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - 🏁 No more nodes found, ending flow
2025-07-18 13:58:19.031 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 1 messages
2025-07-18 13:58:19.034 [Test worker] INFO  c.b.s.simulation.FlowExecutor - 🎬 Initializing simulation for chat: 1, mode: HYBRID
2025-07-18 13:58:19.035 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🎯 Found 1 initial nodes
2025-07-18 13:58:19.035 [ForkJoinPool.commonPool-worker-4] DEBUG c.b.s.simulation.FlowExecutor - 🔄 Message null is not actionable, continuing flow (iteration: 1)
2025-07-18 13:58:19.035 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - 🏁 No more nodes found, ending flow
2025-07-18 13:58:19.035 [ForkJoinPool.commonPool-worker-4] INFO  c.b.s.simulation.FlowExecutor - ✅ Initialized simulation with 1 messages
2025-07-18 13:58:19.049 [Test worker] INFO  c.b.s.s.flow.FlowPatternCache - 🔄 Warming up cache for 3 simulations
2025-07-18 13:58:19.050 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🔥 Warming cache for simulation: 1
2025-07-18 13:58:19.050 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🔥 Warming cache for simulation: 2
2025-07-18 13:58:19.050 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🔥 Warming cache for simulation: 3
2025-07-18 13:58:19.051 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: test_key
2025-07-18 13:58:19.053 [Test worker] INFO  c.b.s.s.flow.FlowPatternCache - 🗑️ Clearing cache for simulation: 1
2025-07-18 13:58:19.053 [Test worker] INFO  c.b.s.s.flow.FlowPatternCache - 🗑️ Clearing all flow pattern caches
2025-07-18 13:58:19.061 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: simulation_1_previous_5
2025-07-18 13:58:19.061 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: simulation_1_previous_5
2025-07-18 13:58:19.061 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: simulation_1_previous_5
2025-07-18 13:58:19.062 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: test_key_1
2025-07-18 13:58:19.062 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: test_key_1
2025-07-18 13:58:19.063 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - ❌ Cache miss for: test_key_2
2025-07-18 13:58:19.064 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: pattern_1
2025-07-18 13:58:19.064 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: pattern_1
2025-07-18 13:58:19.064 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - 🎯 Cache hit for: pattern_2
2025-07-18 13:58:19.064 [Test worker] DEBUG c.b.s.s.flow.FlowPatternCache - ❌ Cache miss for: pattern_3
2025-07-18 13:58:19.077 [Test worker] WARN  c.b.s.s.m.RulePerformanceMonitor - ⚠️ High error rate for rule error_limit_rule: {:.1f}%
2025-07-18 13:58:19.078 [Test worker] WARN  c.b.s.s.m.RulePerformanceMonitor - ⚠️ High error rate for rule error_limit_rule: {:.1f}%
2025-07-18 13:58:19.078 [Test worker] WARN  c.b.s.s.m.RulePerformanceMonitor - ⚠️ High error rate for rule error_limit_rule: {:.1f}%
2025-07-18 13:58:19.078 [Test worker] WARN  c.b.s.s.m.RulePerformanceMonitor - ⚠️ High error rate for rule error_limit_rule: {:.1f}%
2025-07-18 13:58:19.078 [Test worker] WARN  c.b.s.s.m.RulePerformanceMonitor - ⚠️ High error rate for rule error_limit_rule: {:.1f}%
2025-07-18 13:58:19.111 [Test worker] INFO  c.b.s.s.m.RulePerformanceMonitor - 🗑️ Cleared performance data older than 30 days
2025-07-18 13:58:19.117 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.117 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.132 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.133 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.133 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.133 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.133 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.133 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.133 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.133 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.134 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.134 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.134 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.134 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.134 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.134 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.135 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.135 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.138 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.139 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.140 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.140 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.141 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.141 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.141 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.141 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.142 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.142 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.143 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.143 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.143 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.144 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.144 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.144 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.144 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.144 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.145 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.145 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.146 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.146 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.146 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 2 conditions
2025-07-18 13:58:19.146 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.146 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 2 conditions
2025-07-18 13:58:19.146 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.147 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.147 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.147 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 2 conditions
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 2 conditions
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.148 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 2 conditions
2025-07-18 13:58:19.151 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.152 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 2 conditions
2025-07-18 13:58:19.152 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.152 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.152 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.152 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter bonus_points: 10.0
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 3.0
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 0 conditions
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> true
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Evaluating ConditionalBranching rule: null with 1 conditions
2025-07-18 13:58:19.153 [Test worker] DEBUG c.b.s.s.r.m.ConditionalBranchingRule - 🌳 Conditional evaluation result: null -> false
2025-07-18 13:58:19.154 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.154 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.156 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: INCREMENT on parameter empathy
2025-07-18 13:58:19.157 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 5.0
2025-07-18 13:58:19.157 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter empathy: 3.0 -> 5.0 (INCREMENT)
2025-07-18 13:58:19.158 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.158 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.158 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: MULTIPLY on parameter empathy
2025-07-18 13:58:19.158 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 6.0
2025-07-18 13:58:19.158 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter empathy: 3.0 -> 6.0 (MULTIPLY)
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: SET on parameter empathy
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 7.0
2025-07-18 13:58:19.159 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter empathy: 3.0 -> 7.0 (SET)
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: DECREMENT on parameter empathy
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 🔒 Applied minimum constraint: -2.0 -> 1.0
2025-07-18 13:58:19.159 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 1.0
2025-07-18 13:58:19.159 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter empathy: 3.0 -> 1.0 (DECREMENT)
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: INCREMENT on parameter empathy
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 🔒 Applied maximum constraint: 13.0 -> 8.0
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 8.0
2025-07-18 13:58:19.160 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter empathy: 3.0 -> 8.0 (INCREMENT)
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: INCREMENT on parameter nonexistent
2025-07-18 13:58:19.160 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter nonexistent: 2.0
2025-07-18 13:58:19.160 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter nonexistent: 0.0 -> 2.0 (INCREMENT)
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: INCREMENT on parameter empathy
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 4.5
2025-07-18 13:58:19.161 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter empathy: 3.0 -> 4.5 (INCREMENT)
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: DECREMENT on parameter engagement
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.0
2025-07-18 13:58:19.161 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter engagement: 2.5 -> 2.0 (DECREMENT)
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: SET on parameter new_param
2025-07-18 13:58:19.161 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter new_param: 4.0
2025-07-18 13:58:19.161 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter new_param: 0.0 -> 4.0 (SET)
2025-07-18 13:58:19.162 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 3.0
2025-07-18 13:58:19.162 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 2.5
2025-07-18 13:58:19.162 [Test worker] DEBUG c.b.s.s.r.m.HyperParameterActionRule - 📈 Executing HyperParameterAction: DECREMENT on parameter engagement
2025-07-18 13:58:19.162 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 1.5
2025-07-18 13:58:19.162 [Test worker] INFO  c.b.s.s.r.m.HyperParameterActionRule - 📈 Updated hyperparameter engagement: 2.5 -> 1.5 (DECREMENT)
2025-07-18 13:58:19.164 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373682596141 to context. Total messages: 1
2025-07-18 13:58:19.164 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373682813164 to context. Total messages: 2
2025-07-18 13:58:19.164 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373682851676 to context. Total messages: 3
2025-07-18 13:58:19.164 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373682880529 to context. Total messages: 4
2025-07-18 13:58:19.164 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373682906017 to context. Total messages: 5
2025-07-18 13:58:19.167 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: TOTAL_MESSAGES BETWEEN null
2025-07-18 13:58:19.168 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 5 BETWEEN null -> true
2025-07-18 13:58:19.168 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: TOTAL_MESSAGES BETWEEN null
2025-07-18 13:58:19.168 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 5 BETWEEN null -> false
2025-07-18 13:58:19.169 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373687714973 to context. Total messages: 1
2025-07-18 13:58:19.169 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373687824205 to context. Total messages: 2
2025-07-18 13:58:19.169 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373687925084 to context. Total messages: 3
2025-07-18 13:58:19.169 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373687980501 to context. Total messages: 4
2025-07-18 13:58:19.169 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: USER_MESSAGES EQUALS 2
2025-07-18 13:58:19.169 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 2 EQUALS 2 -> true
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373692969626 to context. Total messages: 1
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373693142630 to context. Total messages: 2
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373693220580 to context. Total messages: 3
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373693260743 to context. Total messages: 4
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373693309269 to context. Total messages: 5
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: TOTAL_MESSAGES GREATER_THAN 4
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 5 GREATER_THAN 4 -> true
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: TOTAL_MESSAGES LESS_THAN 6
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 5 LESS_THAN 6 -> true
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: TOTAL_MESSAGES NOT_EQUALS 3
2025-07-18 13:58:19.174 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 5 NOT_EQUALS 3 -> true
2025-07-18 13:58:19.177 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373696009735 to context. Total messages: 1
2025-07-18 13:58:19.177 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373696147453 to context. Total messages: 2
2025-07-18 13:58:19.177 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373696196932 to context. Total messages: 3
2025-07-18 13:58:19.177 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: TOTAL_MESSAGES EQUALS 3
2025-07-18 13:58:19.177 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 3 EQUALS 3 -> true
2025-07-18 13:58:19.177 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Evaluating MessageCount rule: TOTAL_MESSAGES EQUALS 5
2025-07-18 13:58:19.177 [Test worker] DEBUG c.b.s.s.r.modern.MessageCountRule - 💬 Message count evaluation: 3 EQUALS 5 -> false
2025-07-18 13:58:19.181 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: TIME_OF_DAY EQUALS null
2025-07-18 13:58:19.181 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 13 EQUALS null -> true
2025-07-18 13:58:19.181 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: TIME_OF_DAY EQUALS null
2025-07-18 13:58:19.182 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 13 EQUALS null -> false
2025-07-18 13:58:19.184 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: SESSION_DURATION GREATER_THAN 3
2025-07-18 13:58:19.185 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 5 GREATER_THAN 3 -> true
2025-07-18 13:58:19.185 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: SESSION_DURATION GREATER_THAN 10
2025-07-18 13:58:19.185 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 5 GREATER_THAN 10 -> false
2025-07-18 13:58:19.186 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: SESSION_DURATION BETWEEN null
2025-07-18 13:58:19.186 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 5 BETWEEN null -> true
2025-07-18 13:58:19.186 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: SESSION_DURATION BETWEEN null
2025-07-18 13:58:19.186 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 5 BETWEEN null -> false
2025-07-18 13:58:19.186 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: RESPONSE_TIME GREATER_THAN 0
2025-07-18 13:58:19.187 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 0 GREATER_THAN 0 -> false
2025-07-18 13:58:19.187 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_1 to context. Total messages: 1
2025-07-18 13:58:19.187 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: RESPONSE_TIME LESS_THAN 20
2025-07-18 13:58:19.187 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 15 LESS_THAN 20 -> true
2025-07-18 13:58:19.187 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: RESPONSE_TIME LESS_THAN 10
2025-07-18 13:58:19.187 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 15 LESS_THAN 10 -> false
2025-07-18 13:58:19.189 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373708026787 to context. Total messages: 1
2025-07-18 13:58:19.189 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373708320342 to context. Total messages: 2
2025-07-18 13:58:19.189 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📝 Added message msg_154373708367068 to context. Total messages: 3
2025-07-18 13:58:19.189 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: AVERAGE_RESPONSE_TIME EQUALS 20
2025-07-18 13:58:19.192 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 20 EQUALS 20 -> true
2025-07-18 13:58:19.193 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: DAY_OF_WEEK EQUALS null
2025-07-18 13:58:19.193 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 5 EQUALS null -> true
2025-07-18 13:58:19.193 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Evaluating TimeBasedRule: DAY_OF_WEEK EQUALS null
2025-07-18 13:58:19.193 [Test worker] DEBUG c.b.s.s.rules.modern.TimeBasedRule - ⏰ Time evaluation: 5 EQUALS null -> false
2025-07-18 14:00:06.009 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 14:00:06.021 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Starting AiGeneratedSimulationIntegrationTest using Java 17.0.13 with PID 64630 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:00:06.022 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - The following 1 profile is active: "test"
2025-07-18 14:00:12.681 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:00:13.578 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:00:13.582 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 14:00:13.640 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:00:16.372 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:00:16.375 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:00:16.376 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:00:16.376 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:00:16.376 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:00:16.377 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:00:16.377 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:00:16.378 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:00:16.378 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:00:16.379 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:00:16.379 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:00:16.380 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:00:16.380 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:00:16.381 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:00:16.382 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:00:16.383 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:00:16.384 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:00:16.385 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:00:16.386 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:00:16.387 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:00:16.389 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:00:16.390 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:00:16.391 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:00:16.392 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:00:16.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:00:16.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:00:16.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:00:16.393 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:00:16.394 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:00:16.394 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:00:16.394 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:00:16.394 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:00:16.395 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:00:16.406 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 14:00:16.409 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 14:00:16.410 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 14:00:16.411 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 14:00:16.412 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 14:00:16.413 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 14:00:16.414 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 14:00:16.415 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 14:00:16.415 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 14:00:16.416 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 14:00:16.417 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 14:00:16.421 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 14:00:16.430 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 14:00:16.432 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 14:00:16.433 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 14:00:16.435 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 14:00:16.440 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 14:00:16.441 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 14:00:16.443 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 14:00:16.446 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content VARBINARY, primary key (id))
2025-07-18 14:00:16.450 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 14:00:16.458 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 14:00:16.461 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 14:00:16.463 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 14:00:16.465 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 14:00:16.466 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 14:00:16.468 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 14:00:16.471 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 14:00:16.476 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 14:00:16.479 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 14:00:16.481 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 14:00:16.482 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 14:00:16.485 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 14:00:16.487 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 14:00:16.493 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 14:00:16.495 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 14:00:16.497 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 14:00:16.498 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 14:00:16.500 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 14:00:16.502 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 14:00:16.504 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 14:00:16.505 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 14:00:16.507 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 14:00:16.509 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 14:00:16.511 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 14:00:16.514 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 14:00:16.516 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 14:00:16.518 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 14:00:16.521 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 14:00:16.523 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 14:00:16.525 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 14:00:16.527 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 14:00:16.529 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 14:00:16.531 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 14:00:16.533 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 14:00:16.534 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 14:00:16.536 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 14:00:21.973 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:00:21.992 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 14:00:22.639 [Test worker] INFO  c.b.s.i.AiGeneratedSimulationIntegrationTest - Started AiGeneratedSimulationIntegrationTest in 16.957 seconds (process running for 19.652)
2025-07-18 14:00:22.761 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 14:00:22.761 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 14:00:22.795 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 14:00:22.812 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 14:00:22.871 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:00:22.873 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:00:22.874 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:00:22.875 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:00:22.875 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:00:22.876 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:00:22.877 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:00:22.877 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:00:22.878 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:00:22.879 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:00:22.880 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:00:22.881 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:00:22.882 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:00:22.883 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:00:22.883 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:00:22.884 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:00:22.885 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:00:22.886 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:00:22.887 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:00:22.887 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:00:22.888 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:00:22.888 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:00:22.889 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:00:22.889 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:00:22.889 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:00:22.890 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:00:22.890 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:00:22.890 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:00:22.890 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:00:22.890 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:00:22.891 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:00:22.891 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:00:22.891 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:00:22.894 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 14:00:22.897 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 14:11:08.996 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 67053 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:11:09.003 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 14:11:11.892 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:11:11.892 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:11:11.969 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:11:12.112 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:11:13.178 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7848321e
2025-07-18 14:11:13.180 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 14:11:13.778 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.8 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-07-18 14:11:18.120 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "alter table if exists materials alter column file_content set data type VARBINARY" via JDBC [ERROR: type "varbinary" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table if exists materials alter column file_content set data type VARBINARY" via JDBC [ERROR: type "varbinary" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:574)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:514)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:333)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:232)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:286)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.postgresql.util.PSQLException: ERROR: type "varbinary" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-07-18 14:11:25.335 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:11:26.849 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 14:11:26.850 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 14:11:27.557 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 14:11:28.665 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 20.251 seconds (process running for 21.143)
2025-07-18 14:12:52.046 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 68241 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:12:52.051 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 14:12:56.780 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:12:56.781 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:12:56.895 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:12:57.240 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:12:58.305 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.api.configuration.ClassicConfiguration.setDataSource(ClassicConfiguration.java:1094)
	at org.flywaydb.core.api.configuration.FluentConfiguration.dataSource(FluentConfiguration.java:624)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.configureDataSource(FlywayAutoConfiguration.java:185)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.flyway(FlywayAutoConfiguration.java:172)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:639)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 42 common frames omitted
2025-07-18 14:12:58.476 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:12:59.487 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 36 common frames omitted
2025-07-18 14:12:59.495 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

2025-07-18 14:12:59.502 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-18 14:12:59.562 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:60)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	... 24 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 36 common frames omitted
2025-07-18 14:13:10.900 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 14:13:17.824 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 14:13:58.808 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 69787 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:13:58.819 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 14:14:05.994 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:14:05.996 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:14:06.352 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:14:06.974 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:14:08.375 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.api.configuration.ClassicConfiguration.setDataSource(ClassicConfiguration.java:1094)
	at org.flywaydb.core.api.configuration.FluentConfiguration.dataSource(FluentConfiguration.java:624)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.configureDataSource(FlywayAutoConfiguration.java:185)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.flyway(FlywayAutoConfiguration.java:172)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:639)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 42 common frames omitted
2025-07-18 14:14:08.524 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:14:09.529 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 36 common frames omitted
2025-07-18 14:14:09.532 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

2025-07-18 14:14:09.536 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-18 14:14:09.579 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to obtain connection from database: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.

	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:60)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	... 24 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 36 common frames omitted
2025-07-18 14:14:15.147 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 69938 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:14:15.152 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 14:14:18.455 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:14:18.456 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:14:18.538 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:14:18.695 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:14:20.701 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@734f8317
2025-07-18 14:14:20.705 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 14:14:23.386 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.8 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-07-18 14:14:38.352 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 70634 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:14:38.388 [main] INFO  c.b.s.SoftTrainerBackendApplication - The following 1 profile is active: "test"
2025-07-18 14:14:42.189 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:14:42.189 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:14:42.259 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:14:42.335 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Cannot load driver class: org.h2.Driver
2025-07-18 14:14:42.338 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-18 14:14:42.376 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Cannot load driver class: org.h2.Driver
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:542)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Cannot load driver class: org.h2.Driver
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:639)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 21 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Cannot load driver class: org.h2.Driver
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647)
	... 35 common frames omitted
Caused by: java.lang.IllegalStateException: Cannot load driver class: org.h2.Driver
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:175)
	at org.springframework.boot.autoconfigure.jdbc.PropertiesJdbcConnectionDetails.getDriverClassName(PropertiesJdbcConnectionDetails.java:49)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:55)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 36 common frames omitted
2025-07-18 14:14:53.568 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:14:54.101 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 14:14:54.101 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 14:14:54.583 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 14:14:55.705 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 41.398 seconds (process running for 44.529)
2025-07-18 14:16:33.310 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-18 14:16:36.523 [http-nio-8080-exec-2] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 14:16:41.028 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14152 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-2
2025-07-18 14:16:46.625 [http-nio-8080-exec-2] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:16:46.626 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:16:46.628 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:16:46.630 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.SimulationEngineFactory - 🤖 Creating AI-generated simulation engine
2025-07-18 14:16:46.631 [http-nio-8080-exec-2] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created AiGeneratedSimulationEngine$$SpringCGLIB$$0 engine for type: AI_GENERATED
2025-07-18 14:16:46.632 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14152
2025-07-18 14:16:46.635 [http-nio-8080-exec-2] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14152: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 14:16:46.635 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 14:16:46.635 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 14:16:46.635 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 14:16:46.635 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 14:16:46.636 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 14:16:46.636 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 14:16:46.636 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 14:16:46.693 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14152: {"simulation_id":"1952","chat_id":"14152","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 14:16:46.695 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 14:16:46.695 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:16:46.844 [http-nio-8080-exec-2] ERROR c.b.s.configs.AiAgentErrorHandler - 🚨 AI Agent API error: status=500 INTERNAL_SERVER_ERROR, body={"detail":"'coroutine' object is not subscriptable"}, consecutiveFailures=1
2025-07-18 14:16:46.846 [http-nio-8080-exec-2] ERROR c.b.s.configs.AiAgentErrorHandler - 🔥 AI Agent server error 500 INTERNAL_SERVER_ERROR: {"detail":"'coroutine' object is not subscriptable"}. Failure #1
2025-07-18 14:16:46.847 [http-nio-8080-exec-2] WARN  c.b.s.services.AiAgentService - AI Agent message call failed (attempt 1/3): AI Agent server error: 500 INTERNAL_SERVER_ERROR - {"detail":"'coroutine' object is not subscriptable"}
2025-07-18 14:16:47.348 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:16:47.354 [http-nio-8080-exec-2] ERROR c.b.s.configs.AiAgentErrorHandler - 🚨 AI Agent API error: status=500 INTERNAL_SERVER_ERROR, body={"detail":"'coroutine' object is not subscriptable"}, consecutiveFailures=2
2025-07-18 14:16:47.354 [http-nio-8080-exec-2] ERROR c.b.s.configs.AiAgentErrorHandler - 🔥 AI Agent server error 500 INTERNAL_SERVER_ERROR: {"detail":"'coroutine' object is not subscriptable"}. Failure #2
2025-07-18 14:16:47.354 [http-nio-8080-exec-2] WARN  c.b.s.services.AiAgentService - AI Agent message call failed (attempt 2/3): AI Agent server error: 500 INTERNAL_SERVER_ERROR - {"detail":"'coroutine' object is not subscriptable"}
2025-07-18 14:16:48.358 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:16:48.361 [http-nio-8080-exec-2] ERROR c.b.s.configs.AiAgentErrorHandler - 🚨 AI Agent API error: status=500 INTERNAL_SERVER_ERROR, body={"detail":"'coroutine' object is not subscriptable"}, consecutiveFailures=3
2025-07-18 14:16:48.361 [http-nio-8080-exec-2] ERROR c.b.s.configs.AiAgentErrorHandler - 🔥 AI Agent server error 500 INTERNAL_SERVER_ERROR: {"detail":"'coroutine' object is not subscriptable"}. Failure #3
2025-07-18 14:16:48.361 [http-nio-8080-exec-2] WARN  c.b.s.services.AiAgentService - AI Agent message call failed (attempt 3/3): AI Agent server error: 500 INTERNAL_SERVER_ERROR - {"detail":"'coroutine' object is not subscriptable"}
2025-07-18 14:16:48.361 [http-nio-8080-exec-2] ERROR c.b.s.services.AiAgentService - Failed to initialize simulation: 1952
java.lang.RuntimeException: AI Agent message call failed after 3 attempts
	at com.backend.softtrainer.services.AiAgentService.callMessageAgentWithRetry(AiAgentService.java:406)
	at com.backend.softtrainer.services.AiAgentService.initializeSimulation(AiAgentService.java:336)
	at com.backend.softtrainer.simulation.engine.AiGeneratedSimulationEngine.initializeSimulation(AiGeneratedSimulationEngine.java:180)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.simulation.engine.AiGeneratedSimulationEngine$$SpringCGLIB$$0.initializeSimulation(<generated>)
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.initializeChat(DualModeSimulationRuntime.java:184)
	at com.backend.softtrainer.controllers.ChatController.create(ChatController.java:110)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.controllers.ChatController$$SpringCGLIB$$0.create(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: com.backend.softtrainer.configs.AiAgentErrorHandler$AiAgentServerException: AI Agent server error: 500 INTERNAL_SERVER_ERROR - {"detail":"'coroutine' object is not subscriptable"}
	at com.backend.softtrainer.configs.AiAgentErrorHandler.handleServerError(AiAgentErrorHandler.java:113)
	at com.backend.softtrainer.configs.AiAgentErrorHandler.handleError(AiAgentErrorHandler.java:61)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:538)
	at com.backend.softtrainer.services.AiAgentService.callMessageAgentWithRetry(AiAgentService.java:383)
	... 124 common frames omitted
2025-07-18 14:16:48.368 [http-nio-8080-exec-2] ERROR c.b.s.s.e.AiGeneratedSimulationEngine - ❌ AI-generated engine error initializing simulation: Simulation initialization failed and fallback is disabled
java.lang.RuntimeException: Simulation initialization failed and fallback is disabled
	at com.backend.softtrainer.services.AiAgentService.initializeSimulation(AiAgentService.java:365)
	at com.backend.softtrainer.simulation.engine.AiGeneratedSimulationEngine.initializeSimulation(AiGeneratedSimulationEngine.java:180)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.simulation.engine.AiGeneratedSimulationEngine$$SpringCGLIB$$0.initializeSimulation(<generated>)
	at com.backend.softtrainer.simulation.DualModeSimulationRuntime.initializeChat(DualModeSimulationRuntime.java:184)
	at com.backend.softtrainer.controllers.ChatController.create(ChatController.java:110)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.controllers.ChatController$$SpringCGLIB$$0.create(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.RuntimeException: AI Agent message call failed after 3 attempts
	at com.backend.softtrainer.services.AiAgentService.callMessageAgentWithRetry(AiAgentService.java:406)
	at com.backend.softtrainer.services.AiAgentService.initializeSimulation(AiAgentService.java:336)
	... 123 common frames omitted
Caused by: com.backend.softtrainer.configs.AiAgentErrorHandler$AiAgentServerException: AI Agent server error: 500 INTERNAL_SERVER_ERROR - {"detail":"'coroutine' object is not subscriptable"}
	at com.backend.softtrainer.configs.AiAgentErrorHandler.handleServerError(AiAgentErrorHandler.java:113)
	at com.backend.softtrainer.configs.AiAgentErrorHandler.handleError(AiAgentErrorHandler.java:61)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:538)
	at com.backend.softtrainer.services.AiAgentService.callMessageAgentWithRetry(AiAgentService.java:383)
	... 124 common frames omitted
2025-07-18 14:16:48.371 [http-nio-8080-exec-2] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Creating fallback initial messages for chat 14152
2025-07-18 14:16:48.372 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:16:48.372 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:16:51.855 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 2 messages using AI_GENERATED engine
2025-07-18 14:16:51.867 [http-nio-8080-exec-2] INFO  c.b.s.services.UserMessageService - Last simulation message content []
2025-07-18 14:16:51.928 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 14:16:51.985 [http-nio-8080-exec-2] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 14:16:51.985 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 14:16:51.985 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - Chat 14152 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 14:16:51.985 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14152 | message_count=2
2025-07-18 14:16:51.986 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="We are so sorry, but the dynamic simulation is currently unavailable. Please try again later or cont..."
2025-07-18 14:16:51.988 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=RESULT_SIMULATION | content=""
2025-07-18 14:18:09.712 [http-nio-8080-exec-5] INFO  c.b.s.services.UserMessageService - Last simulation message content []
2025-07-18 14:19:40.589 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 14:19:40.611 [Test worker] INFO  c.b.s.SoftTrainerBackendApplicationTests - Starting SoftTrainerBackendApplicationTests using Java 17.0.13 with PID 75189 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:19:40.612 [Test worker] INFO  c.b.s.SoftTrainerBackendApplicationTests - The following 1 profile is active: "test"
2025-07-18 14:19:43.220 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:19:43.474 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:19:43.477 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 14:19:43.499 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:19:46.252 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:19:46.254 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:19:46.254 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:19:46.255 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:19:46.255 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:19:46.255 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:19:46.255 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:19:46.256 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:19:46.256 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:19:46.256 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:19:46.257 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:19:46.257 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:19:46.257 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:19:46.257 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:19:46.258 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:19:46.258 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:19:46.259 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:19:46.259 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:19:46.259 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:19:46.260 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:19:46.260 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:19:46.260 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:19:46.261 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:19:46.261 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:19:46.262 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:19:46.262 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:19:46.262 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:19:46.263 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:19:46.263 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:19:46.263 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:19:46.264 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:19:46.264 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:19:46.264 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:19:46.273 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 14:19:46.276 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 14:19:46.276 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 14:19:46.277 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 14:19:46.278 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 14:19:46.278 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 14:19:46.279 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 14:19:46.279 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 14:19:46.280 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 14:19:46.280 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 14:19:46.281 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 14:19:46.284 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 14:19:46.289 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 14:19:46.291 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 14:19:46.292 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 14:19:46.293 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 14:19:46.296 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 14:19:46.297 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 14:19:46.299 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 14:19:46.300 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 14:19:46.302 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 131 common frames omitted
2025-07-18 14:19:46.316 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 14:19:46.321 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 14:19:46.324 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 14:19:46.326 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 14:19:46.327 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 14:19:46.328 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 14:19:46.329 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 14:19:46.332 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 14:19:46.334 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 14:19:46.335 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 14:19:46.336 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 14:19:46.338 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 14:19:46.339 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 14:19:46.341 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 14:19:46.347 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 14:19:46.349 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 14:19:46.350 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 14:19:46.352 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 14:19:46.353 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 14:19:46.354 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 14:19:46.356 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 14:19:46.356 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 14:19:46.358 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 14:19:46.359 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 14:19:46.360 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 14:19:46.362 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 14:19:46.363 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 14:19:46.366 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 14:19:46.368 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 14:19:46.369 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 14:19:46.371 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 14:19:46.372 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 14:19:46.373 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 14:19:46.375 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 14:19:46.377 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 14:19:46.379 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 14:19:46.381 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 14:19:48.199 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:19:48.686 [Test worker] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 14:19:48.688 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:19:48.690 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:19:48.692 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:19:48.694 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:19:48.696 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:19:48.697 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:19:48.699 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:19:48.700 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:19:48.701 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:19:48.702 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:19:48.704 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:19:48.705 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:19:48.706 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:19:48.707 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:19:48.708 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:19:48.709 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:19:48.711 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:19:48.711 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:19:48.712 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:19:48.713 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:19:48.714 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:19:48.715 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:19:48.716 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:19:48.717 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:19:48.718 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:19:48.719 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:19:48.720 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:19:48.721 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:19:48.721 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:19:48.722 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:19:48.723 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:19:48.723 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:19:48.724 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:19:48.727 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 14:19:48.730 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 14:19:48.776 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311)
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209)
	at java.base/java.util.Optional.of(Optional.java:113)
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366)
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343)
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 194 common frames omitted
2025-07-18 14:19:48.798 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.SoftTrainerBackendApplicationTests@4c712f24]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@59c82fb6 testClass = com.backend.softtrainer.SoftTrainerBackendApplicationTests, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 86 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311)
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209)
	at java.base/java.util.Optional.of(Optional.java:113)
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366)
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343)
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 194 common frames omitted
2025-07-18 14:19:48.962 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 14:19:48.963 [Test worker] INFO  c.b.s.c.AdminSkillControllerIntegrationTest - Starting AdminSkillControllerIntegrationTest using Java 17.0.13 with PID 75189 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:19:48.963 [Test worker] DEBUG c.b.s.c.AdminSkillControllerIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-07-18 14:19:48.963 [Test worker] INFO  c.b.s.c.AdminSkillControllerIntegrationTest - The following 1 profile is active: "test"
2025-07-18 14:19:51.974 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-07-18 14:19:51.980 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:19:51.981 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-07-18 14:19:51.983 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:19:54.245 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:19:54.246 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:19:54.247 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:19:54.247 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:19:54.248 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:19:54.248 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:19:54.249 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:19:54.250 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:19:54.250 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:19:54.251 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:19:54.251 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:19:54.252 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:19:54.253 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:19:54.253 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:19:54.254 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:19:54.255 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:19:54.255 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:19:54.256 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:19:54.257 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:19:54.257 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:19:54.258 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:19:54.258 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:19:54.259 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:19:54.259 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:19:54.260 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:19:54.260 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:19:54.261 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:19:54.262 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:19:54.262 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:19:54.263 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:19:54.263 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:19:54.264 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:19:54.265 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:19:54.266 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 14:19:54.267 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 14:19:54.268 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 14:19:54.270 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 14:19:54.271 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 14:19:54.272 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 14:19:54.273 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 14:19:54.274 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 14:19:54.276 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 14:19:54.277 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 14:19:54.277 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 14:19:54.279 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 14:19:54.282 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 14:19:54.284 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 14:19:54.286 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 14:19:54.288 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 14:19:54.293 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 14:19:54.295 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 14:19:54.300 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 14:19:54.312 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 14:19:54.313 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 14:19:54.341 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 14:19:54.348 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 14:19:54.350 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 14:19:54.352 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 14:19:54.353 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 14:19:54.356 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 14:19:54.358 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 14:19:54.362 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 14:19:54.365 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 14:19:54.368 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 14:19:54.374 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 14:19:54.376 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 14:19:54.379 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 14:19:54.382 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 14:19:54.387 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 14:19:54.389 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 14:19:54.392 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 14:19:54.394 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 14:19:54.397 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 14:19:54.399 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 14:19:54.402 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 14:19:54.403 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 14:19:54.406 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 14:19:54.409 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 14:19:54.412 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 14:19:54.415 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 14:19:54.417 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 14:19:54.420 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 14:19:54.423 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 14:19:54.426 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 14:19:54.428 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 14:19:54.430 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 14:19:54.433 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 14:19:54.436 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 14:19:54.438 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 14:19:54.441 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 14:19:54.443 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 14:19:55.531 [Test worker] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 14:19:55.532 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:19:55.533 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:19:55.534 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:19:55.535 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:19:55.536 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:19:55.538 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:19:55.539 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:19:55.539 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:19:55.540 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:19:55.541 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:19:55.541 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:19:55.542 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:19:55.543 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:19:55.544 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:19:55.545 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:19:55.546 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:19:55.547 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:19:55.548 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:19:55.549 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:19:55.549 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:19:55.550 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:19:55.550 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:19:55.551 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:19:55.552 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:19:55.552 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:19:55.552 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:19:55.553 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:19:55.553 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:19:55.553 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:19:55.553 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:19:55.554 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:19:55.554 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:19:55.554 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:19:55.555 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-07-18 14:19:55.556 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-07-18 14:19:55.567 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 14:19:55.577 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@14a78f54]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2bba7bd9 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@875cfe4 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@82f2f0f8, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 86 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 14:19:55.587 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@5585f547]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@2bba7bd9 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@875cfe4 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@82f2f0f8, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 14:19:55.593 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@6da51e86]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@2bba7bd9 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@875cfe4 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@82f2f0f8, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 14:19:55.599 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@13e40ebc]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@2bba7bd9 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@875cfe4 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@82f2f0f8, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 14:19:55.606 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest@14404749]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@2bba7bd9 testClass = com.backend.softtrainer.controllers.AdminSkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@875cfe4 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@82f2f0f8, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 14:19:55.811 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 14:19:55.814 [Test worker] INFO  c.b.s.c.MessageControllerIntegrationTest - Starting MessageControllerIntegrationTest using Java 17.0.13 with PID 75189 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:19:55.814 [Test worker] DEBUG c.b.s.c.MessageControllerIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-07-18 14:19:55.815 [Test worker] INFO  c.b.s.c.MessageControllerIntegrationTest - The following 1 profile is active: "test"
2025-07-18 14:19:57.039 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-07-18 14:19:57.041 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:19:57.041 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-07-18 14:19:57.042 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:19:57.925 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:19:57.925 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:19:57.925 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:19:57.926 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:19:57.926 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:19:57.926 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:19:57.926 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:19:57.927 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:19:57.927 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:19:57.927 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:19:57.927 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:19:57.928 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:19:57.928 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:19:57.928 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:19:57.928 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:19:57.928 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:19:57.929 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:19:57.929 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:19:57.929 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:19:57.930 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:19:57.930 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:19:57.930 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:19:57.930 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:19:57.931 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:19:57.931 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:19:57.931 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:19:57.931 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:19:57.931 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:19:57.932 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:19:57.932 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:19:57.932 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:19:57.932 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:19:57.932 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:19:57.933 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 14:19:57.934 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 14:19:57.934 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 14:19:57.935 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 14:19:57.935 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 14:19:57.936 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 14:19:57.936 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 14:19:57.936 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 14:19:57.937 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 14:19:57.937 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 14:19:57.938 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 14:19:57.938 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 14:19:57.940 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 14:19:57.941 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 14:19:57.942 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 14:19:57.943 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 14:19:57.945 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 14:19:57.946 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 14:19:57.947 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 14:19:57.949 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 14:19:57.950 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 14:19:57.959 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 14:19:57.962 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 14:19:57.964 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 14:19:57.965 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 14:19:57.967 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 14:19:57.968 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 14:19:57.969 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 14:19:57.971 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 14:19:57.973 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 14:19:57.976 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 14:19:57.977 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 14:19:57.978 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 14:19:57.979 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 14:19:57.981 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 14:19:57.982 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 14:19:57.983 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 14:19:57.985 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 14:19:57.987 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 14:19:57.989 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 14:19:57.990 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 14:19:57.992 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 14:19:57.992 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 14:19:57.994 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 14:19:57.996 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 14:19:57.998 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 14:19:58.000 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 14:19:58.001 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 14:19:58.002 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 14:19:58.004 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 14:19:58.006 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 14:19:58.008 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 14:19:58.009 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 14:19:58.011 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 14:19:58.013 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 14:19:58.014 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 14:19:58.016 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 14:19:58.018 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 14:19:58.582 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:19:58.859 [Test worker] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 14:19:58.861 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:19:58.861 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:19:58.862 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:19:58.863 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:19:58.864 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:19:58.865 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:19:58.866 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:19:58.866 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:19:58.867 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:19:58.867 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:19:58.868 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:19:58.869 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:19:58.870 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:19:58.871 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:19:58.872 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:19:58.872 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:19:58.873 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:19:58.874 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:19:58.875 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:19:58.878 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:19:58.878 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:19:58.879 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:19:58.880 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:19:58.880 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:19:58.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:19:58.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:19:58.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:19:58.881 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:19:58.882 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:19:58.882 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:19:58.882 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:19:58.883 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:19:58.883 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:19:58.884 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-07-18 14:19:58.885 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-07-18 14:19:58.892 [Test worker] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 14:19:58.902 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.MessageControllerIntegrationTest@6b84f2be]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2e589efe testClass = com.backend.softtrainer.controllers.MessageControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@466e45bd key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 86 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 110 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 124 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 138 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 152 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 166 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 180 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311) ~[spring-beans-6.1.4.jar:6.1.4]
	... 192 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209) ~[na:na]
	at java.base/java.util.Optional.of(Optional.java:113) ~[na:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366) ~[jvm-openai-0.11.0.jar:na]
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343) ~[jvm-openai-0.11.0.jar:na]
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.1.4.jar:6.1.4]
	... 194 common frames omitted
2025-07-18 14:19:58.926 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.SkillControllerIntegrationTest@4137d7a8]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@8a75b3e testClass = com.backend.softtrainer.controllers.SkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@1918af74 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@82f2f0f8, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 14:19:58.933 [Test worker] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.backend.softtrainer.controllers.SkillControllerIntegrationTest@66e1d1a1]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@8a75b3e testClass = com.backend.softtrainer.controllers.SkillControllerIntegrationTest, locations = [], classes = [com.backend.softtrainer.SoftTrainerBackendApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@251f7d26, [ImportsContextCustomizer@1918af74 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@41c07648, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c11e6c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@82f2f0f8, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@238b521e, org.springframework.boot.test.context.SpringBootTestAnnotation@bd51911b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
2025-07-18 14:19:59.352 [Test worker] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/org.json/json/20090211/c183aa3a2a6250293808bba12262c8920ce5a51c/json-20090211.jar!/org/json/JSONObject.class
	jar:file:/Users/rkovalenko/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-07-18 14:19:59.353 [Test worker] INFO  c.b.s.i.AiGeneratedApiIntegrationTest - Starting AiGeneratedApiIntegrationTest using Java 17.0.13 with PID 75189 (started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:19:59.353 [Test worker] INFO  c.b.s.i.AiGeneratedApiIntegrationTest - The following 1 profile is active: "test"
2025-07-18 14:20:00.483 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-07-18 14:20:00.486 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:20:00.487 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-07-18 14:20:00.487 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:20:01.076 [Test worker] DEBUG org.hibernate.SQL - drop table if exists ai_overview cascade 
2025-07-18 14:20:01.076 [Test worker] DEBUG org.hibernate.SQL - drop table if exists characters cascade 
2025-07-18 14:20:01.077 [Test worker] DEBUG org.hibernate.SQL - drop table if exists chats cascade 
2025-07-18 14:20:01.077 [Test worker] DEBUG org.hibernate.SQL - drop table if exists contact_info cascade 
2025-07-18 14:20:01.077 [Test worker] DEBUG org.hibernate.SQL - drop table if exists enhanced_flow_nodes cascade 
2025-07-18 14:20:01.077 [Test worker] DEBUG org.hibernate.SQL - drop table if exists flow_node_dependencies cascade 
2025-07-18 14:20:01.077 [Test worker] DEBUG org.hibernate.SQL - drop table if exists hyperparams cascade 
2025-07-18 14:20:01.078 [Test worker] DEBUG org.hibernate.SQL - drop table if exists logins cascade 
2025-07-18 14:20:01.078 [Test worker] DEBUG org.hibernate.SQL - drop table if exists materials cascade 
2025-07-18 14:20:01.078 [Test worker] DEBUG org.hibernate.SQL - drop table if exists messages cascade 
2025-07-18 14:20:01.078 [Test worker] DEBUG org.hibernate.SQL - drop table if exists nodes cascade 
2025-07-18 14:20:01.078 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations cascade 
2025-07-18 14:20:01.078 [Test worker] DEBUG org.hibernate.SQL - drop table if exists organizations_skills cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists prompts cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists roles cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists simulations_nodes cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists skills_simulations cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_hyperparams cascade 
2025-07-18 14:20:01.079 [Test worker] DEBUG org.hibernate.SQL - drop table if exists user_roles cascade 
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop table if exists users cascade 
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists chats_seq
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists contact_info_seq
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists enhanced_flow_nodes_seq
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists hyperparams_seq
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists logins_seq
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists materials_seq
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists nodes_seq
2025-07-18 14:20:01.080 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists simulations_seq
2025-07-18 14:20:01.081 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists skills_seq
2025-07-18 14:20:01.081 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists user_hyperparams_seq
2025-07-18 14:20:01.081 [Test worker] DEBUG org.hibernate.SQL - drop sequence if exists users_seq
2025-07-18 14:20:01.081 [Test worker] DEBUG org.hibernate.SQL - create sequence chats_seq start with 1 increment by 50
2025-07-18 14:20:01.081 [Test worker] DEBUG org.hibernate.SQL - create sequence contact_info_seq start with 1 increment by 50
2025-07-18 14:20:01.082 [Test worker] DEBUG org.hibernate.SQL - create sequence enhanced_flow_nodes_seq start with 1 increment by 50
2025-07-18 14:20:01.082 [Test worker] DEBUG org.hibernate.SQL - create sequence hyperparams_seq start with 1 increment by 50
2025-07-18 14:20:01.082 [Test worker] DEBUG org.hibernate.SQL - create sequence logins_seq start with 1 increment by 50
2025-07-18 14:20:01.082 [Test worker] DEBUG org.hibernate.SQL - create sequence materials_seq start with 1 increment by 50
2025-07-18 14:20:01.082 [Test worker] DEBUG org.hibernate.SQL - create sequence nodes_seq start with 1 increment by 50
2025-07-18 14:20:01.083 [Test worker] DEBUG org.hibernate.SQL - create sequence simulations_seq start with 1 increment by 50
2025-07-18 14:20:01.083 [Test worker] DEBUG org.hibernate.SQL - create sequence skills_seq start with 1 increment by 50
2025-07-18 14:20:01.083 [Test worker] DEBUG org.hibernate.SQL - create sequence user_hyperparams_seq start with 1 increment by 50
2025-07-18 14:20:01.084 [Test worker] DEBUG org.hibernate.SQL - create sequence users_seq start with 1 increment by 50
2025-07-18 14:20:01.084 [Test worker] DEBUG org.hibernate.SQL - create table ai_overview (created_at timestamp(6), entity_id bigint, id bigint generated by default as identity, updated_at timestamp(6), entity_type varchar(255), llm_model varchar(255), overview_text TEXT, prompt_used TEXT, source varchar(255), overview_json TEXT, params_json TEXT, primary key (id))
2025-07-18 14:20:01.086 [Test worker] DEBUG org.hibernate.SQL - create table characters (flow_character_id bigint not null, id bigint generated by default as identity, avatar varchar(1000), name varchar(255), primary key (id))
2025-07-18 14:20:01.087 [Test worker] DEBUG org.hibernate.SQL - create table chats (hearts float(53), is_finished boolean not null, id bigint not null, simulation_id bigint, skill_id bigint, timestamp timestamp(6), user_id bigint, primary key (id))
2025-07-18 14:20:01.088 [Test worker] DEBUG org.hibernate.SQL - create table contact_info (id bigint not null, timestamp timestamp(6), request varchar(1000), contact varchar(255), name varchar(255), primary key (id))
2025-07-18 14:20:01.088 [Test worker] DEBUG org.hibernate.SQL - create table enhanced_flow_nodes (character_id_raw integer, correct_answer_position integer, has_hint boolean, character_id bigint, id bigint not null, message_id bigint not null, order_number bigint, response_time_limit bigint, simulation_id bigint, interaction_type varchar(255) check (interaction_type in ('TEXT_DISPLAY','SINGLE_CHOICE','MULTI_CHOICE','OPEN_TEXT','AI_ENHANCED_TEXT','MEDIA_CONTENT','AI_HINT','RESULT_SUMMARY','DYNAMIC_RESPONSE')), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), prompt TEXT, show_predicate TEXT, text TEXT, flow_rules TEXT, hyperparameter_actions TEXT, options TEXT, primary key (id))
2025-07-18 14:20:01.090 [Test worker] DEBUG org.hibernate.SQL - create table flow_node_dependencies (enhanced_flow_nodes_id bigint not null, previous_message_id bigint)
2025-07-18 14:20:01.090 [Test worker] DEBUG org.hibernate.SQL - create table hyperparams (max_value float(53), id bigint not null, simulation_id bigint, description varchar(255), "key" varchar(255), primary key (id))
2025-07-18 14:20:01.091 [Test worker] DEBUG org.hibernate.SQL - create table logins (id bigint not null, timestamp timestamp(6), user_id bigint, auth_type varchar(255) check (auth_type in ('SIGNUP','LOGIN')), auth_way varchar(255) check (auth_way in ('GOOGLE','BASIC')), ip_address varchar(255), platform varchar(255) check (platform in ('MOBILE','WEB')), primary key (id))
2025-07-18 14:20:01.091 [Test worker] DEBUG org.hibernate.SQL - create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))
2025-07-18 14:20:01.092 [Test worker] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id))" via JDBC [Unknown data type: "BLOB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.8.2.jar:1.8.2]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:119) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:94) ~[na:na]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:89) ~[na:na]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[na:na]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[na:na]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[na:na]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[na:na]
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[na:na]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[na:na]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113) ~[na:na]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65) ~[na:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:na]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:na]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "BLOB"; SQL statement:
create table materials (id bigint not null, skill_id bigint, file_name varchar(255), tag varchar(255), file_content blob, primary key (id)) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 131 common frames omitted
2025-07-18 14:20:01.098 [Test worker] DEBUG org.hibernate.SQL - create table messages (accessibility_mode boolean, allow_multiple boolean, allow_retry boolean, annotation_enabled boolean, auto_play boolean, auto_submit boolean, cache_duration_minutes integer, controls_visible boolean, delay_seconds integer, download_allowed boolean, duration_seconds integer, enable_ai_generation boolean, enable_hints boolean, enable_interactive_elements boolean, enable_lazy_loading boolean, enable_other_option boolean, enable_progressive_loading boolean, enable_variable_substitution boolean, fullscreen_enabled boolean, height_pixels integer, hint_delay_seconds integer, hint_threshold integer, include_emoji boolean, include_examples boolean, interacted boolean not null, is_voted boolean, loop_playback boolean, max_attempts integer, max_length integer, max_selections integer, min_length integer, min_selections integer, mobile_optimized boolean, quality_adaptive boolean, randomize_options boolean, regenerate_threshold float(53), show_progress boolean, time_limit_seconds integer, version integer, width_pixels integer, zoom_enabled boolean, character_id bigint, chat_id bigint, file_size_bytes bigint, flow_node_id bigint, prompt_id bigint, response_time_limit bigint, timestamp timestamp(6), user_response_time bigint, dtype varchar(31) not null, answer varchar(700), correct varchar(700), caption varchar(1000), instructions varchar(1000), question_text varchar(1000), content_template varchar(2000), fallback_content varchar(2000), options varchar(2000), content varchar(3000), ai_prompt_template varchar(255), alt_text varchar(255), animation_type varchar(255), based_message_id varchar(255), compression_level varchar(255), css_classes varchar(255), difficulty_level varchar(255), feedback_mode varchar(255), id varchar(255) not null, interaction_type varchar(255), layout_type varchar(255), learning_objective varchar(255), media_type varchar(255), media_url varchar(255), message_type varchar(255) check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), open_answer varchar(255), option_style varchar(255), other_option_text varchar(255), preview varchar(255), role varchar(255) check (role in ('USER','APP','CHARACTER','CHAT_GPT')), streaming_protocol varchar(255), text_format varchar(255) check (text_format in ('PLAIN_TEXT','MARKDOWN','HTML','FORMATTED_JSON','INTERACTIVE_TEXT')), thumbnail_url varchar(255), title varchar(255), tone_style varchar(255), accessibility_features json, ai_generation_params json, conditional_options json, context_requirements json, display_rules json, element_configuration json, format_options json, interactive_elements json, media_metadata json, personalization_rules json, scoring_criteria json, selected json, validation_rules json, variables json, primary key (id))
2025-07-18 14:20:01.101 [Test worker] DEBUG org.hibernate.SQL - create table nodes (has_hint boolean not null, character_id bigint, id bigint not null, order_number bigint not null, previous_order_number bigint not null, response_time_limit bigint, simulation_id bigint, dtype varchar(31) not null, correct varchar(700), options varchar(700), text varchar(700), prompt varchar(1500), message_type varchar(255) not null check (message_type in ('TEXT','SINGLE_CHOICE_QUESTION','SINGLE_CHOICE_TASK','MULTI_CHOICE_TASK','CONTENT_QUESTION','IMAGES','VIDEOS','ENTER_TEXT_QUESTION','RESULT_SIMULATION','HINT_MESSAGE','ENTER_TEXT_ANSWER','SINGLE_CHOICE_ANSWER','MULTI_CHOICE_ANSWER')), preview varchar(255), show_predicate varchar(255) not null, url varchar(255), flow_rules TEXT, primary key (id))
2025-07-18 14:20:01.103 [Test worker] DEBUG org.hibernate.SQL - create table organizations (id bigint not null, avatar varchar(255), localization varchar(255), name varchar(255), primary key (id))
2025-07-18 14:20:01.104 [Test worker] DEBUG org.hibernate.SQL - create table organizations_skills (organization_id bigint not null, skill_id bigint not null, primary key (organization_id, skill_id))
2025-07-18 14:20:01.105 [Test worker] DEBUG org.hibernate.SQL - create table prompts (is_on boolean, id bigint not null, assistant_id varchar(255), name varchar(255) check (name in ('SIMULATION_SUMMARY','SIMULATION_MESSAGE_HINT','OPEN_QUESTION_CLASSIFYING','PROFILE_AI_OVERVIEW','TEAM_AI_OVERVIEW')), prompt TEXT, primary key (id))
2025-07-18 14:20:01.106 [Test worker] DEBUG org.hibernate.SQL - create table roles (id bigint not null, name varchar(255) check (name in ('ROLE_ADMIN','ROLE_OWNER','ROLE_USER')), primary key (id))
2025-07-18 14:20:01.108 [Test worker] DEBUG org.hibernate.SQL - create table simulations (hearts float(53), is_open boolean, created_at timestamp(6), id bigint not null, skill_id bigint, avatar varchar(255), complexity varchar(255) check (complexity in ('MEDIUM','HARD','EASY')), name varchar(255), type varchar(255) not null check (type in ('PREDEFINED','AI_GENERATED')), primary key (id))
2025-07-18 14:20:01.109 [Test worker] DEBUG org.hibernate.SQL - create table simulations_nodes (nodes_id bigint not null unique, simulations_id bigint not null)
2025-07-18 14:20:01.110 [Test worker] DEBUG org.hibernate.SQL - create table skills (is_admin_hidden boolean not null, is_hidden boolean not null, is_protected boolean not null, simulation_count integer, id bigint not null, timestamp timestamp(6), name varchar(100), avatar varchar(1000), description varchar(20000), behavior varchar(255) check (behavior in ('STATIC','DYNAMIC')), generation_status varchar(255) check (generation_status in ('GENERATING','COMPLETED','FAILED')), type varchar(255) check (type in ('DEVELOPMENT','ASSESSMENT','MIX')), primary key (id))
2025-07-18 14:20:01.112 [Test worker] DEBUG org.hibernate.SQL - create table skills_simulations (simulations bigint, simulations_key bigint not null, skills_id bigint not null, primary key (simulations_key, skills_id))
2025-07-18 14:20:01.113 [Test worker] DEBUG org.hibernate.SQL - create table user_hyperparams ("value" float(53), chat_id bigint, id bigint not null, owner_id bigint, simulation_id bigint, updated_at timestamp(6), "key" varchar(255), primary key (id))
2025-07-18 14:20:01.114 [Test worker] DEBUG org.hibernate.SQL - create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
2025-07-18 14:20:01.115 [Test worker] DEBUG org.hibernate.SQL - create table users (id bigint not null, organization_id bigint, avatar varchar(255), department varchar(255), email varchar(255) unique, name varchar(255), password varchar(255), username varchar(255) unique, primary key (id))
2025-07-18 14:20:01.116 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK4887a78w22fs8esfi905qigcq foreign key (simulation_id) references simulations
2025-07-18 14:20:01.118 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FK1d9jx2d0trjiy307kry71p8uj foreign key (skill_id) references skills
2025-07-18 14:20:01.120 [Test worker] DEBUG org.hibernate.SQL - alter table if exists chats add constraint FKmolqi1xj49bg3jjr33674limy foreign key (user_id) references users
2025-07-18 14:20:01.122 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FK4gonpcnc47j3a4270gkxtceia foreign key (character_id) references characters
2025-07-18 14:20:01.123 [Test worker] DEBUG org.hibernate.SQL - alter table if exists enhanced_flow_nodes add constraint FKjxu0rxki8hehp4hb04ru9dog5 foreign key (simulation_id) references simulations
2025-07-18 14:20:01.125 [Test worker] DEBUG org.hibernate.SQL - alter table if exists flow_node_dependencies add constraint FKlmgcbsxlyud79hrdbbu7omdua foreign key (enhanced_flow_nodes_id) references enhanced_flow_nodes
2025-07-18 14:20:01.126 [Test worker] DEBUG org.hibernate.SQL - alter table if exists logins add constraint FKfpt7v1v7qgn7x5bj76qse0pl2 foreign key (user_id) references users
2025-07-18 14:20:01.128 [Test worker] DEBUG org.hibernate.SQL - alter table if exists materials add constraint FKffxbs2ayf0hmvvp1linf7g14 foreign key (skill_id) references skills
2025-07-18 14:20:01.128 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKsieokekcgi9yij6u7yil5u7p9 foreign key (character_id) references characters
2025-07-18 14:20:01.129 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FK64w44ngcpqp99ptcb9werdfmb foreign key (chat_id) references chats
2025-07-18 14:20:01.129 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKel8khldmxumv9lr4yjlav91dh foreign key (flow_node_id) references nodes
2025-07-18 14:20:01.130 [Test worker] DEBUG org.hibernate.SQL - alter table if exists messages add constraint FKi2unxv0omc2v3br7smujqygfs foreign key (prompt_id) references prompts
2025-07-18 14:20:01.131 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKpqu3lgvgytdj03kwhjil9qed foreign key (character_id) references characters
2025-07-18 14:20:01.132 [Test worker] DEBUG org.hibernate.SQL - alter table if exists nodes add constraint FKitqoyeoybai5ec0b20wgu0hbi foreign key (simulation_id) references simulations
2025-07-18 14:20:01.133 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK7ci3wpidotud3u9bfq43hhm3r foreign key (skill_id) references skills
2025-07-18 14:20:01.134 [Test worker] DEBUG org.hibernate.SQL - alter table if exists organizations_skills add constraint FK1w74kc4928r1idv2cu0v5qk5u foreign key (organization_id) references organizations
2025-07-18 14:20:01.135 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations add constraint FKin16x0secqtu9vsjub82xy07v foreign key (skill_id) references skills
2025-07-18 14:20:01.136 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FK6t1bbkfk1ad4yth05my3a8ohh foreign key (nodes_id) references nodes
2025-07-18 14:20:01.137 [Test worker] DEBUG org.hibernate.SQL - alter table if exists simulations_nodes add constraint FKr1usbi1j4bfg838kksugx0woh foreign key (simulations_id) references simulations
2025-07-18 14:20:01.138 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKldei49123orkkqgoe0kst4cul foreign key (simulations_key) references simulations
2025-07-18 14:20:01.139 [Test worker] DEBUG org.hibernate.SQL - alter table if exists skills_simulations add constraint FKahrf8pr7beui7aqs507f49990 foreign key (skills_id) references skills
2025-07-18 14:20:01.140 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles
2025-07-18 14:20:01.141 [Test worker] DEBUG org.hibernate.SQL - alter table if exists user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references users
2025-07-18 14:20:01.142 [Test worker] DEBUG org.hibernate.SQL - alter table if exists users add constraint FKqpugllwvyv37klq7ft9m8aqxk foreign key (organization_id) references organizations
2025-07-18 14:20:01.521 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:20:02.170 [Test worker] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 14:20:03.577 [Test worker] INFO  c.b.s.i.AiGeneratedApiIntegrationTest - Started AiGeneratedApiIntegrationTest in 4.256 seconds (process running for 26.698)
2025-07-18 14:20:03.723 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 14:20:03.723 [scheduling-1] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s1_0.timestamp,s1_0.type from skills s1_0 where s1_0.generation_status in (?) and s1_0.timestamp<?
2025-07-18 14:20:03.861 [Test worker] DEBUG org.hibernate.SQL - select o1_0.id,as1_0.organization_id,as1_1.id,as1_1.avatar,as1_1.behavior,as1_1.description,as1_1.generation_status,as1_1.is_admin_hidden,as1_1.is_hidden,as1_1.is_protected,as1_1.name,as1_1.simulation_count,s1_0.skills_id,s1_1.id,s1_1.avatar,s1_1.complexity,s1_1.created_at,s1_1.hearts,s1_1.is_open,s1_1.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s2_0.timestamp,s2_0.type,s1_1.type,s1_0.simulations,as1_1.timestamp,as1_1.type,o1_0.avatar,o1_0.localization,o1_0.name from organizations o1_0 left join organizations_skills as1_0 on o1_0.id=as1_0.organization_id left join skills as1_1 on as1_1.id=as1_0.skill_id left join skills_simulations s1_0 on as1_1.id=s1_0.skills_id left join simulations s1_1 on s1_1.id=s1_0.simulations_key left join skills s2_0 on s2_0.id=s1_1.skill_id where o1_0.id=?
2025-07-18 14:20:03.950 [Test worker] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-07-18 14:20:04.005 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.behavior,s1_0.description,s1_0.generation_status,s1_0.is_admin_hidden,s1_0.is_hidden,s1_0.is_protected,s1_0.name,s1_0.simulation_count,s2_0.skills_id,s2_1.id,s2_1.avatar,s2_1.complexity,s2_1.created_at,s2_1.hearts,s2_1.is_open,s2_1.name,s3_0.id,s3_0.avatar,s3_0.behavior,s3_0.description,s3_0.generation_status,s3_0.is_admin_hidden,s3_0.is_hidden,s3_0.is_protected,s3_0.name,s3_0.simulation_count,s3_0.timestamp,s3_0.type,s2_1.type,s2_0.simulations,s1_0.timestamp,s1_0.type from skills s1_0 left join skills_simulations s2_0 on s1_0.id=s2_0.skills_id left join simulations s2_1 on s2_1.id=s2_0.simulations_key left join skills s3_0 on s3_0.id=s2_1.skill_id where s1_0.id=?
2025-07-18 14:20:04.013 [Test worker] DEBUG org.hibernate.SQL - select next value for skills_seq
2025-07-18 14:20:04.065 [Test worker] DEBUG org.hibernate.SQL - insert into skills (avatar,behavior,description,generation_status,is_admin_hidden,is_hidden,is_protected,name,simulation_count,timestamp,type,id) values (?,?,?,?,?,?,?,?,?,localtimestamp,?,?)
2025-07-18 14:20:04.070 [Test worker] DEBUG org.hibernate.SQL - select s1_0.timestamp from skills s1_0 where s1_0.id=?
2025-07-18 14:20:04.083 [Test worker] DEBUG org.hibernate.SQL - select s1_0.id,s1_0.avatar,s1_0.complexity,s1_0.created_at,s1_0.hearts,s1_0.is_open,s1_0.name,s2_0.id,s2_0.avatar,s2_0.behavior,s2_0.description,s2_0.generation_status,s2_0.is_admin_hidden,s2_0.is_hidden,s2_0.is_protected,s2_0.name,s2_0.simulation_count,s3_0.skills_id,s3_1.id,s3_1.avatar,s3_1.complexity,s3_1.created_at,s3_1.hearts,s3_1.is_open,s3_1.name,s3_1.type,s3_0.simulations,s2_0.timestamp,s2_0.type,s1_0.type from simulations s1_0 left join skills s2_0 on s2_0.id=s1_0.skill_id left join skills_simulations s3_0 on s2_0.id=s3_0.skills_id left join simulations s3_1 on s3_1.id=s3_0.simulations_key where s1_0.id=?
2025-07-18 14:20:04.086 [Test worker] DEBUG org.hibernate.SQL - select next value for simulations_seq
2025-07-18 14:20:04.094 [Test worker] DEBUG org.hibernate.SQL - insert into simulations (avatar,complexity,created_at,hearts,is_open,name,skill_id,type,id) values (?,?,localtimestamp,?,?,?,?,?,?)
2025-07-18 14:20:04.103 [Test worker] DEBUG org.hibernate.SQL - select s1_0.created_at from simulations s1_0 where s1_0.id=?
2025-07-18 14:20:04.119 [Test worker] DEBUG org.hibernate.SQL - insert into organizations_skills (organization_id,skill_id) values (?,?)
2025-07-18 14:20:04.128 [Test worker] DEBUG org.hibernate.SQL - insert into skills_simulations (skills_id,simulations_key,simulations) values (?,?,?)
2025-07-18 14:20:04.269 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,u1_0.username from users u1_0 where u1_0.email=?
2025-07-18 14:20:04.271 [Test worker] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1
2025-07-18 14:20:04.282 [Test worker] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar,u1_0.department,u1_0.email,u1_0.name,u1_0.organization_id,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from users u1_0 join user_roles r1_0 on u1_0.id=r1_0.user_id join roles r1_1 on r1_1.id=r1_0.role_id where u1_0.email=?
2025-07-18 14:20:04.288 [Test worker] DEBUG org.hibernate.SQL - select next value for chats_seq
2025-07-18 14:20:04.289 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 1 for simulation: AI Leadership Simulation (ID: 1) on thread: Test worker
2025-07-18 14:20:04.289 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building context from existing chat: 1 on thread: Test worker
2025-07-18 14:20:04.289 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🏗️ Building initial context for chat: 1
2025-07-18 14:20:04.290 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 🤖 No specific nodes detected, using DYNAMIC mode
2025-07-18 14:20:04.291 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - 📈 Loading hyperparameters for chat: 1
2025-07-18 14:20:04.293 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.295 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 14:20:04.295 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 14:20:04.298 [Test worker] DEBUG org.hibernate.SQL - insert into chats (hearts,is_finished,simulation_id,skill_id,timestamp,user_id,id) values (?,?,?,?,localtimestamp,?,?)
2025-07-18 14:20:04.298 [Test worker] DEBUG org.hibernate.SQL - select c1_0.timestamp from chats c1_0 where c1_0.id=?
2025-07-18 14:20:04.299 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 14:20:04.300 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.300 [Test worker] DEBUG org.hibernate.SQL - select next value for user_hyperparams_seq
2025-07-18 14:20:04.300 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 14:20:04.302 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 14:20:04.303 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.304 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 14:20:04.305 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 14:20:04.306 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.306 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter active_listening: 0.0
2025-07-18 14:20:04.309 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.309 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter empathy: 0.0
2025-07-18 14:20:04.311 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.312 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter engagement: 0.0
2025-07-18 14:20:04.315 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.316 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter collaboration: 0.0
2025-07-18 14:20:04.318 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 14:20:04.319 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.320 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter feedback_delivery: 0.0
2025-07-18 14:20:04.323 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 14:20:04.324 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.325 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter goal_setting: 0.0
2025-07-18 14:20:04.327 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 14:20:04.327 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:04.328 [Test worker] DEBUG c.b.s.s.context.SimulationContext - 📈 Updated hyperparameter joint_decision_making: 0.0
2025-07-18 14:20:04.328 [Test worker] DEBUG c.b.s.s.c.SimulationContextBuilder - ✅ Built context with 0 messages and 7 hyperparameters
2025-07-18 14:20:04.329 [Test worker] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: AI Leadership Simulation
2025-07-18 14:20:04.329 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: AI Leadership Simulation
2025-07-18 14:20:04.330 [Test worker] DEBUG c.b.s.s.v.SimulationCompatibilityValidator - ✅ AI-generated simulation AI Leadership Simulation passed validation
2025-07-18 14:20:04.330 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:20:04.331 [Test worker] DEBUG c.b.s.s.e.SimulationEngineFactory - 🤖 Creating AI-generated simulation engine
2025-07-18 14:20:04.331 [Test worker] INFO  c.b.s.s.e.SimulationEngineFactory - ✅ Created AiGeneratedSimulationEngine$$SpringCGLIB$$0 engine for type: AI_GENERATED
2025-07-18 14:20:04.331 [Test worker] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 1
2025-07-18 14:20:04.333 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - No skill materials found for context: 1
2025-07-18 14:20:04.333 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 14:20:04.333 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 14:20:04.333 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 14:20:04.334 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 14:20:04.334 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 14:20:04.334 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 14:20:04.334 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 14:20:04.351 [Test worker] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 1: {"simulation_id":"1","chat_id":"1","skill":{"name":"AI Leadership Training","description":"Advanced AI-powered leadership development","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":3},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"AI Leadership Simulation","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":null,"experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":null,"experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 14:20:04.352 [Test worker] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://16.171.20.54:8000/create-chat with simulation_id: 1
2025-07-18 14:20:04.353 [Test worker] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://16.171.20.54:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:20:08.003 [Test worker] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 3647ms (attempt 1/3)
2025-07-18 14:20:08.019 [Test worker] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to the AI Leadership Simulation! In this scenario, you will be navigating a series of challenges and opportunities as a leader in the field of artificial intelligence.","options":null,"character_name":"Simulation Guide","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"You are now stepping into the role of an AI team manager at a tech organization. Your team is working on a cutting-edge AI project that requires strong leadership and decision-making skills.","options":null,"character_name":"Simulation Guide","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"SingleChoiceQuestion","content":"Your team is facing a critical deadline for the AI project. How do you prioritize tasks to ensure timely delivery?","options":["Delegate tasks based on team members' strengths","Take on all tasks yourself to ensure quality"],"character_name":"Simulation Guide","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":"Consider the importance of delegation and leveraging team strengths in achieving project goals.","correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"skill_name":0.1},"conversation_ended":false,"end_reason":null,"generation_metadata":{"context":"initialization","operation":"create_chat","simulation_id":"1","chat_id":"1","provider":"openai","prompt_version":"v1.0"},"success":true,"error_message":null}
2025-07-18 14:20:08.020 [Test worker] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 14:20:08.021 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 14:20:08.021 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 14:20:08.021 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 14:20:08.021 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 14:20:08.022 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='SingleChoiceQuestion', requires_response=true
2025-07-18 14:20:08.022 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='SingleChoiceQuestion' correctly has requires_response=true
2025-07-18 14:20:08.022 [Test worker] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 14:20:08.028 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to the AI Le...'
2025-07-18 14:20:08.029 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='You are now stepping...'
2025-07-18 14:20:08.031 [Test worker] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='SingleChoiceQuestion', content='Your team is facing ...'
2025-07-18 14:20:08.033 [Test worker] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 14:20:08.051 [Test worker] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1: {"messages":[{"message_type":"Text","content":"Welcome to the AI Leadership Simulation! In this scenario, you will be navigating a series of challenges and opportunities as a leader in the field of artificial intelligence.","options":null,"character_name":"Simulation Guide","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"You are now stepping into the role of an AI team manager at a tech organization. Your team is working on a cutting-edge AI project that requires strong leadership and decision-making skills.","options":null,"character_name":"Simulation Guide","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"SingleChoiceQuestion","content":"Your team is facing a critical deadline for the AI project. How do you prioritize tasks to ensure timely delivery?","options":["Delegate tasks based on team members' strengths","Take on all tasks yourself to ensure quality"],"character_name":"Simulation Guide","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":"Consider the importance of delegation and leveraging team strengths in achieving project goals.","correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"skill_name":0.1},"conversation_ended":false,"end_reason":null,"generation_metadata":{"context":"initialization","operation":"create_chat","simulation_id":"1","chat_id":"1","provider":"openai","prompt_version":"v1.0"},"success":true,"error_message":null}
2025-07-18 14:20:08.053 [Test worker] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 3 messages for simulation: 1
2025-07-18 14:20:08.061 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: Simulation Guide, using null for now
2025-07-18 14:20:08.062 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: Simulation Guide, using null for now
2025-07-18 14:20:08.063 [Test worker] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: Simulation Guide, using null for now
2025-07-18 14:20:08.082 [Test worker] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: skill_name for the chatId: 1 to the value: 0.1
2025-07-18 14:20:08.091 [Test worker] DEBUG org.hibernate.SQL - insert into user_hyperparams (chat_id,"key",owner_id,simulation_id,updated_at,"value",id) values (?,?,?,?,?,?,?)
2025-07-18 14:20:08.092 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 14:20:08.103 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 14:20:08.120 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,content,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,'TextMessage',?)
2025-07-18 14:20:08.122 [Test worker] DEBUG org.hibernate.SQL - select tm1_0.timestamp from messages tm1_0 where tm1_0.dtype='TextMessage' and tm1_0.id=?
2025-07-18 14:20:08.123 [Test worker] DEBUG org.hibernate.SQL - insert into messages (character_id,chat_id,flow_node_id,interacted,message_type,response_time_limit,role,timestamp,user_response_time,version,answer,correct,options,dtype,id) values (?,?,?,?,?,?,?,localtimestamp,?,?,?,?,?,'SingleChoiceQuestionMessage',?)
2025-07-18 14:20:08.156 [Test worker] DEBUG org.hibernate.SQL - select scqm1_0.timestamp from messages scqm1_0 where scqm1_0.dtype='SingleChoiceQuestionMessage' and scqm1_0.id=?
2025-07-18 14:20:08.158 [Test worker] DEBUG org.hibernate.SQL - select uhp1_0.id,uhp1_0.chat_id,uhp1_0."key",uhp1_0.owner_id,uhp1_0.simulation_id,uhp1_0.updated_at,uhp1_0."value" from user_hyperparams uhp1_0 where uhp1_0.chat_id=? and uhp1_0."key"=?
2025-07-18 14:20:08.159 [Test worker] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: skill_name wasn't found for the chatId: 1
2025-07-18 14:20:08.159 [Test worker] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 3 messages
2025-07-18 14:20:08.160 [Test worker] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using AI_GENERATED engine
2025-07-18 14:20:08.178 [Test worker] DEBUG org.hibernate.SQL - select hp1_0."key" from hyperparams hp1_0 where hp1_0.simulation_id=?
2025-07-18 14:20:08.181 [Test worker] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1
2025-07-18 14:20:08.185 [Test worker] DEBUG org.hibernate.SQL - select u1_0.email from users u1_0 where u1_0.id=?
2025-07-18 14:20:08.187 [Test worker] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: test-admin
2025-07-18 14:20:08.187 [Test worker] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: test-admin (bulk insert)
2025-07-18 14:20:08.187 [Test worker] INFO  c.b.s.controllers.ChatController - Chat 1 created for user 1 and simulation 1 using dual-mode runtime
2025-07-18 14:20:08.187 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=1 | message_count=3
2025-07-18 14:20:08.187 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to the AI Leadership Simulation! In this scenario, you will be navigating a series of challe..."
2025-07-18 14:20:08.188 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="You are now stepping into the role of an AI team manager at a tech organization. Your team is workin..."
2025-07-18 14:20:08.192 [Test worker] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=SINGLE_CHOICE_QUESTION | content="null" | options=[MessageAnswerOptionDto(optionId=0728ae8e-b294-4467-9e6d-38f3c91994c3, text=Delegate tasks based on team members' strengths, isSelected=false), MessageAnswerOptionDto(optionId=2572015e-4f0d-424f-b6c6-53e3dd093e56, text=Take on all tasks yourself to ensure quality, isSelected=false)]
2025-07-18 14:20:24.712 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 77311 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:20:24.715 [main] INFO  c.b.s.SoftTrainerBackendApplication - The following 1 profile is active: "test"
2025-07-18 14:20:27.240 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:20:27.240 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:20:27.315 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:20:27.901 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:20:28.103 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:20:28.105 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 14:20:28.124 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:20:34.636 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:20:36.069 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 14:20:36.140 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 14:20:36.150 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 14:20:36.157 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-18 14:20:36.287 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 47 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 61 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 75 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 89 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311)
	... 101 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209)
	at java.base/java.util.Optional.of(Optional.java:113)
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366)
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343)
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 103 common frames omitted
2025-07-18 14:21:20.938 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 77714 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:21:20.944 [main] INFO  c.b.s.SoftTrainerBackendApplication - The following 1 profile is active: "test"
2025-07-18 14:21:24.904 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:21:24.905 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:21:25.026 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:21:26.100 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:21:26.515 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:21:26.517 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 14:21:26.570 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:21:32.246 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:21:32.913 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
2025-07-18 14:21:32.935 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-18 14:21:32.937 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-18 14:21:32.938 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-18 14:21:32.987 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatController' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/controllers/ChatController.class]: Unsatisfied dependency expressed through constructor parameter 11: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dualModeSimulationRuntime' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/DualModeSimulationRuntime.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simulationEngineFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/SimulationEngineFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'legacySimulationEngine' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/simulation/engine/LegacySimulationEngine.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 47 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageServiceFactory' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageServiceFactory.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 61 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'inputMessageService' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/InputMessageService.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 75 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chatGptServiceJvmOpenAi' defined in file [/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main/com/backend/softtrainer/services/chatgpt/ChatGptServiceJvmOpenAi.class]: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1317)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1202)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 89 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi]: Constructor threw exception
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1311)
	... 101 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:209)
	at java.base/java.util.Optional.of(Optional.java:113)
	at io.github.stefanbratanov.jvm.openai.OpenAI$Builder.apiKey(OpenAI.java:366)
	at io.github.stefanbratanov.jvm.openai.OpenAI.newBuilder(OpenAI.java:343)
	at com.backend.softtrainer.services.chatgpt.ChatGptServiceJvmOpenAi.<init>(ChatGptServiceJvmOpenAi.java:40)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)
	... 103 common frames omitted
2025-07-18 14:22:14.198 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 78070 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 14:22:14.200 [main] INFO  c.b.s.SoftTrainerBackendApplication - The following 1 profile is active: "test"
2025-07-18 14:22:15.870 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 14:22:15.871 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 14:22:15.930 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 14:22:16.514 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 14:22:16.801 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-07-18 14:22:16.807 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 14:22:16.867 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-18 14:22:20.498 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 14:22:20.966 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 14:22:20.966 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 14:22:21.450 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 14:22:23.431 [main] INFO  o.a.t.u.net.NioEndpoint.certificate - Connector [https-jsse-nio-8443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [/Users/rkovalenko/.keystore] using alias [tomcat] with trust store [null]
2025-07-18 14:22:23.453 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 9.696 seconds (process running for 10.063)
2025-07-18 14:45:06.474 [http-nio-8080-exec-7] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 14:45:07.564 [http-nio-8080-exec-7] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14153 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-7
2025-07-18 14:45:35.446 [http-nio-8080-exec-7] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:45:35.452 [http-nio-8080-exec-7] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:45:35.459 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:45:35.484 [http-nio-8080-exec-7] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14153
2025-07-18 14:45:35.508 [http-nio-8080-exec-7] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14153: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 14:45:35.511 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 14:45:35.530 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 14:45:35.541 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 14:45:35.548 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 14:45:35.552 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 14:45:35.554 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 14:45:35.555 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 14:45:36.096 [http-nio-8080-exec-7] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14153: {"simulation_id":"1952","chat_id":"14153","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 14:45:36.107 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 14:45:36.109 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:45:40.285 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 4160ms (attempt 1/3)
2025-07-18 14:45:40.337 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"5f459f56-22c9-4b2a-8c23-bf81f9d1cd9e","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:45:40.347 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 14:45:40.349 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 14:45:40.352 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 14:45:40.353 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 14:45:40.354 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 14:45:40.354 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 14:45:40.355 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 14:45:40.358 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 14:45:40.459 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to your prof...'
2025-07-18 14:45:40.467 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='In this Professional...'
2025-07-18 14:45:40.468 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='null...'
2025-07-18 14:45:40.473 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 14:45:40.482 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"5f459f56-22c9-4b2a-8c23-bf81f9d1cd9e","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:45:40.487 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 3 messages for simulation: 1952
2025-07-18 14:45:40.521 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:45:40.522 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:45:40.528 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:46:02.387 [scheduling-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6a1e654 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 14:46:20.482 [http-nio-8080-exec-7] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: empathy for the chatId: 14153 to the value: 0.8
2025-07-18 14:46:20.626 [http-nio-8080-exec-7] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: directness for the chatId: 14153 to the value: 0.6
2025-07-18 14:46:21.563 [http-nio-8080-exec-7] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: directness wasn't found for the chatId: 14153
2025-07-18 14:46:21.564 [http-nio-8080-exec-7] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 3 messages
2025-07-18 14:46:21.682 [http-nio-8080-exec-7] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using AI_GENERATED engine
2025-07-18 14:46:22.008 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 14:46:22.304 [http-nio-8080-exec-7] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 14:46:22.304 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 14:46:22.304 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - Chat 14153 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 14:46:22.304 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14153 | message_count=3
2025-07-18 14:46:22.304 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you th..."
2025-07-18 14:46:22.304 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="In this Professional Services scenario, you'll face a complex situation where your ability to naviga..."
2025-07-18 14:46:22.304 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=ENTER_TEXT_QUESTION | content="AI-generated enter text question"
2025-07-18 14:47:12.779 [http-nio-8080-exec-10] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 14:47:14.758 [http-nio-8080-exec-8] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 14:47:15.478 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14154 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-10
2025-07-18 14:47:16.221 [http-nio-8080-exec-8] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14155 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-8
2025-07-18 14:47:18.316 [http-nio-8080-exec-10] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:47:18.317 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:47:18.318 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:47:18.319 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14154
2025-07-18 14:47:18.320 [http-nio-8080-exec-10] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14154: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 14:47:18.321 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 14:47:18.321 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 14:47:18.321 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 14:47:18.321 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 14:47:18.322 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 14:47:18.322 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 14:47:18.322 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 14:47:18.352 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14154: {"simulation_id":"1952","chat_id":"14154","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 14:47:18.355 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 14:47:18.356 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:47:18.555 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 198ms (attempt 1/3)
2025-07-18 14:47:18.570 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"81d6f7d3-5bd7-486e-a385-7fcbee6c438d","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:47:18.572 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 14:47:18.572 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 14:47:18.572 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 14:47:18.572 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 14:47:18.573 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 14:47:18.574 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 14:47:18.574 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 14:47:18.574 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 14:47:18.577 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to your prof...'
2025-07-18 14:47:18.583 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='In this Professional...'
2025-07-18 14:47:18.584 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='null...'
2025-07-18 14:47:18.584 [http-nio-8080-exec-10] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 14:47:18.593 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"81d6f7d3-5bd7-486e-a385-7fcbee6c438d","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:47:18.594 [http-nio-8080-exec-10] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 3 messages for simulation: 1952
2025-07-18 14:47:18.595 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:47:18.596 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:47:18.596 [http-nio-8080-exec-10] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:47:18.714 [http-nio-8080-exec-8] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:47:18.714 [http-nio-8080-exec-8] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:47:18.715 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:47:18.715 [http-nio-8080-exec-8] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14155
2025-07-18 14:47:18.716 [http-nio-8080-exec-8] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14155: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 14:47:18.716 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 14:47:18.716 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 14:47:18.716 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 14:47:18.716 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 14:47:18.716 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 14:47:18.717 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 14:47:18.717 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 14:47:18.724 [http-nio-8080-exec-8] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14155: {"simulation_id":"1952","chat_id":"14155","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 14:47:18.725 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 14:47:18.725 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:47:18.909 [http-nio-8080-exec-8] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 184ms (attempt 1/3)
2025-07-18 14:47:18.917 [http-nio-8080-exec-8] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"2cd40a33-68fd-48b0-9b4c-4550dad6a831","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:47:18.921 [http-nio-8080-exec-8] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 14:47:18.921 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 14:47:18.921 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 14:47:18.922 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 14:47:18.922 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 14:47:18.922 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 14:47:18.922 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 14:47:18.922 [http-nio-8080-exec-8] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 14:47:18.924 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to your prof...'
2025-07-18 14:47:18.924 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='In this Professional...'
2025-07-18 14:47:18.924 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='null...'
2025-07-18 14:47:18.924 [http-nio-8080-exec-8] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 14:47:18.968 [http-nio-8080-exec-8] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"2cd40a33-68fd-48b0-9b4c-4550dad6a831","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:47:18.969 [http-nio-8080-exec-8] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 3 messages for simulation: 1952
2025-07-18 14:47:18.970 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:47:18.970 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:47:18.970 [http-nio-8080-exec-8] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:47:21.537 [http-nio-8080-exec-10] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: empathy for the chatId: 14154 to the value: 0.8
2025-07-18 14:47:21.661 [http-nio-8080-exec-10] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: directness for the chatId: 14154 to the value: 0.6
2025-07-18 14:47:21.931 [http-nio-8080-exec-8] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: empathy for the chatId: 14155 to the value: 0.8
2025-07-18 14:47:22.024 [http-nio-8080-exec-8] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: directness for the chatId: 14155 to the value: 0.6
2025-07-18 14:47:22.441 [http-nio-8080-exec-10] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: directness wasn't found for the chatId: 14154
2025-07-18 14:47:22.441 [http-nio-8080-exec-10] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 3 messages
2025-07-18 14:47:22.583 [http-nio-8080-exec-10] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using AI_GENERATED engine
2025-07-18 14:47:22.703 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 14:47:22.747 [http-nio-8080-exec-8] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: directness wasn't found for the chatId: 14155
2025-07-18 14:47:22.747 [http-nio-8080-exec-8] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 3 messages
2025-07-18 14:47:22.830 [http-nio-8080-exec-10] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 14:47:22.831 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 14:47:22.831 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - Chat 14154 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 14:47:22.831 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14154 | message_count=3
2025-07-18 14:47:22.832 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you th..."
2025-07-18 14:47:22.833 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="In this Professional Services scenario, you'll face a complex situation where your ability to naviga..."
2025-07-18 14:47:22.833 [http-nio-8080-exec-10] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=ENTER_TEXT_QUESTION | content="AI-generated enter text question"
2025-07-18 14:47:22.866 [http-nio-8080-exec-8] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using AI_GENERATED engine
2025-07-18 14:47:23.029 [http-nio-8080-exec-8] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 14:47:23.204 [http-nio-8080-exec-8] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 14:47:23.205 [http-nio-8080-exec-8] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 14:47:23.205 [http-nio-8080-exec-8] INFO  c.b.s.controllers.ChatController - Chat 14155 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 14:47:23.206 [http-nio-8080-exec-8] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14155 | message_count=3
2025-07-18 14:47:23.207 [http-nio-8080-exec-8] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you th..."
2025-07-18 14:47:23.209 [http-nio-8080-exec-8] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="In this Professional Services scenario, you'll face a complex situation where your ability to naviga..."
2025-07-18 14:47:23.209 [http-nio-8080-exec-8] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=ENTER_TEXT_QUESTION | content="AI-generated enter text question"
2025-07-18 14:54:08.867 [http-nio-8080-exec-9] INFO  c.b.s.services.SkillService - Skill 452 is present 
2025-07-18 14:54:09.848 [http-nio-8080-exec-9] INFO  c.b.s.services.SkillService - For simulation 1252 with the order 2 there are 0 chats
2025-07-18 14:54:09.848 [http-nio-8080-exec-9] INFO  c.b.s.services.SkillService - For simulation 1902 with the order 2 there are 2 chats
2025-07-18 14:54:09.849 [http-nio-8080-exec-9] INFO  c.b.s.services.SkillService - At least one completed chat: false for simulation 1902
2025-07-18 14:54:09.850 [http-nio-8080-exec-9] INFO  c.b.s.services.SkillService - Simulation 1252 is available true
2025-07-18 14:54:09.901 [http-nio-8080-exec-9] INFO  c.b.s.services.SkillService - Simulation 1902 is available true
2025-07-18 14:54:16.368 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - Skill 1602 is present 
2025-07-18 14:54:18.623 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - For simulation 1802 with the order 1 there are 1 chats
2025-07-18 14:54:18.623 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - At least one completed chat: false for simulation 1802
2025-07-18 14:54:18.623 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - For simulation 1803 with the order 2 there are 0 chats
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - For simulation 1804 with the order 3 there are 0 chats
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - For simulation 1805 with the order 4 there are 0 chats
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - For simulation 1806 with the order 5 there are 0 chats
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - Simulation 1802 is available true
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - Simulation 1803 is available false
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - Simulation 1804 is available false
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - Simulation 1805 is available false
2025-07-18 14:54:18.624 [http-nio-8080-exec-8] INFO  c.b.s.services.SkillService - Simulation 1806 is available false
2025-07-18 14:54:21.039 [http-nio-8080-exec-4] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@50628142 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 14:54:24.214 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Skill 1703 is present 
2025-07-18 14:54:24.290 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - For simulation 1955 with the order 1 there are 0 chats
2025-07-18 14:54:24.290 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - For simulation 1956 with the order 2 there are 0 chats
2025-07-18 14:54:24.290 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - For simulation 1957 with the order 3 there are 0 chats
2025-07-18 14:54:24.290 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Simulation 1955 is available true
2025-07-18 14:54:24.291 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Simulation 1956 is available false
2025-07-18 14:54:24.291 [http-nio-8080-exec-2] INFO  c.b.s.services.SkillService - Simulation 1957 is available false
2025-07-18 14:54:24.782 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - Skill 502 is present 
2025-07-18 14:54:25.126 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - Skill 1702 is present 
2025-07-18 14:54:25.505 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - For simulation 902 with the order 1 there are 186 chats
2025-07-18 14:54:25.505 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - At least one completed chat: true for simulation 902
2025-07-18 14:54:25.506 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - For simulation 1002 with the order 2 there are 17 chats
2025-07-18 14:54:25.506 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - At least one completed chat: false for simulation 1002
2025-07-18 14:54:25.506 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - For simulation 1003 with the order 3 there are 1 chats
2025-07-18 14:54:25.506 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - At least one completed chat: false for simulation 1003
2025-07-18 14:54:25.506 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - Simulation 902 is available true
2025-07-18 14:54:25.506 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - Simulation 1002 is available true
2025-07-18 14:54:25.506 [http-nio-8080-exec-4] INFO  c.b.s.services.SkillService - Simulation 1003 is available true
2025-07-18 14:54:26.845 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - For simulation 1952 with the order 1 there are 47 chats
2025-07-18 14:54:26.845 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - At least one completed chat: false for simulation 1952
2025-07-18 14:54:26.846 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - For simulation 1953 with the order 2 there are 0 chats
2025-07-18 14:54:26.846 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - For simulation 1954 with the order 3 there are 0 chats
2025-07-18 14:54:26.846 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - Simulation 1952 is available true
2025-07-18 14:54:26.846 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - Simulation 1953 is available false
2025-07-18 14:54:26.846 [http-nio-8080-exec-6] INFO  c.b.s.services.SkillService - Simulation 1954 is available false
2025-07-18 14:54:32.511 [http-nio-8080-exec-7] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 14:54:34.608 [http-nio-8080-exec-7] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14156 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-7
2025-07-18 14:54:38.548 [http-nio-8080-exec-7] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:54:38.549 [http-nio-8080-exec-7] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:54:38.552 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:54:38.553 [http-nio-8080-exec-7] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14156
2025-07-18 14:54:38.555 [http-nio-8080-exec-7] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14156: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 14:54:38.557 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 14:54:38.557 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 14:54:38.557 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 14:54:38.557 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 14:54:38.558 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 14:54:38.558 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 14:54:38.558 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 14:54:38.591 [http-nio-8080-exec-7] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14156: {"simulation_id":"1952","chat_id":"14156","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 14:54:38.592 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 14:54:38.592 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 14:54:38.774 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 182ms (attempt 1/3)
2025-07-18 14:54:38.786 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"2d9ce246-48a3-477e-8057-1ae286821bf7","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:54:38.787 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 14:54:38.788 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 14:54:38.788 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 14:54:38.788 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 14:54:38.789 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 14:54:38.789 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 14:54:38.789 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 14:54:38.789 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 14:54:38.790 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to your prof...'
2025-07-18 14:54:38.793 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='In this Professional...'
2025-07-18 14:54:38.794 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='null...'
2025-07-18 14:54:38.794 [http-nio-8080-exec-7] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 14:54:38.800 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"2d9ce246-48a3-477e-8057-1ae286821bf7","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 14:54:38.800 [http-nio-8080-exec-7] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 3 messages for simulation: 1952
2025-07-18 14:54:38.803 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:54:38.804 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:54:38.804 [http-nio-8080-exec-7] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:54:41.344 [http-nio-8080-exec-7] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: empathy for the chatId: 14156 to the value: 0.8
2025-07-18 14:54:41.423 [http-nio-8080-exec-7] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: directness for the chatId: 14156 to the value: 0.6
2025-07-18 14:54:42.092 [http-nio-8080-exec-7] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: directness wasn't found for the chatId: 14156
2025-07-18 14:54:42.093 [http-nio-8080-exec-7] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 3 messages
2025-07-18 14:54:42.179 [http-nio-8080-exec-7] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using AI_GENERATED engine
2025-07-18 14:54:42.262 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 14:54:42.339 [http-nio-8080-exec-7] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 14:54:42.339 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 14:54:42.339 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - Chat 14156 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 14:54:42.339 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14156 | message_count=3
2025-07-18 14:54:42.340 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you th..."
2025-07-18 14:54:42.340 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="In this Professional Services scenario, you'll face a complex situation where your ability to naviga..."
2025-07-18 14:54:42.340 [http-nio-8080-exec-7] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=ENTER_TEXT_QUESTION | content="AI-generated enter text question"
2025-07-18 14:55:17.432 [http-nio-8080-exec-3] INFO  c.b.s.s.DualModeSimulationRuntime - 🚀 Starting dual-mode message processing for chat 14156 on thread: http-nio-8080-exec-3
2025-07-18 14:55:18.862 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:55:18.871 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 📊 Detected simulation type: AI_GENERATED for simulation: Simulation 1: Initial Feedback Session (ID: 1952)
2025-07-18 14:55:18.873 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:55:18.893 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🤖 Processing user message 1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d with AI-generated engine for chat 14156
2025-07-18 14:55:18.900 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔄 Updating message 1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d with user answer
2025-07-18 14:55:19.027 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - ✅ Successfully updated message 1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d with user answer
2025-07-18 14:55:19.037 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Extracted enter text answer: as usual I don't know how to deal with that
2025-07-18 14:55:19.108 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - No skill materials found for context: 14156
2025-07-18 14:55:19.108 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI request - chatHistory size: 3
2025-07-18 14:55:19.109 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI request - userMessage: PRESENT
2025-07-18 14:55:19.109 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI request - simulationContext: PRESENT
2025-07-18 14:55:19.109 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI request - hyperParameters size: 7
2025-07-18 14:55:19.109 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI request - organizationContext: PRESENT
2025-07-18 14:55:19.109 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI request - skillMaterials size: 0
2025-07-18 14:55:19.131 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_REQUEST] Full AI request for chat 14156: {"simulation_id":"1952","chat_id":"14156","chat_history":[{"message_id":"b8914c3b-e0a5-47aa-9e72-5a23aea587e0","message_type":"Text","role":"ASSISTANT","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","character_name":null,"options":null,"user_answer":null,"timestamp":[2025,7,18,14,54,39,50821000],"requires_response":false},{"message_id":"a63e1bc1-189e-4c0b-899d-522dd0ee3ab7","message_type":"Text","role":"ASSISTANT","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","character_name":null,"options":null,"user_answer":null,"timestamp":[2025,7,18,14,54,39,50821000],"requires_response":false},{"message_id":"1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d","message_type":"EnterTextQuestion","role":"USER","content":"Message content not available","character_name":null,"options":null,"user_answer":null,"timestamp":[2025,7,18,14,54,39,50821000],"requires_response":true}],"user_message":{"message_id":"1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d","message_type":"EnterTextQuestion","content":"as usual I don't know how to deal with that","selected_option":null,"selected_option_id":null,"user_answer":"as usual I don't know how to deal with that","response_time":0},"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"hyper_parameters":{"goal_setting":0.0,"empathy":0.8,"engagement":0.0,"joint_decision_making":0.0,"collaboration":0.0,"active_listening":0.0,"feedback_delivery":0.0},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[]}
2025-07-18 14:55:19.133 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for message generation (send-message): http://localhost:8000/send-message with chat_id: 14156
2025-07-18 14:55:19.133 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/send-message: [Content-Type:"application/json"]
2025-07-18 14:55:19.240 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 107ms (attempt 1/3)
2025-07-18 14:55:19.240 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.AiAgentService - AI Agent returned AiMessageGenerationResponseDto(messages=[AiGeneratedMessageDto(messageType=Text, content=Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills., options=null, characterName=AI Assistant, characterRole=COACH, requiresResponse=false, responseTimeLimit=null, hint=null, correctAnswerPosition=null, metadata=null), AiGeneratedMessageDto(messageType=Text, content=In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?, options=null, characterName=AI Assistant, characterRole=COACH, requiresResponse=false, responseTimeLimit=null, hint=null, correctAnswerPosition=null, metadata=null), AiGeneratedMessageDto(messageType=EnterTextQuestion, content=null, options=null, characterName=AI Assistant, characterRole=COACH, requiresResponse=true, responseTimeLimit=null, hint=null, correctAnswerPosition=null, metadata=null)], updatedHyperParameters={empathy=0.8, directness=0.6}, conversationEnded=false, endReason=null, generationMetadata={provider=stub, test_mode=true, operation=send_message, timestamp=2024-01-15T10:30:00Z, model=enhanced_prompt_v2, chat_id=14156, user_message_id=1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d, prompt_version=v2.0, conversation_length=3, thread_based=false}, success=true, errorMessage=null) for chat: 14156
2025-07-18 14:55:19.308 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"send_message","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","chat_id":"14156","user_message_id":"1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d","prompt_version":"v2.0","conversation_length":3,"thread_based":false},"success":true,"error_message":null}
2025-07-18 14:55:19.309 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 14:55:19.309 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 14:55:19.310 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 14:55:19.310 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 14:55:19.310 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 14:55:19.311 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 14:55:19.311 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 14:55:19.311 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 14:55:19.312 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to your prof...'
2025-07-18 14:55:19.313 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='In this Professional...'
2025-07-18 14:55:19.313 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='null...'
2025-07-18 14:55:19.314 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 14:55:19.319 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for chat 14156: {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"send_message","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","chat_id":"14156","user_message_id":"1de89905-c1f4-4e47-bbaa-41cdcfc6ea6d","prompt_version":"v2.0","conversation_length":3,"thread_based":false},"success":true,"error_message":null}
2025-07-18 14:55:19.321 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.services.AiAgentService - Successfully generated 3 messages for chat: 14156
2025-07-18 14:55:19.322 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:55:19.322 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:55:19.322 [ForkJoinPool.commonPool-worker-1] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:55:19.325 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: empathy for the chatId: 14156 to the value: 0.8
2025-07-18 14:55:19.445 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: directness for the chatId: 14156 to the value: 0.6
2025-07-18 14:55:19.519 [ForkJoinPool.commonPool-worker-1] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: directness wasn't found for the chatId: 14156
2025-07-18 14:55:19.520 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine processed message successfully. Generated 3 new messages, returning 4 total messages.
2025-07-18 14:55:19.520 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully processed message with AI_GENERATED engine
2025-07-18 14:55:20.917 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - Remove all non-interacted messages for the chat 14156
2025-07-18 14:55:20.921 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - User 1 has used already all the hearts for chat 14156
2025-07-18 14:55:20.921 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Generating last simulation message for chat 14156 (hearts exhausted)
2025-07-18 14:55:22.373 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:55:22.374 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Generating final message for AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 14:55:22.374 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 14:55:22.375 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎯 Generating final message for AI-generated simulation, chat 14156
2025-07-18 14:55:22.474 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - No skill materials found for context: 14156
2025-07-18 14:55:22.475 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for message generation (send-message): http://localhost:8000/send-message with chat_id: 14156
2025-07-18 14:55:22.476 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/send-message: [Content-Type:"application/json"]
2025-07-18 14:55:22.562 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 86ms (attempt 1/3)
2025-07-18 14:55:22.563 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.services.AiAgentService - AI Agent returned AiMessageGenerationResponseDto(messages=[AiGeneratedMessageDto(messageType=Text, content=Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills., options=null, characterName=AI Assistant, characterRole=COACH, requiresResponse=false, responseTimeLimit=null, hint=null, correctAnswerPosition=null, metadata=null), AiGeneratedMessageDto(messageType=Text, content=In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?, options=null, characterName=AI Assistant, characterRole=COACH, requiresResponse=false, responseTimeLimit=null, hint=null, correctAnswerPosition=null, metadata=null), AiGeneratedMessageDto(messageType=EnterTextQuestion, content=null, options=null, characterName=AI Assistant, characterRole=COACH, requiresResponse=true, responseTimeLimit=null, hint=null, correctAnswerPosition=null, metadata=null)], updatedHyperParameters={empathy=0.8, directness=0.6}, conversationEnded=false, endReason=null, generationMetadata={provider=stub, test_mode=true, operation=send_message, timestamp=2024-01-15T10:30:00Z, model=enhanced_prompt_v2, chat_id=14156, user_message_id=final-message-request, prompt_version=v2.0, conversation_length=6, thread_based=false}, success=true, errorMessage=null) for chat: 14156
2025-07-18 14:55:22.619 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"send_message","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","chat_id":"14156","user_message_id":"final-message-request","prompt_version":"v2.0","conversation_length":6,"thread_based":false},"success":true,"error_message":null}
2025-07-18 14:55:22.622 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 14:55:22.623 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 14:55:22.623 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 14:55:22.623 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 14:55:22.623 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 14:55:22.623 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 14:55:22.624 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 14:55:22.624 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 14:55:22.624 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to your prof...'
2025-07-18 14:55:22.625 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='In this Professional...'
2025-07-18 14:55:22.626 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='null...'
2025-07-18 14:55:22.627 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 14:55:22.633 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for chat 14156: {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"send_message","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","chat_id":"14156","user_message_id":"final-message-request","prompt_version":"v2.0","conversation_length":6,"thread_based":false},"success":true,"error_message":null}
2025-07-18 14:55:22.634 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.services.AiAgentService - Successfully generated 3 messages for chat: 14156
2025-07-18 14:55:22.635 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:55:22.635 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:55:22.635 [ForkJoinPool.commonPool-worker-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 14:55:22.635 [ForkJoinPool.commonPool-worker-2] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully generated final message 58a45b00-b214-4b64-aa06-6a7577eb2164 using AI_GENERATED engine
2025-07-18 14:55:22.996 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - Successfully generated last simulation message: java.util.stream.ReferencePipeline$Head@42379d03
2025-07-18 14:55:22.997 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] SEND_MESSAGE | chat_id=14156 | message_count=2
2025-07-18 14:55:22.997 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] msg_1=send_message | message_type=TEXT | content="as usual I don't know how to deal with that"
2025-07-18 14:55:22.998 [ForkJoinPool.commonPool-worker-1] INFO  c.b.s.controllers.MessageController - [AI-RESPONSE] msg_2=send_message | message_type=TEXT | content="Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you th..."
2025-07-18 15:01:22.776 [http-nio-8080-exec-2] INFO  c.b.s.s.auth.CustomUsrDetailsService - Found simulation true for id 1952
2025-07-18 15:01:23.535 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - 🎬 Initializing chat 14157 for simulation: Simulation 1: Initial Feedback Session (ID: 1952) on thread: http-nio-8080-exec-2
2025-07-18 15:01:25.818 [http-nio-8080-exec-2] INFO  c.b.s.s.d.SimulationTypeDetector - 🤖 Detected AI-generated simulation: Simulation 1: Initial Feedback Session
2025-07-18 15:01:25.819 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - 🎯 Initializing AI_GENERATED simulation: Simulation 1: Initial Feedback Session
2025-07-18 15:01:25.821 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.SimulationEngineFactory - 🏭 Creating engine for simulation type: AI_GENERATED
2025-07-18 15:01:25.834 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - 🎬 Initializing AI-generated simulation for chat 14157
2025-07-18 15:01:25.836 [http-nio-8080-exec-2] WARN  c.b.s.s.e.AiGeneratedSimulationEngine - Could not access skill materials for context 14157: failed to lazily initialize a collection of role: com.backend.softtrainer.entities.Skill.materials: could not initialize proxy - no Session. Using empty list.
2025-07-18 15:01:25.837 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skill: PRESENT
2025-07-18 15:01:25.839 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - simulationContext: PRESENT
2025-07-18 15:01:25.840 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - organizationContext: PRESENT
2025-07-18 15:01:25.840 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - userContext size: 4
2025-07-18 15:01:25.840 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - initialHyperParameters size: 7
2025-07-18 15:01:25.841 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - skillMaterials size: 0
2025-07-18 15:01:25.842 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - 🔍 Building AI initialization request - chatHistory size: 0
2025-07-18 15:01:26.099 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - [AI_AGENT_INIT_REQUEST] Full AI initialization request for chat 14157: {"simulation_id":"1952","chat_id":"14157","skill":{"name":"Giving Feedback","description":"Assess the feedback of my employees","materials":[],"targetAudience":"Employees","complexityLevel":"mixed","expectedCountSimulations":1},"character":"AI-generated characters based on simulation context","chat_history":[],"simulation_context":{"simulation_name":"Simulation 1: Initial Feedback Session","simulation_description":"AI-generated simulation","learning_objectives":"AI-generated learning objectives based on skill description","character_info":"AI-generated characters based on simulation context","user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1}},"organization_context":{"name":"Default Organization","industry":"Technology","size":"50-100 employees","localization":"en"},"skill_materials":[],"user_context":{"role":"Employee","userName":"Руслан Коваленко Demo","experience":"intermediate","userId":1},"initial_hyper_parameters":{"goal_setting":0.5,"empathy":0.5,"engagement":0.5,"joint_decision_making":0.5,"collaboration":0.5,"active_listening":0.5,"feedback_delivery":0.5}}
2025-07-18 15:01:26.101 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - Calling AI Agent for simulation initialization (create-chat): http://localhost:8000/create-chat with simulation_id: 1952
2025-07-18 15:01:26.103 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - [AI_AGENT_REQUEST] HTTP headers for http://localhost:8000/create-chat: [Content-Type:"application/json"]
2025-07-18 15:01:26.698 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - AI Agent message response time: 594ms (attempt 1/3)
2025-07-18 15:01:26.711 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Raw AI response (before validation): {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"3286dcef-af88-4725-9548-6cb0b94be968","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 15:01:26.712 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - 🔧 SANITIZATION: Processing 3 messages
2025-07-18 15:01:26.712 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[0]: type='Text', requires_response=false
2025-07-18 15:01:26.712 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[0] type='Text' correctly has requires_response=false
2025-07-18 15:01:26.712 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[1]: type='Text', requires_response=false
2025-07-18 15:01:26.712 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[1] type='Text' correctly has requires_response=false
2025-07-18 15:01:26.713 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Message[2]: type='EnterTextQuestion', requires_response=true
2025-07-18 15:01:26.713 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - ✅ Message[2] type='EnterTextQuestion' correctly has requires_response=true
2025-07-18 15:01:26.713 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - ✅ SANITIZATION: No fixes needed, all 3 messages are correctly configured
2025-07-18 15:01:26.716 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='Welcome to your prof...'
2025-07-18 15:01:26.719 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='Text', content='In this Professional...'
2025-07-18 15:01:26.720 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - 🔍 Sanitizing message: type='EnterTextQuestion', content='null...'
2025-07-18 15:01:26.720 [http-nio-8080-exec-2] DEBUG c.b.s.services.AiAgentService - ✅ AI response validation passed
2025-07-18 15:01:26.723 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - [AI_AGENT_RESPONSE] Full validated AI response for simulation 1952: {"messages":[{"message_type":"Text","content":"Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you through a challenging workplace scenario that will test your professional development skills.","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"Text","content":"In this Professional Services scenario, you'll face a complex situation where your ability to navigate professional development challenges will be crucial. How do you typically approach situations where you need to balance multiple priorities while maintaining high quality standards?","options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":false,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null},{"message_type":"EnterTextQuestion","content":null,"options":null,"character_name":"AI Assistant","character_role":"COACH","requires_response":true,"response_time_limit":null,"hint":null,"correct_answer_position":null,"metadata":null}],"updated_hyper_parameters":{"empathy":0.8,"directness":0.6},"conversation_ended":false,"end_reason":null,"generation_metadata":{"provider":"stub","test_mode":true,"operation":"create_chat","timestamp":"2024-01-15T10:30:00Z","model":"enhanced_prompt_v2","simulation_id":"1952","chat_id":"3286dcef-af88-4725-9548-6cb0b94be968","prompt_version":"v2.0","thread_created":false},"success":true,"error_message":null}
2025-07-18 15:01:26.725 [http-nio-8080-exec-2] INFO  c.b.s.services.AiAgentService - Successfully initialized simulation with 3 messages for simulation: 1952
2025-07-18 15:01:26.728 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 15:01:26.728 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 15:01:26.729 [http-nio-8080-exec-2] DEBUG c.b.s.s.e.AiGeneratedSimulationEngine - Character lookup requested for: AI Assistant, using null for now
2025-07-18 15:01:32.758 [http-nio-8080-exec-2] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: empathy for the chatId: 14157 to the value: 0.8
2025-07-18 15:01:32.955 [http-nio-8080-exec-2] INFO  c.b.s.s.UserHyperParameterService - Update the hyper parameter with key: directness for the chatId: 14157 to the value: 0.6
2025-07-18 15:01:33.836 [http-nio-8080-exec-2] WARN  c.b.s.s.UserHyperParameterService - Hyper Parameter with key: directness wasn't found for the chatId: 14157
2025-07-18 15:01:33.836 [http-nio-8080-exec-2] INFO  c.b.s.s.e.AiGeneratedSimulationEngine - ✅ AI-generated engine initialized simulation with 3 messages
2025-07-18 15:01:33.915 [http-nio-8080-exec-2] INFO  c.b.s.s.DualModeSimulationRuntime - ✅ Successfully initialized chat with 3 messages using AI_GENERATED engine
2025-07-18 15:01:34.051 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - User hyper params [] initialized for user 1 and simulation 1952
2025-07-18 15:01:34.133 [http-nio-8080-exec-2] INFO  c.b.s.s.a.ProfileAnalyticsService - Received hyperparameter update event for user: demo@gmail.com
2025-07-18 15:01:34.134 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - Published hyperparameter update event for user: demo@gmail.com (bulk insert)
2025-07-18 15:01:34.134 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - Chat 14157 created for user 1 and simulation 1952 using dual-mode runtime
2025-07-18 15:01:34.134 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] CREATE_CHAT | chat_id=14157 | message_count=3
2025-07-18 15:01:34.134 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_1=create_chat | message_type=TEXT | content="Welcome to your professional development simulation, Руслан Коваленко Demo! I'm here to guide you th..."
2025-07-18 15:01:34.136 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_2=create_chat | message_type=TEXT | content="In this Professional Services scenario, you'll face a complex situation where your ability to naviga..."
2025-07-18 15:01:34.137 [http-nio-8080-exec-2] INFO  c.b.s.controllers.ChatController - [AI-RESPONSE] msg_3=create_chat | message_type=ENTER_TEXT_QUESTION | content="AI-generated enter text question"
2025-07-18 15:02:21.733 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7948910d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:25.103 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@401e04bb (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:34.183 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@49908bd4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:35.110 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@45ab4f12 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:44.200 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@54906c4d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:44.920 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@78d66e53 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:49.252 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@edad376 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:49.941 [http-nio-8080-exec-6] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@71f58915 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:50.151 [http-nio-8080-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 15:02:50.152 [http-nio-8080-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30358ms.
2025-07-18 15:02:50.152 [http-nio-8080-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 15:02:50.755 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30358ms.] [n/a]] with root cause
org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:564)
	at jdk.internal.reflect.GeneratedMethodAccessor55.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy199.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy157.findByEmailWithOrg(Unknown Source)
	at com.backend.softtrainer.services.auth.CustomUsrDetailsService.isChatOfUser(CustomUsrDetailsService.java:270)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:142)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:124)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:400)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:98)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:119)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:309)
	at org.springframework.security.access.expression.ExpressionUtils.evaluateAsBoolean(ExpressionUtils.java:30)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:68)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:40)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.check(DeferringObservationAuthorizationManager.java:47)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:251)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.controllers.ChatController$$SpringCGLIB$$0.getUserChatById(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-07-18 15:02:54.273 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@59ff24e4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:59.295 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@52d174c1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2025-07-18 15:02:59.296 [http-nio-8080-exec-7] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08003
2025-07-18 15:02:59.296 [http-nio-8080-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Connection is not available, request timed out after 30108ms.
2025-07-18 15:02:59.296 [http-nio-8080-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - This connection has been closed.
2025-07-18 15:02:59.301 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataAccessResourceFailureException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30108ms.] [n/a]] with root cause
org.postgresql.util.PSQLException: This connection has been closed.
	at org.postgresql.jdbc.PgConnection.checkClosed(PgConnection.java:993)
	at org.postgresql.jdbc.PgConnection.setNetworkTimeout(PgConnection.java:1694)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:561)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:168)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:170)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:46)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:54)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:564)
	at jdk.internal.reflect.GeneratedMethodAccessor55.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy199.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy157.findByEmailWithOrg(Unknown Source)
	at com.backend.softtrainer.services.auth.CustomUsrDetailsService.isChatOfUser(CustomUsrDetailsService.java:270)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:142)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:124)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:400)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:98)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:119)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:309)
	at org.springframework.security.access.expression.ExpressionUtils.evaluateAsBoolean(ExpressionUtils.java:30)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:68)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:40)
	at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.check(DeferringObservationAuthorizationManager.java:47)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:251)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.backend.softtrainer.controllers.ChatController$$SpringCGLIB$$0.getUserChatById(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:259)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:192)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:920)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:830)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-07-18 15:03:39.250 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 2638 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 15:03:39.253 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 15:03:41.452 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 15:03:41.452 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 15:03:41.523 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 15:03:41.652 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 15:04:22.145 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.api.configuration.ClassicConfiguration.setDataSource(ClassicConfiguration.java:1094)
	at org.flywaydb.core.api.configuration.FluentConfiguration.dataSource(FluentConfiguration.java:624)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.configureDataSource(FlywayAutoConfiguration.java:185)
	at org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.flyway(FlywayAutoConfiguration.java:172)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:639)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: java.net.SocketTimeoutException: Connect timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:551)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 42 common frames omitted
2025-07-18 15:04:22.243 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 15:04:33.245 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: java.net.SocketTimeoutException: Connect timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:551)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 36 common frames omitted
2025-07-18 15:04:33.251 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: The connection attempt failed.
-------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : The connection attempt failed.

2025-07-18 15:04:33.256 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-18 15:04:33.318 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: The connection attempt failed.
-------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : The connection attempt failed.

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.backend.softtrainer.SoftTrainerBackendApplication.main(SoftTrainerBackendApplication.java:15)
Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to obtain connection from database: The connection attempt failed.
-------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : The connection attempt failed.

	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:60)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:74)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:142)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 18 common frames omitted
Caused by: org.postgresql.util.PSQLException: The connection attempt failed.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:354)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
	at org.postgresql.Driver.makeConnection(Driver.java:443)
	at org.postgresql.Driver.connect(Driver.java:297)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:48)
	... 24 common frames omitted
Caused by: java.net.SocketTimeoutException: Connect timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:551)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
	... 36 common frames omitted
2025-07-18 15:05:02.282 [main] INFO  c.b.s.SoftTrainerBackendApplication - Starting SoftTrainerBackendApplication using Java 17.0.13 with PID 3046 (/Users/rkovalenko/IdeaProjects/soft-trainer-backend/build/classes/java/main started by rkovalenko in /Users/rkovalenko/IdeaProjects/soft-trainer-backend)
2025-07-18 15:05:02.284 [main] INFO  c.b.s.SoftTrainerBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-18 15:05:04.932 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-18 15:05:04.933 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-18 15:05:05.030 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-18 15:05:05.166 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-18 15:05:15.103 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@67d5ac2f
2025-07-18 15:05:15.106 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-18 15:05:16.159 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.8 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-07-18 15:05:30.294 [main] INFO  c.b.s.configs.AiAgentConfig - 🔧 Configuring AI Agent RestTemplate with timeouts: connect=5000ms, read=20000ms
2025-07-18 15:05:30.711 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Initializing OpenAI client with timeout: 60 seconds
2025-07-18 15:05:30.711 [main] INFO  c.b.s.s.c.ChatGptServiceJvmOpenAi - [OpenAI] Using model: gpt-4o-mini
2025-07-18 15:05:31.112 [main] INFO  c.b.s.configs.AiAgentConfig - 🧵 Configuring AI Agent thread pool: core=5, max=20, queue=100
2025-07-18 15:05:32.068 [main] INFO  c.b.s.SoftTrainerBackendApplication - Started SoftTrainerBackendApplication in 30.478 seconds (process running for 31.854)
